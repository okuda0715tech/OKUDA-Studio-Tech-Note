- [参照透過性](#参照透過性)
  - [参照透過性の特徴](#参照透過性の特徴)
  - [参照透過ではない例](#参照透過ではない例)
    - [グローバル変数を参照する場合](#グローバル変数を参照する場合)
    - [ファイルに書き込みをする場合](#ファイルに書き込みをする場合)


# 参照透過性

参照透過性とは、ある関数やメソッドが同じ入力に対して常に同じ出力を返し、副作用がないことを意味します。参照透過性のある関数のことを **純粋関数** と呼びます。

この性質を持つ型は、次のような特徴を持っています。

## 参照透過性の特徴

1. **同じ入力に対して常に同じ出力を返す**

メソッドや関数が同じ引数で呼び出されると、常に同じ結果を返すことが保証されます。

2. **副作用がない**

関数の実行は外部の状態（例えば、グローバル変数の値やファイル、データベース）に影響を与えません。また、外部の状態に依存しません。

3. **イミュータブル（不変）なデータ構造**

参照透過性を保つために、参照透過な型は一般的にイミュータブルなデータ構造を使用します。これにより、データの状態が外部から変更されないことが保証されます。


## 参照透過ではない例

### グローバル変数を参照する場合

例えば、 Java で次のようなメソッドがあったとします。

```java
int add(int x) {
    return x + someGlobalVariable;
}
```

このメソッドは、someGlobalVariableの値が外部で変更されると、同じ入力でも結果が変わる可能性があり、参照透過ではありません。


### ファイルに書き込みをする場合

ファイルやデータベースに書き込みを行うメソッドも副作用があるため、参照透過ではありません。

たとえそのメソッドが何も返さないとしても、外部リソース (この場合はファイル) を更新している時点で、参照透過ではないとみなされます。


