<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [コレクション間の変換](#コレクション間の変換)
	- [配列をListに変換する方法（わざわざ配列を作りたくない場合は、要素をそのままセットすることも可能）](#配列をlistに変換する方法わざわざ配列を作りたくない場合は要素をそのままセットすることも可能)
		- [注意点](#注意点)
	- [Listを配列に変換する方法](#listを配列に変換する方法)
	- [ListをSetに変換する方法](#listをsetに変換する方法)
	- [SetをListに変換する方法](#setをlistに変換する方法)
	- [ListをMapに変換する方法](#listをmapに変換する方法)
	- [ListをMapに変換する方法](#listをmapに変換する方法)
	- [配列からSetに変換する方法](#配列からsetに変換する方法)

<!-- /TOC -->


# コレクション間の変換

## 配列をListに変換する方法（わざわざ配列を作りたくない場合は、要素をそのままセットすることも可能）

`Arrays.asList({変換したい配列});`とすればOK
わざわざ配列を作る必要がない場合は、
`Arrays.asList({要素1,要素2,要素3});`とすればOK

### 注意点

`Arrays.asList({配列});`は、変換前の配列をListで包んでいるだけのようで、addやremoveなどで要素数を変更することができません。もしそのような操作をした場合には、`java.lang.UnsupportedOperationException`が発生するので注意しましょう。

```Java
// 方法1
String[] array = {"foo","bar","foo2"};
List<String> list = Arrays.asList(array);

// 方法2
List<String> list = Arrays.asList("a", "b", "c");
```


## Listを配列に変換する方法

```java
// Integer型データの場合
List<Integer> integerList = new ArrayList<>();
Integer[] integerArray = integerList.toArray(new Integer[0]);

// String型データの場合
List<String> stringList = new ArrayList<>();
String[] stringArray = stringList.toArray(new String[0]);
```

`toArray()` メソッドの引数に渡す配列は、データを格納する配列である。  
この配列のサイズが足りない場合は、新しく必要なサイズの配列が生成されます。  
引数に何も渡さない `toArray()` メソッドも存在しますが、その場合、返値の型が `Object[]` になります。


## ListをSetに変換する方法

```java
// 変換したいList
List<String> strings = Arrays.asList("あ", "いい", "うぅ", "エー", "ｵｳﾌ");

// Setに変換
Set<String> setString = new HashSet<>(strings);
```


## SetをListに変換する方法

```java
// 変換したいSet
Set<String> strings = new HashSet<String>() {
        add("あ");
        add("いい");
        add("うぅ");
        add("エー");
        add("ｵｳﾌ");
};

// Listに変換
List<String> list = new ArrayList<>(strings);
```


## ListをMapに変換する方法

```java
class Dto {
       final long id;
       final String val;
       Dto(long id, String val) {
              this.id = id;
              this.val = val;
       }

      @Override
      public String toString() {
             return String.format("Dto(%d, %s)", id, val);
      }
}
// 変換するList        
List<Dto> dtos = IntStream.rangeClosed(1, 10).mapToObj(id -> new Dto(id, UUID.randomUUID().toString())).collect(Collectors.toList());

// Mapに変換
Map<Long, Dto> dtoMap = dtos.stream().collect(Collectors.toMap(dto ->  dto.id, dto -> dto, (dto1, dto2) -> dto1));
```

toMap()の第一引数でキーになる値を渡し、第二引数でバリューを渡します。
キーに重複がある場合、IllegalStateExceptionが発生します。
第三引数で、条件を指定します。(dto1, dto2) -> dto1は先にセットしたバリューを優先する条件です。


## ListをMapに変換する方法

```java
// 変換したいMap(リストからマップで作成したもの)
Map<Long, Dto> dtoMap = dtos.stream().collect(Collectors.toMap(dto ->  dto.id, dto -> dto, (dto1, dto2) -> dto1));

// Listに変換
List<Dto> Dtos = new ArrayList<>(dtoMap.values());
```

Mapのバリューをリストに変換するには、values()メソッドを使っMapのバリューのコレクションを作成します。
作成したコレクションをnew ArrayList<>()の引数に渡すことで変換可能です！


## 配列からSetに変換する方法

`配列 -> List -> Set`のように一度Listに変換してからSetに変換します。

```java
String[] stringArray = {"a", "b", "c"};
Set<String> stringSet = new HashSet<>(Arrays.asList(stringArray));
```
