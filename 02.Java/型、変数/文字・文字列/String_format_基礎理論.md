<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [String_format 基礎理論](#string_format-基礎理論)
  - [メソッドシグネチャ](#メソッドシグネチャ)
  - [第一引数のフォーマット](#第一引数のフォーマット)
    - [数値、文字の場合](#数値文字の場合)
    - [日付、時刻の場合](#日付時刻の場合)
    - [第二引数を与えない場合](#第二引数を与えない場合)
  - [第一引数の flags について](#第一引数の-flags-について)
  - [第一引数の conversion について](#第一引数の-conversion-について)
    - [整数の N 進数変換を行う conversion](#整数の-n-進数変換を行う-conversion)
    - [小数の文字列を取得する conversion](#小数の文字列を取得する-conversion)
    - [日付、時刻の文字列を取得する conversion](#日付時刻の文字列を取得する-conversion)
    - [文字列の文字列を取得する conversion](#文字列の文字列を取得する-conversion)
    - [その他の conversion](#その他の-conversion)
    - [b, B を使用した例](#b-b-を使用した例)
    - [c, C を使用した例](#c-c-を使用した例)
    - [h, H を使用した例](#h-h-を使用した例)
    - [% を使用した例](#-を使用した例)
    - [n を使用した例](#n-を使用した例)
<!-- TOC END -->


# String_format 基礎理論

## メソッドシグネチャ

```java
public static String format(String format, Object... args)
```

第二引数は、可変長引数になっており、複数指定することができます。

```Java
String.format("%s,%s", "123", "456") // 123,456
// 第二引数以降に複数のパラメータを設定する場合は、
// 第一引数の %conversion 部分の前から順番にパラメータを割り当てていきます。
```


## 第一引数のフォーマット

### 数値、文字の場合

```
%[argument_index$][flags][width][.precision]conversion

[] 無しは、必須項目
[] は、オプション項目
```

- %
  - 固定値  
- argument_index$
  - format() メソッドの第二引数以降の引数の何番目のパラメータを使用するかを指示します。
  - 例えば、最初の引数は `1$` 、 2 番目の引数は `2$` で参照します。
  - 直前に使用した N 番目の引数を再度利用する場合は、 `<` を使用することができます。
  - 例えば、 `%1$d,%1$d` と `%1$d,%<d` は、同じ結果を得ることができます。
  - `%1$d,%<d,%<d` のように、 `<` を繰り返し使用することもできます。
- flags
  - 別途解説
- width
  - 出力に書き込む最小文字数を指示します。
- .precision
  - precision は、日本語で 「精度」 を意味します。
  - 一般的に、数値は、小数点以下の桁数が多ければ多いほど数の精度は高くなります。
  - 上記のような意味合いから、 `format()` メソッドでは、最大文字数を意味します。
  - 小数に対してのみ指定することができます。
  - 文字に対して指定するサンプルもネット上にはありますが、右端しか切り落とせないし、公式ドキュメントには、文字を指定するとエラーになると記載してあるため、小数に対してのみ使用するようにします。
- conversion
  - 引数を書式設定する方法を示す文字です。
  - 有効な値は、引数のデータ型によって異なります。


### 日付、時刻の場合

```
%[argument_index$][flags][width]conversion
```

argument_index$ 、 flags 、 width については、数値、文字列の場合と同じです。

- conversion
  - 2 文字で指定します
  - 最初の文字は `t` または `T` です。
    - 2 文字目で大文字の `T` を使用することがあるため、小文字の `t` を使用することをお勧めします。
  - 2 番目の文字は使用する書式を指示します。


### 第二引数を与えない場合

```
%[flags][width]conversion
```

 flags 、 width については、数値、文字列の場合と同じです。

 - conversion
   - 出力への挿入内容を示す文字です。


## 第一引数の flags について

表 1 : flags の意味

| フラグ         | 意味                                                                                                               |
|----------------|--------------------------------------------------------------------------------------------------------------------|
| '-' (ハイフン) | 左揃えになります。 width を指定しないとエラーになります。右揃えにしたい場合は width のみ指定します。                         |
| '#'            | 8 進数 or 16 進数表記で出力する。すなわち、「%o」において先頭に「0」を、「%x」において頭に「0x」を付けて出力する。 |
| '+'            | 正の数 (プラスの数) の場合に、プラス符号が付与されます。                                                           |
| ' '            | 正の数 (プラスの数) の場合に、数値の前に一文字の半角スペースが入ります。                                           |
| '0'            | width で指定した長さに満たない場合は、 0 で埋められます。                                                          |
| ','            | 3 桁ごとにコンマで区切ります。 (ロケール固有)                                                                      |
| '('            | 負の数 (マイナスの数) の場合に、マイナス符号を除去し、丸カッコで囲みます。例えば、 -10 なら (10) になる。          |

表 2 : 各フラグの変換種別ごとの使用可否 (参考程度に。大事なのはフラグの意味のほうなので。)

| フラグ | 一般 | 文字 | 整数 | 浮動小数点 | 日付 / 時刻 |
|--------|------|------|------|------------|-------------|
| '-'    | ○    | ○    | ○    | ○          | ○           |
| '#'    | ○1   | -    | ○3   | ○          | -           |
| '+'    | -    | -    | ○4   | ○          | -           |
| '  '   | -    | -    | ○4   | ○          | -           |
| '0'    | -    | -    | ○    | ○          | -           |
| ','    | -    | -    | ○2   | ○5         | -           |
| '('    | -    | -    | ○4   | ○5         | -           |

1 : Formattable の定義に依存する。  
2 : 'd' 変換のみ。  
3 : 'o' 、 'x' 、および 'X' 変換のみ。  
4 : 'd' 、 'o' 、 'x' 、および 'X' 変換が BigInteger に適用されるか、  
'd' が byte 、 Byte 、 short 、 Short 、 int 、 Integer 、 long 、および Long に適用される場合。  
5 : 'e' 、 'E' 、 'f' 、 'g' 、および 'G' 変換のみ。


## 第一引数の conversion について

### 整数の N 進数変換を行う conversion

整数を 8 進数、 10 進数、 16 進数の間で変換したい場合に、以下の conversion を使用します。  
もしくは、単にそれらの数値を文字列として取得したい場合に使用します。

| conversion | 第二引数に与えられるデータ型 | 用途                                                |
|------------|------------------------------|-----------------------------------------------------|
| 'o'        | int / long                   | 8 進整数表記の文字列を取得したい場合に使用します。  |
| 'd'        | int / long                   | 10 進整数表記の文字列を取得したい場合に使用します。 |
| 'x', 'X'   | int / long                   | 16 進整数表記の文字列を取得したい場合に使用します。 |

【余談】 o は、オクトパスの o だから、 8 と覚える。

小数を変換することはできません。  
現実の数学の世界では、 10 進数以外の N 進数の小数などは存在しますが、  
そもそも Java では、私の調べた限り 10 進数以外の小数を扱っていないような感じです。

第二引数に与える値は、整数なら何進数表記でもかまいません。


### 小数の文字列を取得する conversion


| conversion | 第二引数に与えられるデータ型 | 用途                                                                                        |
|------------|--------------------------------|---------------------------------------------------------------------------------------------|
| 'f'        | float / double                 | 10 進整数表記の文字列を取得したい場合に使用します。                                         |
| 'e', 'E'   | float / double                 | 1.000e-01 のように 10 の累乗表現の文字列を取得したい場合に使用します。 (結果は 10 進数表記) |
| 'g', 'G'   | float / double                 | precision と値を考慮して、 `e` のように表示するか `f` のように表示するかを自動的に決定します。 (結果は 10 進数表記)                                   |
| 'a', 'A'   | float / double                 | 結果は、有効数字および指数を持つ16進浮動小数点数として書式設定されます。                    |

precision が指定された場合は、四捨五入された値を出力します。


### 日付、時刻の文字列を取得する conversion

| conversion | 第二引数に与えられるデータ型 | 用途                                                                                               |
|------------|------------------------------|----------------------------------------------------------------------------------------------------|
| 't', 'T'   | Date / Calendar / long 等    | 日付と時刻の文字列を取得する場合に使用します。詳細は、この `t` or `T` の次に来る文字で指定します。 |

第二引数に long 型のデータを与える場合は、 unix epoc の [ミリ秒] 単位の時刻を与える。  
unix epoc は本来は単位が [秒] であるが、 Java で扱う場合のほとんどは [ミリ秒] で扱う。


### 文字列の文字列を取得する conversion

| conversion | 第二引数に与えられるデータ型         | 用途                                     |
|------------|--------------------------------------|------------------------------------------|
| 's', 'S'   | String / int / long / float / double | 文字系の型の引数を取る場合に使用します。 |

### その他の conversion

| conversion | 第二引数に与えられるデータ型                          | 用途                                                                                      |
|------------|-------------------------------------------------------|-------------------------------------------------------------------------------------------|
| 'b', 'B'   | boolean                                               | boolean 値の文字列を取得したい場合に使用します。                                          |
| 'c', 'C'   | char                                                  | char 値の文字列を取得したい場合に使用します。                                             |
| 'h', 'H'   | hashCode() メソッドがオーバーライドされたオブジェクト | 第二引数の hashCode() メソッドを実行し、その結果を 16 進数で表示する場合に使用する        |
| '%'        | パーセント                                            | '%' を取得したい場合に使用します。第二引数は使用しません。                                |
| 'n'        | 行区切り文字                                          | プラットフォーム固有の行区切り文字 を取得したい場合に使用します。第二引数は使用しません。 |


### b, B を使用した例

```Java
String.format("%bと%b", true, false); // trueとfalse
```


### c, C を使用した例

```Java
char largeA = 65; // 65 は文字の A を表す
String content = String.format("%c", largeA); // A
```


### h, H を使用した例

```java
Object o = new Object();
int hashCode = o.hashCode();

// $x は 16 進数で出力する。
String content = String.format(Locale.JAPAN, "%1$x : %2$h", hashCode, o);
// 【実行結果】
// b4cbc36 : b4cbc36
```


### % を使用した例

```Java
String.format(Locale.JAPAN, "%d %%", 100); // 100 %
```


### n を使用した例

```Java
String.format(Locale.JAPAN, "%d%n%d", 1, 2);
// 【結果】以下のように二行で出力されます。
// 1
// 2
```
