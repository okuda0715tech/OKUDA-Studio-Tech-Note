- [メソッド参照 (コロン 2 つのやつ)](#メソッド参照-コロン-2-つのやつ)
  - [概要](#概要)
  - [文法](#文法)
  - [メソッド参照を理解するためのサンプル](#メソッド参照を理解するためのサンプル)


# メソッド参照 (コロン 2 つのやつ)

## 概要

メソッド参照とは、ラムダ式内の処理が、一つのメソッド呼び出しのみである場合に、引数を省略できる表現方法のことになります。


## 文法

```
// クラスメソッドの場合
クラス名::メソッド名

// インスタンスメソッドの場合
インスタンス名::メソッド名
```


## メソッド参照を理解するためのサンプル

このサンプルでは、以下のコードの `Function` インターフェースの実装部分を  
**匿名クラス -> ラムダ式 -> メソッド参照** の順で、書き直していきます。

```Java
public class Controller {

    Function<Integer, String> f = new Function<Integer, String>() {
        @Override
        public String apply(Integer input) {
            return doSomething(input);
        }
    };

    void myMethod() {
        Log.d("test", f.apply(1));
    }
    
    private String doSomething(Integer input) {
        return "result = " + input;
    }

}
```

以下のコードは、上記の匿名クラスの部分を抜き出しただけのコードになります。

**匿名クラス**

```java
    Function<Integer, String> f = new Function<Integer, String>() {
        @Override
        public String apply(Integer input) {
            return doSomething(input);
        }
    };
```

匿名クラスをラムダ式に書き換えると以下のようになります。  
インターフェース名とメソッド名を省略しただけなので、ここまでは問題ないと思います。

**ラムダ式**

```Java
    Function<Integer, String> f = input -> doSomething(input);
```

さて、いきなりですが、これをメソッド参照に書き換えると以下のようになります。

**メソッド参照**

```java
    Function<Integer, String> f = this::doSomething;
```

メソッド参照での変更点は以下の通りです。

- 引数 `input` が省略されました。
- どのオブジェクトのメソッドを呼び出しているのかがわかるように、 `this` が追加されました。
- インスタンスとメソッドの連結が、コロン二つ ( `::` ) で表現されました。

つまり、ラムダ式内の処理が、 **「単に引数を渡して、メソッドを一つ呼び出しているだけ」** だったので、  
**引数を省略して、メソッド呼び出しだけにする** ことができたのです。

逆に言うと、メソッド参照が使えないパターンとしては、

**ラムダ式内の処理が一つのメソッド呼び出しだけではない場合** には、メソッド参照を使用することはできません。



