- [スキーマを追加する](#スキーマを追加する)
  - [サーバーのスキーマをダウンロードする](#サーバーのスキーマをダウンロードする)


# スキーマを追加する

## サーバーのスキーマをダウンロードする

Apollo Kotlin では、クエリから型安全なモデルとコードを生成するためにスキーマが必要です。スキーマを取得する方法は複数あります。たとえば、SDL タブに移動し、GraphOS Studio Sandbox を使用して生の SDL スキーマをダウンロードできます。

このチュートリアルでは、Apollo プラグインによって自動的に作成される Gradle タスクを使用します。GraphQL はイントロスペクションをサポートしているため、イントロスペクションが有効になっている GraphQL エンドポイントであればどれでも動作します。

まず、GraphQL エンドポイントの URL とスキーマの目的の場所を Apollo Gradle 構成に追加します。

```kotlin
// app/build.gradle.kts
apollo {
    service("service") {
        packageName.set("com.example.rocketreserver")
        introspection { 
            endpointUrl.set("https://apollo-fullstack-tutorial.herokuapp.com/graphql") 
            schemaFile.set(file("src/main/graphql/schema.graphqls")) 
        } 
    }
}
```

次に、プロジェクトのルートから、Android Studio のターミナルタブで次のコマンドを実行します。

```
./gradlew :app:downloadServiceApolloSchemaFromIntrospection
```

これにより、エンドポイントから schema.graphqls ファイルが app/src/main/graphql/schema.graphqls にダウンロードされます。

Android Studio プラグインをインストールした場合は、[ツール] | [Apollo] | [スキーマのダウンロード] からスキーマをダウンロードすることもできます。

次に、このスキーマを使用する最初のクエリを記述します。

