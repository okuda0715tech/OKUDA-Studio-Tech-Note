- [委譲と継承の違い](#委譲と継承の違い)
  - [委譲の特徴](#委譲の特徴)
  - [継承の特徴](#継承の特徴)
  - [移譲と継承の使い分け方](#移譲と継承の使い分け方)


# 委譲と継承の違い

| 機能                                               |          委譲          |              継承              |
| -------------------------------------------------- | :--------------------: | :----------------------------: |
| 元の機能を変更することなく新しい機能が追加しやすい |           ○            |                                |
| 責任の所在                             | 委譲先に責任がある | 継承したクラスに責任がある |


## 委譲の特徴

- 責任
  - 移譲先のクラスがその機能に対する責任を持つ
- 機能拡張性
  - 拡張しづらい。
- 機能の拡張方法
  - Decorator パターン (継承と移譲の両方を使用します)
    - 移譲先の機能には変更を加えず、新しい機能を追加する
- 「 has - a 」 の関係
- いくつでも委譲するオブジェクトが持てる


## 継承の特徴

- 責任
  - 継承したクラスがその機能に対する責任を持つ
- 機能拡張
  - 拡張しやすい
- 「 is - a 」 の関係
- 一つのクラスしか継承できない


## 移譲と継承の使い分け方

スーパータイプの機能の全てをサブタイプで利用する可能性がある場合は、継承を使用します。言い換えると、スーパータイプのオブジェクトをサブタイプのオブジェクトに置き換えたときに、正しく動作することが保証されるべきである場合は、継承を使用します。

一方で、サブタイプがスーパータイプの一部の機能のみを利用することが明らかな場合には、委譲を使用します。

この考え方は、リスコフの置換原則に基づいています。もし、上記のルールを逸脱したような使用を行えば、何らかの不具合につながる可能性が高まると思われます。

例えば、委譲すべきところで、継承を使ってしまった場合は、スーパータイプのオブジェクトをサブタイプのオブジェクトに入れ替えた場合にコンパイルエラーにはならないかもしれません。しかし、サブタイプで未実装の関数が呼ばれたときに、予期せずスーパークラスの関数が呼ばれて、予期せぬ結果になる可能性があります。







