- [Decorator パターン](#decorator-パターン)
  - [役割](#役割)
  - [実装方法](#実装方法)
  - [使いどころ](#使いどころ)


# Decorator パターン

## 役割

機能（メソッド）に、複数あるオプション機能から、必要な機能のみを動的に追加する。


## 実装方法

```kotlin
// 1. コンポーネントインターフェース
interface Notifier {
    fun notify(message: String)
}

// 2. コアな機能
class SimpleNotifier : Notifier {
    override fun notify(message: String) {
        println("📨 通知: $message")
    }
}

// 3. 共通のデコレータ基底クラス
abstract class NotifierDecorator(
    private val wrappee: Notifier
) : Notifier {
    override fun notify(message: String) {
        wrappee.notify(message) // デフォルトの動作は委譲
    }
}

// 4. 各種デコレータ（追加機能）

class LoggingNotifier(notifier: Notifier) : NotifierDecorator(notifier) {
    override fun notify(message: String) {
        println("📝 ログ出力: $message")
        super.notify(message)
    }
}

class VibrationNotifier(notifier: Notifier) : NotifierDecorator(notifier) {
    override fun notify(message: String) {
        println("📳 バイブレーション起動！")
        super.notify(message)
    }
}

class SoundNotifier(notifier: Notifier) : NotifierDecorator(notifier) {
    override fun notify(message: String) {
        println("🔊 サウンド再生！")
        super.notify(message)
    }
}
```

```kotlin
fun main() {
    // 基本の通知機能だけ
    val basic = SimpleNotifier()
    basic.notify("Hello World")

    println("------------")

    // ログ付き通知
    val withLog = LoggingNotifier(SimpleNotifier())
    withLog.notify("ログ付き通知")

    println("------------")

    // ログ + サウンド + バイブの豪華版
    val fancy = VibrationNotifier(SoundNotifier(LoggingNotifier(SimpleNotifier())))
    fancy.notify("重要なお知らせ")
}
```

```markdown
📨 通知: Hello World
------------
📝 ログ出力: ログ付き通知
📨 通知: ログ付き通知
------------
📳 バイブレーション起動！
🔊 サウンド再生！
📝 ログ出力: 重要なお知らせ
📨 通知: 重要なお知らせ
```


## 使いどころ

使いどころはあまりないかも。


