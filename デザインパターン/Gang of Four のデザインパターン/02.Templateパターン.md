- [Template ãƒ‘ã‚¿ãƒ¼ãƒ³](#template-ãƒ‘ã‚¿ãƒ¼ãƒ³)
  - [å½¹å‰²](#å½¹å‰²)
  - [å®Ÿè£…æ–¹æ³•](#å®Ÿè£…æ–¹æ³•)
  - [ä½¿ã„ã©ã“ã‚](#ä½¿ã„ã©ã“ã‚)
    - [Activity ã‚„ Fragment ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«](#activity-ã‚„-fragment-ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«)
    - [ã‚µãƒ¼ãƒãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ãã®çµæœã®ç”»é¢è¡¨ç¤º](#ã‚µãƒ¼ãƒãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ãã®çµæœã®ç”»é¢è¡¨ç¤º)
    - [è¤‡æ•°ç¨®é¡ã®é€šçŸ¥å‡¦ç†](#è¤‡æ•°ç¨®é¡ã®é€šçŸ¥å‡¦ç†)


# Template ãƒ‘ã‚¿ãƒ¼ãƒ³

## å½¹å‰²

å‡¦ç†ã®æµã‚Œã‚’ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ã§å®šç¾©ã—ã€å…·ä½“çš„ãªå‡¦ç†å†…å®¹ã‚’ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã§å®Ÿè£…ã™ã‚‹ã€‚


## å®Ÿè£…æ–¹æ³•

çœç•¥


## ä½¿ã„ã©ã“ã‚

ä½•ã‚‰ã‹ã®å…±é€šã®å‡¦ç†ãƒ•ãƒ­ãƒ¼ãŒã‚ã‚‹ã¨æ„Ÿã˜ã‚‰ã‚Œã‚‹å ´åˆã«ã¯ã€ Template ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè£…ã‚’æ¤œè¨ã—ã¦ã¿ã‚‹ã¨è‰¯ã•ãã†ã§ã™ã€‚


### Activity ã‚„ Fragment ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

Activity ã‚„ Fragment ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã§ã‚‚ã€ Template ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚


### ã‚µãƒ¼ãƒãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ãã®çµæœã®ç”»é¢è¡¨ç¤º

```kotlin
abstract class FormFlow {

    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
    fun execute() {
        validateInput()
        showLoading()
        sendRequest()
        hideLoading()
        handleResult()
    }

    // ã‚µãƒ–ã‚¯ãƒ©ã‚¹å›ºæœ‰ã®å‡¦ç†
    protected abstract fun validateInput()
    protected abstract fun sendRequest()
    protected abstract fun handleResult()

    // å…±é€šå‡¦ç†
    private fun showLoading() { println("Loading...") }
    private fun hideLoading() { println("Done.") }
}
```

```kotlin
// å„ã‚µãƒ¼ãƒãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã®å‡¦ç†
class LoginFormFlow : FormFlow() {
    override fun validateInput() {
        println("ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯")
    }

    override fun sendRequest() {
        println("ãƒ­ã‚°ã‚¤ãƒ³APIã‚’å‘¼ã³å‡ºã—")
    }

    override fun handleResult() {
        println("ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ â†’ ãƒ›ãƒ¼ãƒ ã¸é·ç§»")
    }
}
```

```kotlin
// å®Ÿè¡Œ
val flow = LoginFormFlow()
flow.execute()
```


### è¤‡æ•°ç¨®é¡ã®é€šçŸ¥å‡¦ç†

è¤‡æ•°ç¨®é¡ã®é€šçŸ¥å‡¦ç†ã‚’ Template ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚

ãŸã¨ãˆã°ã€ã‚¢ãƒ—ãƒªå†…ã§ä»¥ä¸‹ã®ã‚ˆã†ãªé€šçŸ¥ã‚’é€ã‚‹ã¨ã—ã¾ã™ã€‚

- ğŸ”” é€šå¸¸ã®ãŠçŸ¥ã‚‰ã›ï¼ˆä¾‹ï¼šã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³æƒ…å ±ï¼‰
- ğŸ“¢ é‡è¦é€šçŸ¥ï¼ˆä¾‹ï¼šã‚¢ã‚«ã‚¦ãƒ³ãƒˆåœæ­¢ãªã©ï¼‰
- ğŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šçŸ¥ï¼ˆä¾‹ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã®ãƒãƒ£ãƒƒãƒˆï¼‰

å…±é€šã®æµã‚Œï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚

1. é€šçŸ¥ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
2. é€šçŸ¥ãƒãƒ£ãƒãƒ«ã‚„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è¨­å®š
3. é€šçŸ¥é€ä¿¡

```kotlin
abstract class BaseNotifier {

    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
    fun notifyUser() {
        val data = buildNotificationData()
        val builder = createNotificationBuilder(data)
        sendNotification(builder)
    }

    // ã‚µãƒ–ã‚¯ãƒ©ã‚¹å›ºæœ‰ã®å‡¦ç†
    protected abstract fun buildNotificationData(): NotificationData
    protected abstract fun createNotificationBuilder(data: NotificationData): NotificationCompat.Builder

    // å…¨ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã§å…±é€šã®å‡¦ç†
    private fun sendNotification(builder: NotificationCompat.Builder) {
        val notificationManager = NotificationManagerCompat.from(App.instance)
        notificationManager.notify(generateNotificationId(), builder.build())
    }

    // å…¨ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã§å…±é€šã®å‡¦ç†
    private fun generateNotificationId(): Int = (System.currentTimeMillis() % Int.MAX_VALUE).toInt()
}

data class NotificationData(
    val title: String,
    val message: String,
    val channelId: String
)
```

```kotlin
// é€šå¸¸é€šçŸ¥ã®å®Ÿè£…

class NormalNotifier : BaseNotifier() {
    override fun buildNotificationData(): NotificationData {
        return NotificationData(
            title = "ãŠçŸ¥ã‚‰ã›",
            message = "æ–°ã—ã„ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãŒå§‹ã¾ã‚Šã¾ã—ãŸï¼",
            channelId = "normal_channel"
        )
    }

    override fun createNotificationBuilder(data: NotificationData): NotificationCompat.Builder {
        return NotificationCompat.Builder(App.instance, data.channelId)
            .setContentTitle(data.title)
            .setContentText(data.message)
            .setSmallIcon(R.drawable.ic_notification)
            .setPriority(NotificationCompat.PRIORITY_DEFAULT)
    }
}
```

```kotlin
// é‡è¦é€šçŸ¥ã®å®Ÿè£…

class ImportantNotifier : BaseNotifier() {
    override fun buildNotificationData(): NotificationData {
        return NotificationData(
            title = "é‡è¦ãªãŠçŸ¥ã‚‰ã›",
            message = "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä¸€æ™‚åœæ­¢ã•ã‚Œã¾ã—ãŸã€‚",
            channelId = "important_channel"
        )
    }

    override fun createNotificationBuilder(data: NotificationData): NotificationCompat.Builder {
        return NotificationCompat.Builder(App.instance, data.channelId)
            .setContentTitle(data.title)
            .setContentText(data.message)
            .setSmallIcon(R.drawable.ic_warning)
            .setPriority(NotificationCompat.PRIORITY_HIGH)
            .setDefaults(NotificationCompat.DEFAULT_ALL)
    }
}
```

```kotlin
// ãƒãƒ£ãƒƒãƒˆé€šçŸ¥ã®å®Ÿè£…

class ChatNotifier(private val sender: String, private val message: String) : BaseNotifier() {
    override fun buildNotificationData(): NotificationData {
        return NotificationData(
            title = "$sender ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
            message = message,
            channelId = "chat_channel"
        )
    }

    override fun createNotificationBuilder(data: NotificationData): NotificationCompat.Builder {
        return NotificationCompat.Builder(App.instance, data.channelId)
            .setContentTitle(data.title)
            .setContentText(data.message)
            .setSmallIcon(R.drawable.ic_chat)
            .setPriority(NotificationCompat.PRIORITY_HIGH)
    }
}
```

```kotlin
// å‘¼ã³å‡ºã—å´

val notifier: BaseNotifier = NormalNotifier()
notifier.notifyUser()

val important = ImportantNotifier()
important.notifyUser()

val chat = ChatNotifier("Alice", "ã‚„ã£ã»ãƒ¼ï¼")
chat.notifyUser()
```

