- [Command パターン](#command-パターン)
  - [役割](#役割)
  - [実装方法](#実装方法)
  - [使いどころ](#使いどころ)
    - [操作の Undo (取り消し) / Redo (再実行)](#操作の-undo-取り消し--redo-再実行)
    - [操作をキューに溜めて順番に処理](#操作をキューに溜めて順番に処理)


# Command パターン

## 役割

命令を統一的なクラスで表現することで、命令を履歴として保持したり、動的に組み替えたりします。


## 実装方法

```kotlin
// Commandインターフェース
interface Command {
    fun execute()
}

// Receiver
class Light {
    fun on() = println("ライトをつけた！")
    fun off() = println("ライトを消した！")
}

// ConcreteCommand
class LightOnCommand(private val light: Light) : Command {
    override fun execute() = light.on()
}

class LightOffCommand(private val light: Light) : Command {
    override fun execute() = light.off()
}

// Invoker
class RemoteControl {
    private var command: Command? = null

    fun setCommand(command: Command) {
        this.command = command
    }

    fun pressButton() {
        command?.execute()
    }
}

// Client
fun main() {
    val light = Light()
    val onCommand = LightOnCommand(light)
    val offCommand = LightOffCommand(light)

    val remote = RemoteControl()

    remote.setCommand(onCommand)
    remote.pressButton()  // -> ライトをつけた！

    remote.setCommand(offCommand)
    remote.pressButton()  // -> ライトを消した！
}
```


## 使いどころ

### 操作の Undo (取り消し) / Redo (再実行)

ペイントアプリなど、操作の取り消し／再実行の機能が必要なアプリで役に立ちます。


### 操作をキューに溜めて順番に処理

非同期やバッチ処理で役立つ


