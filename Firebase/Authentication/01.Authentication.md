- [Authentication](#authentication)
  - [ğŸ” ä¸»ãªèªè¨¼æ–¹æ³•](#-ä¸»ãªèªè¨¼æ–¹æ³•)
  - [ğŸ§© Firebase Authentication ã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ](#-firebase-authentication-ã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ)
  - [ä»–ã® Firebase ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®é€£æºä¾‹](#ä»–ã®-firebase-ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®é€£æºä¾‹)
    - [Firebase Firestore / Realtime Database ã¨ã®é€£æº](#firebase-firestore--realtime-database-ã¨ã®é€£æº)
    - [Firebase Cloud Storage ã¨ã®é€£æº](#firebase-cloud-storage-ã¨ã®é€£æº)
    - [Firebase Cloud Functions ã¨ã®é€£æº](#firebase-cloud-functions-ã¨ã®é€£æº)
    - [Firebase Analytics ã¨ã®é€£æº](#firebase-analytics-ã¨ã®é€£æº)
    - [Firebase Remote Config + Firebase Analytics ã¨ã®é€£æº](#firebase-remote-config--firebase-analytics-ã¨ã®é€£æº)
  - [å¼•ç”¨å…ƒè³‡æ–™](#å¼•ç”¨å…ƒè³‡æ–™)


# Authentication

Firebase Authentication ã¯ã€Google ãŒæä¾›ã—ã¦ã„ã‚‹èªè¨¼æ©Ÿèƒ½ã§ã€ã‚¢ãƒ—ãƒªã«ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã‚’ç°¡å˜ã«è¿½åŠ ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚


## ğŸ” ä¸»ãªèªè¨¼æ–¹æ³•

- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
- é›»è©±ç•ªå·èªè¨¼ï¼ˆSMSï¼‰
- ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³
  - Google
  - Facebook
  - Twitterï¼ˆXï¼‰
  - GitHub ãªã©
- åŒ¿åèªè¨¼ï¼ˆã‚²ã‚¹ãƒˆãƒ­ã‚°ã‚¤ãƒ³çš„ãªã‚‚ã®ï¼‰
- ã‚«ã‚¹ã‚¿ãƒ èªè¨¼ï¼ˆç‹¬è‡ªã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã®é€£æºï¼‰


## ğŸ§© Firebase Authentication ã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ

- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒå¼·å›ºï¼ˆ Google ãŒãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ç®¡ç†ï¼‰
- ä»–ã® Firebase ã‚µãƒ¼ãƒ“ã‚¹ã¨é€£æºãŒã‚¹ãƒ ãƒ¼ã‚º
- ãƒ­ã‚°ã‚¤ãƒ³ UI ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ï¼ˆ FirebaseUI ï¼‰


## ä»–ã® Firebase ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®é€£æºä¾‹

### Firebase Firestore / Realtime Database ã¨ã®é€£æº

- ç›®çš„: èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã€‚
- é€£æºã®ä¾‹:
  - ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆuidï¼‰ã‚’ã‚­ãƒ¼ã«ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿æ›¸ãã€‚
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã§ request.auth.uid ã‚’ä½¿ã„ã€æœ¬äººã®ã¿ãŒè‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†åˆ¶é™ã€‚


### Firebase Cloud Storage ã¨ã®é€£æº

- ç›®çš„: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ç”»åƒã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç®¡ç†ã€‚
- é€£æºã®ä¾‹:
  - uid ã‚’å«ã‚€ãƒ‘ã‚¹ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ï¼ˆä¾‹: users/{uid}/profile.jpgï¼‰ã€‚
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã§æœ¬äººã ã‘ãŒãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†åˆ¶å¾¡ã€‚


### Firebase Cloud Functions ã¨ã®é€£æº

- ç›®çš„: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å‡¦ç†ã‚’å®‰å…¨ã«è¡Œã†ã€‚
- é€£æºã®ä¾‹:
  - èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® `uid` ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰å–å¾—ã—ã€å‡¦ç†ã®ä¸­ã§æ¤œè¨¼ã€‚
  - ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆä¾‹: æŠ•ç¨¿ã€å‰Šé™¤ãªã©ï¼‰ã«å¿œã˜ã¦é€šçŸ¥é€ä¿¡ã‚„DBæ›´æ–°ã‚’è¡Œã†ã€‚

```kotlin
exports.processAction = functions.https.onCall((data, context) => {
    if (!context.auth) {
        throw new functions.https.HttpsError('unauthenticated', 'User must be authenticated');
    }
    const uid = context.auth.uid;
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åŸºã¥ãå‡¦ç†ã‚’è¡Œã†
});
```


### Firebase Analytics ã¨ã®é€£æº

- ç›®çš„: èªè¨¼çŠ¶æ…‹ã«å¿œã˜ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•ã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã€‚
- é€£æºã®ä¾‹:
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚„ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å±æ€§ï¼ˆä¾‹ : èª²é‡‘ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã‚’ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦è¨˜éŒ²ã€‚

```kotlin
Firebase.analytics.setUserId(Firebase.auth.currentUser?.uid)
Firebase.analytics.logEvent("login_success", null)
```


### Firebase Remote Config + Firebase Analytics ã¨ã®é€£æº

- ç›®çš„: ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¿œã˜ã¦ UI ã‚„æ©Ÿèƒ½ã‚’å‹•çš„ã«å¤‰æ›´ã€‚
- é€£æºã®ä¾‹:
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ³ã‚„å±æ€§ã«å¿œã˜ã¦è¨­å®šå€¤ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ï¼ˆä¾‹: ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ãƒ™ãƒ¼ã‚¿æ©Ÿèƒ½æœ‰åŠ¹ï¼‰ã€‚

```kotlin
val remoteConfig = Firebase.remoteConfig
remoteConfig.fetchAndActivate().addOnCompleteListener { task ->
    if (task.isSuccessful) {
        val showFeature = remoteConfig.getBoolean("show_new_feature")
        if (showFeature) {
            // æ–°æ©Ÿèƒ½ã‚’è¡¨ç¤º
            showNewFeatureUI()
        } else {
            // æ—§UIã®ã¾ã¾
            showOldFeatureUI()
        }
    }
}
```

ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€ Firebase Authentication ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã›ã‚“ãŒã€ãã®èƒŒå¾Œã§ã¯ã€æ¬¡ã®ã‚ˆã†ãªä»•çµ„ã¿ã§ã€ Authentication ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã¾ãšã€ Authentication ã‚’åˆ¤å®šã«ä½¿ç”¨ã—ã¦ã€ Firebase Analytics ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã—ã¾ã™ã€‚

```kotlin
if (Firebase.auth.currentUser != null) {
    Firebase.analytics.setUserProperty("is_logged_in", "true")
} else {
    Firebase.analytics.setUserProperty("is_logged_in", "false")
}
```

Analytics ã§è¨­å®šã—ãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ ( `is_logged_in` ) ã¯ã€ Remote Config ã®ã€Œæ¡ä»¶ã€ã¨ã—ã¦ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

<img src="./ç”»åƒ/ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£.png" width="300">

`is_logged_in` ã®çŠ¶æ…‹ã«ã‚ˆã£ã¦ã€ `show_new_feature` ã§è¿”ã™å€¤ã‚’å¤‰æ›´ã™ã‚‹ã‚ˆã†ã«ã€ Remote Config ã‚’è¨­å®šã—ã¾ã™ã€‚


## å¼•ç”¨å…ƒè³‡æ–™

- ChatGPT



