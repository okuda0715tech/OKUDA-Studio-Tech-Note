- [条件とループ](#条件とループ)
  - [if 文](#if-文)
  - [when 文](#when-文)
    - [基本形](#基本形)
    - [文として使用する場合は、 else 文は不要](#文として使用する場合は-else-文は不要)
    - [式として使用する場合は、 else 文は基本的に必須](#式として使用する場合は-else-文は基本的に必須)
    - [複数の値で共通の処理を行う場合](#複数の値で共通の処理を行う場合)
    - [条件には式も記述可能](#条件には式も記述可能)
    - [条件では、「範囲内にあるか」「コレクションに含まれているか」も判定可能](#条件では範囲内にあるかコレクションに含まれているかも判定可能)
    - [条件で型チェックも可能](#条件で型チェックも可能)
    - [引数なし when 文で、 if - else if チェーンを模倣する](#引数なし-when-文で-if---else-if-チェーンを模倣する)
    - [サーバーリクエスト時に便利な when の利用方法](#サーバーリクエスト時に便利な-when-の利用方法)
  - [for ループ](#for-ループ)
  - [while ループ](#while-ループ)
  - [ループ内での break と continue](#ループ内での-break-と-continue)
  - [引用元](#引用元)


# 条件とループ

## if 文
## when 文

### 基本形

when は複数の分岐を持つ条件式を定義します。単純な形式は次のようになります。

```kotlin
when (x) {
    1 -> print("x == 1")
    2 -> print("x == 2")
    else -> {
        print("x is neither 1 nor 2")
    }
}
```

when は、いずれかの条件にマッチするまで、引数をすべての分岐と順番に照合します。

when は、式としても文としても使用できます。

- 式 ( expression ) として使用した場合
  - when は、値を返します。
  - 分岐条件が、すべてのケースを網羅する必要があります。
- 文 ( statement ) として使用した場合
  - when は、値を返しません。
  - 分岐条件が、すべてのケースを網羅する必要はありません。

if と同様に、各分岐はブロックになることができ、その場合は、ブロック内の最後の式の値を返すことができます。


### 文として使用する場合は、 else 文は不要

以下の場合、 when は、文として使用されているため、すべてのケースを網羅する必要はありません。

```kotlin
val x = 3
when (x) {
    // Not all cases are covered
    1 -> print("x == 1")
    2 -> print("x == 2")
}
```


### 式として使用する場合は、 else 文は基本的に必須

when が式として使用された場合、コンパイラがすべての可能なケースが分岐条件でカバーされていることを証明できない限り、else 分岐は必須です。たとえば、enum クラス エントリとシールされたクラス サブタイプの場合は、全ての分岐がカバーされていることが証明されるため、 else 文が不要になることがあります。

```kotlin
enum class Color {
    RED, GREEN, BLUE
}

val colorString = when (getColor()) {
    Color.RED -> "red"
    Color.GREEN -> "green"
    Color.BLUE -> "blue"
    // この場合は、全ての分岐が存在することが証明できるため、
    // else 文は不要です。
}

val colorString = when (getColor()) {
    Color.RED -> "red" // no branches for GREEN and BLUE
    else -> "not red" // 'else' is required
    // 全ての分岐が存在することが証明できない場合、あるいは、
    // 全ての分岐が存在しないことが明確である場合、
    // else 文が必要です。
}
```


### 複数の値で共通の処理を行う場合

複数のケースに共通の動作を定義するには、条件をコンマで区切って 1 行にまとめます。

```kotlin
when (x) {
    0, 1 -> print("x == 0 or x == 1")
    else -> print("otherwise")
}
```


### 条件には式も記述可能

判定条件の部分に、定数だけではなく、任意の式を使用できます。

```kotlin
when (x) {
    // 条件に任意の式を記述可能です。
    s.toInt() -> print("s encodes x")
    else -> print("s does not encode x")
}
```


### 条件では、「範囲内にあるか」「コレクションに含まれているか」も判定可能

値が Range やコレクションの範囲内 ( `in` ) にあるか、または範囲外 ( `!in` ) にあるかをチェックすることもできます。

```kotlin
when (x) {
    in 1..10 -> print("x is in the range")
    in validNumbers -> print("x is valid")
    !in 10..20 -> print("x is outside the range")
    else -> print("none of the above")
}
```


### 条件で型チェックも可能

もう 1 つのオプションは、値が特定の型であるかどうかをチェックすることです。スマート キャストにより、追加のチェックなしで型のメソッドとプロパティにアクセスできることに注意してください。

```kotlin
fun hasPrefix(x: Any) = when(x) {
    // prefix で始まるかどうかの判定
    is String -> x.startsWith("prefix")
    else -> false
}
```


### 引数なし when 文で、 if - else if チェーンを模倣する

when は、 `if {} else if {}` チェーンの代わりとしても使用できます。

when 文の引数が指定されていない場合、分岐条件は単なるブール式となり、条件が true の場合に該当の分岐処理が実行されます。

```kotlin
when {
    x.isOdd() -> print("x is odd")
    y.isEven() -> print("y is even")
    else -> print("x+y is odd")
}
```


### サーバーリクエスト時に便利な when の利用方法

次の構文を使用することで、簡潔にサーバーリクエストを記述することが可能です。

when 式の引数内で、変数を定義することが可能です。

- この変数のスコープは、 when 文の本体内に限ります。
- when の引数名の前には val を付与する必要があります。
  - その場で定義することと、その場で初期化する必要があることを明確にするため？
- val のみ定義可能となっており、 var は定義不可です。

```kotlin
fun Request.getBody() =
    when (val response = executeRequest()) {
        is Success -> response.body
        is HttpError -> throw HttpException(response.status)
    }
```


## for ループ
## while ループ
## ループ内での break と continue



## 引用元

[Conditions and loops - 公式ドキュメント](https://kotlinlang.org/docs/control-flow.html)

