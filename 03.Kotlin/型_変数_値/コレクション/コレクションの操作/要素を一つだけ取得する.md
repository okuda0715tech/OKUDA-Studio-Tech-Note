- [要素を一つだけ取得する](#要素を一つだけ取得する)
  - [Set の並び順について](#set-の並び順について)
  - [要素の位置で取得する](#要素の位置で取得する)
    - [Set の要素を位置で取得する](#set-の要素を位置で取得する)
    - [Iterable オブジェクトの最初と最後の要素を取得する](#iterable-オブジェクトの最初と最後の要素を取得する)
  - [条件で取得する](#条件で取得する)
    - [first() 関数と last() 関数](#first-関数と-last-関数)
    - [例外の発生に備える](#例外の発生に備える)
    - [エイリアスの使用](#エイリアスの使用)
  - [セレクターを使用して取得する](#セレクターを使用して取得する)
    - [基本形](#基本形)
    - [例外に備える](#例外に備える)
  - [ランダムで取得する](#ランダムで取得する)
    - [基本形](#基本形-1)
    - [例外に備える](#例外に備える-1)
  - [要素の存在を確認する](#要素の存在を確認する)
    - [特定の要素が含まれているか確認する](#特定の要素が含まれているか確認する)
    - [指定した全ての要素が含まれているか確認する](#指定した全ての要素が含まれているか確認する)
    - [要素数が 0 か 0 以外かを確認する](#要素数が-0-か-0-以外かを確認する)


# 要素を一つだけ取得する

## Set の並び順について

List には要素のインデックスがありますが、 Set にはインデックスはありません。しかし、 Set のサブクラスでは、そのクラスごとに、ある種のインデックスを保持しています。例えば、 LinkedHashSet では、挿入順という形でインデックスを保持しています。また、 SortedSet では、自然並び順序という形でインデックスを保持しています。それ以外のサブクラスもあります。よって、 Set で要素の順番を取得する場合には、サブクラスが何であるかをわかっていないと予期していた結果と異なる結果になってしまうことがあるため、注意をしてください。


## 要素の位置で取得する

### Set の要素を位置で取得する

List の場合はインデックスで要素が取得できますが、 Set の場合はインデックスで要素を取得することができません。その代わりに、各サブクラスのソートによって保持されている順番で要素を取得することが可能です。

```kotlin
// 要素は挿入順でソートされます。
val numbers = linkedSetOf("one", "two", "three", "four", "five")
println(numbers.elementAt(3)) // four

// 要素は昇順でソートされます。
val numbersSortedSet = sortedSetOf("one", "two", "three", "four")
println(numbersSortedSet.elementAt(0)) // four
```

elementAt() 関数は、存在しない場所を指定して呼び出してしまうとエラーが発生してしまいます。それを避けるために、 `elementAtOrNull()` 関数と `elementAtOrElse()` 関数が用意されています。

```kotlin
val numbers = listOf("one", "two", "three", "four", "five")

// 存在しない位置が指定された場合は null を返します
println(numbers.elementAtOrNull(5))
// null

// ラムダ式の結果の型は、元の Iterable オブジェクトの要素と同じ型である必要があります。
println(numbers.elementAtOrElse(5) { index ->
    "The value for index $index is undefined"
})
// The value for index 5 is undefined
```


### Iterable オブジェクトの最初と最後の要素を取得する

Iterable オブジェクトには、最初と最後の要素を取得する特別な関数が用意されています。

```kotlin
val numbers = listOf("one", "two", "three", "four", "five")
println(numbers.first()) // one
println(numbers.last()) // five

val numbers = sortedSetOf("a", "c", "d", "b")
println(numbers.first()) // a
println(numbers.last()) // d
```


## 条件で取得する

### first() 関数と last() 関数

`first()` 関数と `last()` 関数は、引数に条件を指定することで、条件に一致した最初の要素を返します。 first() 関数は先頭から順番に判定を行い、 last() 関数は末尾から順番に判定を行います。

```kotlin
val numbers = listOf("one", "two", "three", "four", "five", "six")
println(numbers.first { it.length > 3 }) // three
println(numbers.last { it.startsWith("f") }) // five
```


### 例外の発生に備える

first() 関数と last() 関数は、条件に一致する要素が存在しなかった場合には、例外を投げます。それを防ぐには、 `firstOrNull()` 関数か `lastOrNull()` 関数を使用します。

```kotlin
val numbers = listOf("one", "two", "three", "four", "five", "six")
println(numbers.firstOrNull { it.length > 6 })
// null
```


### エイリアスの使用

`firstOrNull()` 関数には `find()` という別名のエイリアスが用意されています。 `lastOrNull()` 関数には `findLast()` という別名のエイリアスが用意されています。どちらも全く同じ処理であるため、ユースケースにより適切な名前を選ぶと良いでしょう。

```kotlin
val numbers = listOf(1, 2, 3, 4)
println(numbers.find { it % 2 == 0 }) // 2
println(numbers.findLast { it % 2 == 0 }) // 4
```


## セレクターを使用して取得する

### 基本形

要素を取得する前に値を変換する必要がある場合には、 `firstnotNullOf()` 関数が使用できます。この関数には以下の二つの機能があります。

- 関数を適用して、要素の値を変換します。
- 関数の結果が null ではない最初の値を返します。

```kotlin
val list = listOf<Any>(0, "true", false)
// Converts each element to string and returns the first one that has required length
val longEnough = list.firstNotNullOf { item -> item.toString().takeIf { it.length >= 4 } }
println(longEnough)
```


### 例外に備える

`firstNotNullOf()` 関数は、変換後の値が全て null の場合、 `NoSuchElementException` を投げます。それを防ぐには、 `firstNotNullOfOrNull()` 関数を使用します。これを使用すると例外の代わりに null を返します。

```kotlin
val list = listOf<Any>(0, "true", false)
// 要素を String 型に変換して、長さが 4 以上の要素を返します
val longEnough = list.firstNotNullOf { item ->
    item.toString().takeIf { it.length >= 4 }
}
println(longEnough) // true
```


## ランダムで取得する

### 基本形

`random()` 関数を呼び出すことで、ランダムで要素を一つ取得します。もし、乱数生成のアルゴリズムを独自のものにしたい場合には、 random() 関数の引数に、アルゴリズムを実装した Random オブジェクトを渡します。

```kotlin
val numbers = listOf(1, 2, 3, 4)
// 1 ～ 4 のどれかがランダムで返される
println(numbers.random())
```


### 例外に備える

random() 関数は、コレクションが空の場合に例外を投げます。これを防ぐには、 `randomOrNull()` 関数を使用します。そうすると例外の代わりに null を返します。


## 要素の存在を確認する

### 特定の要素が含まれているか確認する

`contains()` 関数を使用することで、引数に与えた要素がコレクションに含まれているかを確認することが可能です。含まれている場合は、 true を返します。関数の代わりに in オペレーターを使用することも可能です。

```kotlin
val numbers = listOf("one", "two", "three", "four", "five", "six")
println(numbers.contains("four")) // true
println("zero" in numbers) // false
```


### 指定した全ての要素が含まれているか確認する

`containsAll()` 関数は引数に与えたコレクション内の全ての要素が含まれている場合は true を返します。

```kotlin
val numbers = listOf("one", "two", "three", "four", "five", "six")

println(numbers.containsAll(listOf("four", "two"))) // true
println(numbers.containsAll(listOf("one", "zero"))) // false
```


### 要素数が 0 か 0 以外かを確認する



```kotlin
val numbers = listOf("one", "two", "three", "four", "five", "six")
println(numbers.isEmpty()) // false
println(numbers.isNotEmpty()) // true

val empty = emptyList<String>()
println(empty.isEmpty()) // true
println(empty.isNotEmpty()) // false
```

