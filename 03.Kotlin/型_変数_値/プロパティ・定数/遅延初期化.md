- [遅延初期化](#遅延初期化)
  - [lateinit](#lateinit)
    - [概要](#概要)
    - [サンプル](#サンプル)
  - [by lazy](#by-lazy)
    - [概要](#概要-1)
    - [サンプル](#サンプル-1)
  - [lateinit と by lazy の比較表](#lateinit-と-by-lazy-の比較表)


# 遅延初期化

## lateinit

### 概要

Null 非許容型のプロパティをコンストラクタ以外の場所で初期化することを目的とした機能です。

例えば、プロパティに依存関係注入を通じて初期化したい場合や、  
または、単体テストのセットアップ メソッドで初期化したい場合などがあります。


### サンプル

```kotlin
public class MyTest {
    lateinit var subject: TestSubject

    @SetUp fun setup() {
        subject = TestSubject()
    }

    @Test fun test() {
        subject.method()  // dereference directly
    }
}
```


## by lazy

### 概要

`by lazy` は、プロパティへの初回アクセス時に、定義した初期化処理が実行されます。


### サンプル

```kotlin
class ByLazySample {
    // String 型の場合
    val text: String by lazy {
        "initialized by lazy"
    }

    // Int 型の場合
    val value: Int by lazyOf(1)
}
```


## lateinit と by lazy の比較表


| 違いの観点                               | lateinit       | by lazy        |
| :--------------------------------------- | :------------- | :------------- |
| 使用対象 ( val or var )                  | var のみ使用可 | val のみ使用可 |
| オプショナル型を取り扱うことが可能か     | 不可           | 可             |
| プリミティブ型を取り扱うことが可能か     | 不可           | 可             |
| 参照型を取り扱うことが可能か             | 可             | 可             |
| カスタムゲッターとセッターの定義が可能か | 不可           | 不可           |





