- [定数の定義](#定数の定義)
  - [概要](#概要)
  - [初期化のタイミング](#初期化のタイミング)
  - [const val の制限事項](#const-val-の制限事項)
    - [定義できる場所](#定義できる場所)
    - [宣言時の初期化が必須](#宣言時の初期化が必須)
    - [扱える型](#扱える型)
    - [カスタムゲッターを持っていないこと](#カスタムゲッターを持っていないこと)
  - [基本形](#基本形)
  - [val と const val の違い](#val-と-const-val-の違い)
  - [const val プロパティはアノテーションでも使用可能](#const-val-プロパティはアノテーションでも使用可能)


# 定数の定義

## 概要

定数を定義するには、 `const val` を使用します。


## 初期化のタイミング

`const val` で宣言された変数の初期化は、コンパイル時に実施されます。

トップレベルの変数だけでなく、 object のメンバーや companion object のメンバーとして定義された const val も、同様に、コンパイル時に初期化が行われます。


## const val の制限事項

### 定義できる場所

`const val` を定義できるのは、以下のいずれかの場合のみです。

- パッケージレベル ( `.kt` ファイル直下の) プロパティである場合
- object 宣言のメンバーである場合
- companion object のメンバーである場合


### 宣言時の初期化が必須

const プロパティは、宣言と同時に初期化が必須となっています。


### 扱える型

const プロパティは、 String 型、もしくは、プリミティブ型のみ扱うことが可能です。

Kotlin では、関数もオブジェクトとみなされますが、 const val で、関数型の変数を定義することはできません。関数型のイミュータブルな変数を定義したい場合は、 const val ではなく、 val で宣言してください。


### カスタムゲッターを持っていないこと

`const val` で定義したプロパティは、カスタムゲッターを定義することはできません。


## 基本形

**MathConstants.kt**

```kotlin
package com.example.math

const val PI = 3.14
```

**Main.kt**

```kotlin
import com.example.math.PI

fun main() {
    println("円周率は $PI だよ")
}
```

**Main.java**

```java
import com.example.math.MathConstants

public static void main() {
    println("円周率は " + MathConstants.PI + " だよ")
}
```


## val と const val の違い

`val` とした場合、 Kotlin は内部で getter メソッドを生成します。

Kotlin のコードからアクセスするときはどちらの場合も違いはないのですが、  
Java のコードからアクセスするときに明らかな違いが発生します。

```kotlin
// Java から見ても Kotlin から見ても PI という定数
const val PI = 3.14
// Java から見ると getPI() というメソッドになる
val PI = 3.14
```

定数に `const` を付与すると、 Java でも定数として認識しやすくなるため、 `const` を付与した方が良いでしょう。


## const val プロパティはアノテーションでも使用可能

const val プロパティはアノテーションでも使用することが可能です。

```kotlin
const val SUBSYSTEM_DEPRECATED: String = "This subsystem is deprecated"

@Deprecated(SUBSYSTEM_DEPRECATED) fun foo() { ... }
```




