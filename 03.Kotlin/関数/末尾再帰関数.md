- [末尾再帰関数](#末尾再帰関数)
  - [概要](#概要)
  - [末尾再帰関数を利用するための要件](#末尾再帰関数を利用するための要件)
  - [サンプル](#サンプル)
  - [参考](#参考)


# 末尾再帰関数

## 概要

通常ループを使用する一部のアルゴリズムでは、スタックオーバーフローが発生するリスクがあります。  
しかし、再帰関数を使用することで、そのリスク負うことなく実装することが可能になります。

どういう原理でスタックオーバーフローが発生しなくなるのかは、公式ドキュメントに記載がなかったため不明です...。


## 末尾再帰関数を利用するための要件

- 関数の最後で自分自身の関数を呼び出すか、引数で渡された値をそのまま返していること


## サンプル

**再帰関数を使用した場合**

```kotlin
tailrec fun findFixPoint(x: Double = 1.0): Double {
    if (Math.abs(x - Math.cos(x)) < eps) {
        return x
    } else {
        return findFixPoint(Math.cos(x))
    }
}
```

**再帰関数を使用しなかった場合**

```kotlin
val eps = 1E-10 // "good enough", could be 10^-15

private fun findFixPoint(): Double {
    var x = 1.0
    while (true) {
        val y = Math.cos(x)
        if (Math.abs(x - y) < eps) return x
        x = Math.cos(x)
    }
}
```


## 参考

[末尾再帰関数 - 公式ドキュメント](https://kotlinlang.org/docs/functions.html#tail-recursive-functions)





