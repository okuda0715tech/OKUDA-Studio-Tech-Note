- [infix (中置記法)](#infix-中置記法)
  - [概要](#概要)
  - [中置記法を利用するための要件](#中置記法を利用するための要件)
  - [基本形](#基本形)
  - [中置関数の実行優先順位](#中置関数の実行優先順位)
    - [中置演算子の優先順位が低くなる場合](#中置演算子の優先順位が低くなる場合)
    - [優先順位が低くなる例](#優先順位が低くなる例)
    - [中置演算子の優先順位が高くなる場合](#中置演算子の優先順位が高くなる場合)
    - [優先順位が低くなる例](#優先順位が低くなる例-1)


# infix (中置記法)

## 概要

infix 修飾子を付与した関数は、中置記法 (呼び出しのドットと括弧を省略) を使用して呼び出すこともできるようになります。


## 中置記法を利用するための要件

中置記法を利用するためには、以下の要件を全て満たす必要があります。

- メンバー関数、または、拡張関数であること
- レシーバーが必ず指定されていること
  - 自分自身がレシーバーの場合は必ず `this` を記述すること
- 引数は一つだけ必ず存在していること
- 引数は可変長引数 (vararg) ではないこと
- 引数にはデフォルト値が定義されていないこと


## 基本形

```kotlin
// 関数定義
// infix が必要です。
infix fun Int.shl(x: Int): Int { ... }

// 中置記法による呼び出し
1 shl 2

// 通常の呼び出しも可能
1.shl(2)
```


## 中置関数の実行優先順位

### 中置演算子の優先順位が低くなる場合

中置演算子は、以下の処理よりも優先順位が低くなります。

- 算術演算子 ( `+` , `-` など)
- 型キャスト演算子 ( `as` )
- rangeTo 演算子 ( `..` )


### 優先順位が低くなる例

以下の表の左右は同じ処理順序となります。

| 優先順位指定なし      | 優先順位指定あり        |
| --------------------- | ----------------------- |
| 1 shl 2 + 3           | 1 shl (2 + 3)           |
| 0 until n * 2         | 0 until (n * 2)         |
| xs union ys as Set<*> | xs union (ys as Set<*>) |


### 中置演算子の優先順位が高くなる場合

中置演算子は、以下の処理よりも優先順位が高くなります。

- ブール演算子 ( `&&` , `||` など)
- 型チェック演算子 ( `is` ) 
- 包含チェック演算子 ( `in` )


### 優先順位が低くなる例

以下の表の左右は同じ処理順序となります。

| 優先順位指定なし | 優先順位指定あり |
| ---------------- | ---------------- |
| a && b xor c     | a && (b xor c)   |
| a xor b in c     | (a xor b) in c   |




