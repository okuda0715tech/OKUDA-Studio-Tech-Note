- [可変長引数の関数](#可変長引数の関数)


# 可変長引数の関数

## 概要

関数の引数に `vararg` 修飾子を使用することで、可変長引数を定義することができます。

可変長引数の実態は配列です。

配列は、要素が参照型なら `Array<T>` 型、プリミティブ型なら `IntArray` 型などが使用されます。

通常、可変長引数は、最後の引数に指定します。

`vararg` 修飾子が使用できるのは、一つの関数につき、一つまでです。


## 基本形

```kotlin
// String 型を任意の数だけ引数にとる関数
// 【注意】
// Array<String> を引数にとるわけではない
fun foo(vararg strings: String) { /*...*/ }

// String 型を複数渡して関数を呼び出し ( OK )
foo("a", "b")
// Array<String> を渡して関数を呼び出し ( NG )
foo(arrayOf("a", "b"))
```

上記の例の通り、 `Array` 型を引数に渡して関数を呼び出すと型チェックでエラーとなってしまいます。  

コンパイラは、引数に渡されてくる型に、配列の要素の型を期待していますが、  
配列そのものを渡してしまっているためです。


## Array を引数に渡す方法 1 ( spread operator )

Array を引数に渡す方法として、 **spread operator ( * )** を使用する方法があります。  
spread operator は、配列を要素ごとに分割して、関数の引数に渡してくれます。

```kotlin
// 関数
fun foo(vararg strings: String) { /*...*/ }

// Array<String> の配列
val a = arrayOf("a", "b")
foo(*a) // foo("a", "b") と同じ
```


### 【注意点】プリミティブ型の配列の場合は参照型に変換する

`intArrayOf()` 関数は、 `IntArray` 型の配列を生成します。  
公式ではこの型をプリミティブ型と読んでいます。

プリミティブ型の配列には、 spread operator を付与することができません。  
そのため、 `toTypedArray()` 関数を使用して、参照型 ( `Array<T>` ) に変換してから spread operator を付与します。

```kotlin
val a = intArrayOf(1, 2, 3)
val list = listOf(-1, 0, *a.toTypedArray(), 4)
```

`*a.toTypedArray()` は、 `*(a.toTypedArray())` と同じ意味であり、  
参照型に変換してから spread operator を適用しています。


## Array を引数に渡す方法 2 (名前付き引数)

Array を引数に渡す方法として、名前付き引数を使用する方法があります。  
名前付き引数を使用することで、コンパイラは、引数に渡されてくる型に、 Array 型を期待するようになります。

```kotlin
// 関数
fun foo(vararg strings: String) { /*...*/ }

// Array<String> の配列
val a = arrayOf("a", "b")
foo(strings = a)
```



