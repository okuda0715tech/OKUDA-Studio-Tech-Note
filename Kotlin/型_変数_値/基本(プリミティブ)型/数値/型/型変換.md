- [型変換](#型変換)
  - [数値型同士の型変換](#数値型同士の型変換)
    - [概要](#概要)
    - [型変換の方法](#型変換の方法)
    - [as を使用したキャストは不可](#as-を使用したキャストは不可)
    - [演算処理では自動的に適切な型に変換される](#演算処理では自動的に適切な型に変換される)
  - [文字列型の数値を数値型に変換する](#文字列型の数値を数値型に変換する)
  - [変換に失敗する可能性がある場合は toXxxOrNull() メソッドが用意されています。](#変換に失敗する可能性がある場合は-toxxxornull-メソッドが用意されています)


# 型変換

## 数値型同士の型変換

### 概要

型が異なる数値型のプロパティを代入する場合には、  
明示的に型変換を行う必要があります。

Kotlin では、 `Int` 型のプロパティを `Int` 型のまま  
`Long` 型のプロパティに代入するようなことはできません。  
( Java のプリミティブ型の場合は `int` から `long` への代入ができました。)

```kotlin
// OK
val i: Int = 1
// NG
val l: Long = i
```


### 型変換の方法

数値型同士の型変換が必要な場合には、  
必ず `toXXX()` メソッドを使用して明示的な型変換が必要になります。  
( Kotlin では、暗黙的な型変換は行われません。)

例えば、 `Int` 型を `Double` 型に変換するには、以下のようにします。

```Kotlin
val int: Int = 1
val double: Double = int.toDouble()
```


### as を使用したキャストは不可

また、 `as` を使用した以下のようなキャストは、  
実行時エラー ( `ClassCastException` ) になってしまうため使用できません。

```Kotlin
val int: Int = 1
val double: Double = int as Double
```


### 演算処理では自動的に適切な型に変換される

数値演算時には、適切な型変換が実施されます。  
例えば、次のように型変換が実施されます。

```kotlin
// Long + Int は Int が Long 型に変換されてから
// 演算が行われます。
val l = 1L + 3
```


## 文字列型の数値を数値型に変換する

文字列が数値ならば、 `toXXX()` メソッドで変換が可能です。

```Kotlin
val s: String = "-123"
val i: Int = s.toInt() // -123
```

もし、文字列が小数の場合は、 `toDouble()` などの小数へ変換してください。  
そうしないと `NumberFormatException` が発生します。


## 変換に失敗する可能性がある場合は toXxxOrNull() メソッドが用意されています。

```Kotlin
val a = "123.5"
val b: Int? = a.toIntOrNull()   // null

// エルビス演算子で失敗時のデフォルト値を設定可能
val a = "123.5"
val b = a.toIntOrNull() ?: 0   // 結果が null になれば代わりに 0 を代入
```




