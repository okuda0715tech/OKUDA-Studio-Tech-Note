- [A/B Testing](#ab-testing)
  - [Remote Config と組み合わせた例](#remote-config-と組み合わせた例)
  - [Firebase Cloud Messaging と組み合わせる](#firebase-cloud-messaging-と組み合わせる)
  - [ゴールには Analytics のカスタムイベントを設定可能](#ゴールには-analytics-のカスタムイベントを設定可能)
    - [カスタムイベントの送信](#カスタムイベントの送信)
    - [A/B Testing の設定](#ab-testing-の設定)
    - [テスト設定](#テスト設定)
  - [引用元資料](#引用元資料)


# A/B Testing

A/B Testing は、 Remote Config や Firebase Cloud Messaging と組み合わせて使用します。

A or B の 2 パターン ( 3 パターン以上も可能) の値をランダムにユーザーに配信します。あらかじめ設定した指標に基づいて、どちらのパラメータが良い結果につながったのかを自動的に判定し、判定後は、良い結果につながったパラメータを全ユーザーに配信します。


## Remote Config と組み合わせた例

- Remote Config でパラメータ A と B を設定
  - 通常、Remote Config を使って、アプリの挙動や UI を変更できるパラメータを作成します（例えば「通知タイトル」「UI の色」「新機能のオン/オフ」など）。
- A/B Testing の機能で、配信割合を決定
  - Firebase A/B Testing を使って、ユーザーをランダムに A と B の 2 つのグループに分け、それぞれに異なるパラメータを配信します。
  - 配信割合は、50%:50%、80%:20%、など自由に設定可能です。
- 一定期間経過後に、設定したゴールに対する結果を分析
  - 設定した「ゴール」（例：リテンション、アプリの利用回数、収益、クリック率など）を元に、どちらのパラメータがより良い結果を出しているかを Firebase が自動で分析します。
- 良い結果を出したパラメータを自動的に判定し、最適化
  - テストが終了すると、Firebase A/B Testing が 勝者パラメータ（効果が良かったもの）を選定し、残りのユーザーにもその設定を自動的に適用します。


## Firebase Cloud Messaging と組み合わせる

Firebase Cloud Messaging と組み合わせる場合は、プッシュ通知のタイトルや本文に、様々なバリエーション ( A/B ) を設定します。どちらのバリエーションの場合に、ユーザーがより高い確率で、その通知をクリックしたかや、アプリを起動したかなど、を自動的に判定して、良い結果になった通知を全ユーザーに反映します。


## ゴールには Analytics のカスタムイベントを設定可能

A/B Testing のゴールには、 Analytics のカスタムイベントを指定して、そのイベントを多く送信した方が勝ちとすることができます。


### カスタムイベントの送信

まず、アプリ内でカスタムイベントを送信します。例えば、ユーザーが特定のボタンをクリックしたときにカスタムイベントを送信する場合、以下のように設定します。

```kotlin
FirebaseAnalytics.getInstance(context).logEvent("button_click", null)
```

ここでは、 button_click というカスタムイベントを送信しています。


### A/B Testing の設定

- Firebase Console の A/B Testing で、ゴールを設定する際に Analytics イベント を選択します。
- ゴールとして、送信した カスタムイベント（例えば、button_click）を選ぶことができます。


### テスト設定

- A/B Testing のテストを設定する際に、バリアント（A、B、Cなど）に異なるパラメータ（例：通知タイトルやボタンの色）を設定し、それぞれのグループに異なる設定を配信します。
- その後、A/B Testing は 指定したカスタムイベントがどれだけ発生したかを計測し、その回数が多かったパラメータを勝者と見なします。


## 引用元資料

- ChatGPT



