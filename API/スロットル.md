<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [スロットル](#スロットル)
  - [スロットルとは](#スロットルとは)
  - [リーキー・バケット・アルゴリズムの例](#リーキーバケットアルゴリズムの例)
<!-- TOC END -->


# スロットル

## スロットルとは

Web API を正常に使用するには、スロットルを理解する必要があります。  
スロットルとは、一定時間内に送信できるリクエスト数を制限する仕組みのことです。  
スロットルは、リクエストがサーバーに殺到するのを防ぎ、認証されたすべての開発者が確実に  
サーバーにアクセスできるようにするものです。

リクエスト数が上限に達して、リクエストが処理されないことを 「スロットル (処理) される」 や  
「スロットル (処理) する」 と言います。


## リーキー・バケット・アルゴリズムの例

このアルゴリズムは、下部にあいた穴から一定速度で水が流れ出すバケツの例えに基づいています。  
断続的にバケツに水を追加することができますが、あまりにも多くの水を一度に加えたり、  
速すぎる平均速度で水を加えたりした場合、水がバケツの容量を超えてしまいます。

水はリクエストを表しています。  
バケツの大きさは、一度に行うことができるリクエストの最大数を表します。  
バケツの穴の大きさは、新しいリクエストが受付可能になる速度を表しています。  
バケツの水のあふれは、リクエストが正しく処理されなかったこと表しています。

専門用語では、以下のように言います。

- ある時点のバケツの空き容量 = **リクエストクォータ**
- バケツの大きさ = **最大リクエストクォータ (バーストレート)**
- バケツの穴の大きさ = **回復レート (リカバリーレート)**
- バケツの上部からの水のあふれ = **スロットル**
