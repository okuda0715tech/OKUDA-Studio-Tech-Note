<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [小数](#小数)
	- [小数点以下を切り上げ （ `ceil` メソッドを使用）](#小数点以下を切り上げ--ceil-メソッドを使用)
	- [小数点以下を切り捨て （ `floor` メソッドを使用）](#小数点以下を切り捨て--floor-メソッドを使用)
	- [小数第一位を四捨五入する （ `round` メソッドを使用）](#小数第一位を四捨五入する--round-メソッドを使用)
	- [小数第二位以下を切り上げ、切り捨て、四捨五入する （ `setScale` メソッドを使用）](#小数第二位以下を切り上げ切り捨て四捨五入する--setscale-メソッドを使用)
	- [`string.format` を使用した四捨五入（小数点以下の桁数指定が可能）](#stringformat-を使用した四捨五入小数点以下の桁数指定が可能)
	- [double 型 float 型の値を `(int)` で int 型にキャストする場合](#double-型-float-型の値を-int-で-int-型にキャストする場合)
	- [int型同士の割り算結果が小数になる場合](#int型同士の割り算結果が小数になる場合)
<!-- TOC END -->


# 小数

## 小数点以下を切り上げ （ `ceil` メソッドを使用）

`Math.ceil()`メソッドを使用する。

```Java
Math.ceil(10.4D); // 11.0
Math.ceil(-10.6D); // -10.0
```

マイナスの値を切り上げると、正の値の方向に一番近い整数になる。
返り値は`double型`である。

**注意**
引数は`double型`である必要がある。


## 小数点以下を切り捨て （ `floor` メソッドを使用）

`Math.floor()`メソッドを使用する。

```Java
Math.floor(10.6D); // 10.0
Math.floor(-10.4D); // -11.0
```

マイナスの値を切り捨てると、負の値の方向に一番近い整数になる。
返り値は`double型`である。

**注意**
引数は`double型`である必要がある。


## 小数第一位を四捨五入する （ `round` メソッドを使用）

`Math.round()`メソッドを使用する。

```Java
Math.round(10.5D); // 11.0
Math.round(10.49D); // 10.0
Math.round(-10.5D); // -10.0
Math.round(-10.51D); // -11.0
```

マイナスの値を四捨五入する場合は、整数と整数の中央値は正の値の方向に一番近い整数になる。
引数は `double型` のものと `float型` のものがある。
返り値は、引数が `double型` なら `double型` となり、引数が `float型` なら `float型` である。


## 小数第二位以下を切り上げ、切り捨て、四捨五入する （ `setScale` メソッドを使用）

`BigDecimal` のインスタンスメソッド `setScale()` を使用します。
`第一引数`には、処理後の小数の桁数を指定します。
`第二引数`には、処理の仕方を指定します。詳細は下記の表を参照。

```Java
double val = 42.195;

//元データをBigDecimal型にする
BigDecimal bd = new BigDecimal(val);

//四捨五入する
BigDecimal bd1 = bd.setScale(0, BigDecimal.ROUND_HALF_UP);  //小数第１位を四捨五入
BigDecimal bd2 = bd.setScale(1, BigDecimal.ROUND_HALF_UP);  //小数第２位を四捨五入

//切り捨てする
BigDecimal bd3 = bd.setScale(0, BigDecimal.ROUND_DOWN);  //小数第１位を切捨て
BigDecimal bd4 = bd.setScale(1, BigDecimal.ROUND_DOWN);  //小数第２位を切捨て

//切り上げする
BigDecimal bd5 = bd.setScale(0, BigDecimal.ROUND_UP);  //小数第１位を切上げ
BigDecimal bd6 = bd.setScale(1, BigDecimal.ROUND_UP);  //小数第２位を切上げ

//画面表示
System.out.println("小数第１位を四捨五入:" + bd1.doubleValue());
System.out.println("小数第２位を四捨五入:" + bd2.doubleValue());

System.out.println("小数第１位を切捨て:" + bd3.doubleValue());
System.out.println("小数第２位を切捨て:" + bd4.doubleValue());

System.out.println("小数第１位を切上げ:" + bd5.doubleValue());
System.out.println("小数第２位を切上げ:" + bd6.doubleValue());
```

パラメータ        | 処理方法                       | 例
------------------|--------------------------------|---------------------------------------------------
ROUND_CEILING     | 切り上げ(マイナスは正に寄せる) | 42.1→43.0、-42.1→-42.0
ROUND_UP          | 切り上げ(マイナスは負に寄せる) | 42.1→43.0、-42.1→-43.0
ROUND_FLOOR       | 切り捨て(マイナスは負に寄せる) | 42.1→42.0、-42.1→-43.0
ROUND_DOWN        | 切り捨て(マイナスは正に寄せる) | 42.1→42.0、-42.1→-42.0
ROUND_HALF_UP     | 四捨五入                       | 42.4→42.0、42.5→43.0、<br>-42.4→-42.0、-42.5→-43.0
ROUND_HALF_DOWN   | 五捨六入                       | 42.5→42.0、42.6→43.0、<br>-42.5→-42.0、-42.6→-43.0
ROUND_UNNECESSARY | 丸め処理を行わない             |

**四捨五入と五捨六入のマイナスの取り扱い**

ROUND_HALF_UP・・・中央値は切り上げる。絶対値が中央値以上なら大きい整数に寄せて、中央値未満なら小さい整数に寄せる。
ROUND_HALF_DOWN・・・中央値は切り捨てる。絶対値が中央値以下なら小さい整数に寄せて、中央値より大きいなら大きい整数に寄せる。


## `string.format` を使用した四捨五入（小数点以下の桁数指定が可能）

```Java
String.format("%.1f", 21.8755)
```

`"%.1f"`の`1`の部分に、丸め後の小数点以下の桁数を指定します。


## double 型 float 型の値を `(int)` で int 型にキャストする場合

小数点以下は切り捨てられます。  
マイナスの小数の場合は、正の方向に一番近い整数になります。

`Math.floor()` メソッドも切り捨てを行いますが、負の値の場合は、 `floor()` メソッドと動作が異なります。  
`floor()` メソッドの場合は、負の方向に一番近い整数になります。

```Java
double b = 5.9;
int bb = (int)b; // 5
double a = -5.9;
int aa = (int)a; // -5
```

float型をint型に変換した場合も同様の結果となります。


## int型同士の割り算結果が小数になる場合

商が小数になる場合は、小数点以下が切り捨てられます。  
マイナスの小数の場合は、正の方向に一番近い整数になります。  
（つまり、正の小数でも、負の小数でも、 0 に寄せられるように丸められます）  
これは、浮動小数点型の値を `(int)` でint型にキャストする場合と同様の丸め方となります。

```Java
int a = 10;
int b = 3;
int c = a / b; // 3
int a = 11;
int b = 3;
int c = a / b; // 3

int a = -10;
int b = 3;
int c = a / b; // -3
int a = -11;
int b = 3;
int c = a / b; // -3
```
