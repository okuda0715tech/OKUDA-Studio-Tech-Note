<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [リフレクション](#リフレクション)
  - [リフレクションとは](#リフレクションとは)
  - [メリット](#メリット)
  - [デメリット](#デメリット)
  - [例](#例)
<!-- TOC END -->


# リフレクション

## リフレクションとは

クラスを動的に扱うことができる仕組みのことで、 Java 以外の言語でも多く採用されている仕組みである。


## メリット

動的にクラスを扱うことができる。


## デメリット

コンパイル時のエラーチェックが行われない。  
可読性が下がる。


## 例

次のコードは `java.lang.reflect` パッケージを使った Java 6 以降での例である。

`Foo` クラスの `method` メソッドを呼び出す例をリフレクション 「あり」 と 「なし」 で記述している。

```java
// リフレクションなし
Foo foo = new Foo();
foo.hello();
```

```java
// リフレクションあり
Class cl = Class.forName("Foo");
Method method = cl.getMethod("hello");
method.invoke(cl.newInstance());
```


## 注意点

### コード難読化ツール使用時は難読化の対象外に設定する

コード難読化ツールを使用する際は、難読化ツールによって、リフレクションを行っているクラス名やメソッド名が  
変更されてしまう可能性があります。変更されるとリフレクションを使用しているコードで実行時エラーが  
発生してしまうため、対象のクラス等の難読化を抑止する設定を行う必要があります。
