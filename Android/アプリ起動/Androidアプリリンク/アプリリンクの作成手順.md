<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [アプリリンクの作成手順](#アプリリンクの作成手順)
  - [Manifest ファイルに intent-filter を設置する](#manifest-ファイルに-intent-filter-を設置する)
  - [デジタル アセット リンク ファイルを作成する](#デジタル-アセット-リンク-ファイルを作成する)
<!-- TOC END -->


# アプリリンクの作成手順

## Manifest ファイルに intent-filter を設置する

```xml
<application>

    <activity
        android:name=".MainActivity">

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <!-- アプリリンク用の設定 -->
        <intent-filter android:autoVerify="true">
            <!-- Google 検索から？アプリに到達できるようにするために必要です -->
            <action android:name="android.intent.action.VIEW" />

            <!-- ブラウザからアプリに到達できるようにするために必要です -->
            <category android:name="android.intent.category.BROWSABLE" />
            <!-- DEFAULT を指定すると暗黙的 Intent に応答できるようになります。 -->
            <category android:name="android.intent.category.DEFAULT" />

            <!-- 以下で始まる URL を開いた場合にアクティビティを起動する -->
            <!-- "http://aaa.web.app”  -->
            <!-- "https://aaa.web.app”  -->
            <!-- "http://aaa.firebaseapp.com” -->
            <!-- "https://aaa.firebaseapp.com” -->
            <data android:scheme="http" />
            <data android:scheme="https" />
            <data android:host="aaa.web.app" />
            <data android:host="aaa.firebaseapp.com" />
        </intent-filter>

    </activity>

</application>
```


## デジタル アセット リンク ファイルを作成する

`assetlinks.json` ファイルを作成し、 `https://<yoursite>/.well-known/assetlinks.json`  
にアップロードします。

デジタル アセット リンク ファイルは暗号化された HTTPS プロトコルで検証されます。  
HTTP ではなく、 HTTPS 接続でアクセス可能である状態にしてください。

`assetlinks.json` ファイルのサンプルを以下に示します。

```json
[{
  "relation": ["delegate_permission/common.handle_all_urls"],
  "target": {
    "namespace": "android_app",
    "package_name": "com.example",
    "sha256_cert_fingerprints":
    ["14:6D:E9:83:C5:73:06:50:D8:EE:B9:95:2F:34:FC:64:16:A0:83:42:E6:1D:BE:A8:8A:04:96:B2:3F:CF:44:E5"]
  }
}]
```

`"package_name"` 属性には、アプリの **アプリケーション ID** を設定します。

Android アプリケーションでは、たいていの場合は、 **パッケージ名** と **アプリケーション ID**  
は同じですが、それぞれ独立したものになっているため、別々の名前にすることができます。

そのため、 `"package_name"` 属性に、間違って **パッケージ名** を設定しないように注意してください。
