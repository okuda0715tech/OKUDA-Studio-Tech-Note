- [アプリのインストール場所](#アプリのインストール場所)
  - [引用元資料](#引用元資料)


# アプリのインストール場所

API レベル 8 以降では、アプリケーションを外部ストレージ (デバイスの SD カードなど) にインストールできるようになりました。これは、android:installLocation マニフェスト属性を使用してアプリケーションに宣言できるオプションの機能です。この属性を宣言しないと、アプリケーションは内部ストレージにのみインストールされ、外部ストレージに移動することはできません。

システムがアプリケーションを外部ストレージにインストールできるようにするには、マニフェスト ファイルを変更して、<manifest> 要素に android:installLocation 属性を追加し、値を「preferExternal」または「auto」にします。例:

```xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    android:installLocation="preferExternal"
    ... >
```

「preferExternal」を宣言すると、アプリケーションを外部ストレージにインストールするように要求しますが、システムはアプリケーションが外部ストレージにインストールされることを保証しません。外部ストレージがいっぱいの場合、システムはアプリケーションを内部ストレージにインストールします。ユーザーは、アプリケーションを 2 つの場所間で移動することもできます。

「auto」を宣言すると、アプリケーションを外部ストレージにインストールできることを示しますが、インストール場所の優先順位はありません。システムは、いくつかの要因に基づいてアプリケーションをどこにインストールするかを決定します。ユーザーは、アプリケーションを 2 つの場所間で移動することもできます。

アプリケーションが外部ストレージにインストールされている場合:

- 外部ストレージがデバイスにマウントされている限り、アプリケーションのパフォーマンスには影響しません。

- .apk ファイルは外部ストレージに保存されますが、すべてのプライベート ユーザー データ、データベース、最適化された .dex ファイル、および抽出されたネイティブ コードは、デバイスの内部メモリに保存されます。

- アプリケーションが保存されている一意のコンテナーは、ランダムに生成されたキーで暗号化され、最初にインストールしたデバイスでのみ復号化できます。したがって、SD カードにインストールされたアプリケーションは 1 つのデバイスでのみ動作します。

- ユーザーはシステム設定を使用してアプリケーションを内部ストレージに移動できます。

**警告** : ユーザーが USB マスストレージを有効にしてコンピューターとファイルを共有したり、システム設定を使用して SD カードをアンマウントしたりすると、外部ストレージがデバイスからアンマウントされ、外部ストレージで実行されているすべてのアプリケーションが直ちに終了します。











## 引用元資料

- [アプリのインストール場所](https://developer.android.com/guide/topics/data/install-location)


