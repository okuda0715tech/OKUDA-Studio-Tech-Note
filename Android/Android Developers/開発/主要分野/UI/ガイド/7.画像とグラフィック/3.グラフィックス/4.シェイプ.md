- [Compose ã®ã‚·ã‚§ã‚¤ãƒ—](#compose-ã®ã‚·ã‚§ã‚¤ãƒ—)
  - [ãƒãƒªã‚´ãƒ³ã‚’ä½œæˆã™ã‚‹](#ãƒãƒªã‚´ãƒ³ã‚’ä½œæˆã™ã‚‹)
    - [ãƒãƒªã‚´ãƒ³ã®è§’ã‚’ä¸¸ãã™ã‚‹](#ãƒãƒªã‚´ãƒ³ã®è§’ã‚’ä¸¸ãã™ã‚‹)
      - [åŠå¾„ï¼ˆRadiusï¼‰](#åŠå¾„radius)
      - [ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°](#ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°)
    - [ã‚µã‚¤ã‚ºã¨ä½ç½®](#ã‚µã‚¤ã‚ºã¨ä½ç½®)
  - [å›³å½¢ã‚’å¤‰å½¢ã•ã›ã‚‹](#å›³å½¢ã‚’å¤‰å½¢ã•ã›ã‚‹)
  - [ãƒãƒªã‚´ãƒ³ã«æ²¿ã£ã¦åˆ‡ã‚ŠæŠœãã‚’è¡Œã†](#ãƒãƒªã‚´ãƒ³ã«æ²¿ã£ã¦åˆ‡ã‚ŠæŠœãã‚’è¡Œã†)
  - [ã‚¯ãƒªãƒƒã‚¯ã§å¤‰å½¢ãƒœã‚¿ãƒ³](#ã‚¯ãƒªãƒƒã‚¯ã§å¤‰å½¢ãƒœã‚¿ãƒ³)
  - [ç„¡é™ã«å¤‰åŒ–ã™ã‚‹å½¢çŠ¶ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã™ã‚‹](#ç„¡é™ã«å¤‰åŒ–ã™ã‚‹å½¢çŠ¶ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã™ã‚‹)
  - [ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªã‚´ãƒ³](#ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªã‚´ãƒ³)
  - [å‚è€ƒæƒ…å ±](#å‚è€ƒæƒ…å ±)


# Compose ã®ã‚·ã‚§ã‚¤ãƒ—

Compose ã§ã¯ã€ãƒãƒªã‚´ãƒ³ã‹ã‚‰ä½œæˆã•ã‚ŒãŸã‚·ã‚§ã‚¤ãƒ—ã‚’ä½œæˆã§ãã¾ã™ã€‚ãŸã¨ãˆã° æ¬¡ã®ã‚ˆã†ãªã‚·ã‚§ã‚¤ãƒ—ã‚’ä½œæˆã§ãã¾ã™ã€‚

<img src="./ç”»åƒ/ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ ã‚·ã‚§ã‚¤ãƒ— ãƒ©ã‚¤ãƒ–ãƒ©ãƒª ã‚’ä½¿ç”¨ã—ã¦ä½œæˆã§ãã‚‹ã•ã¾ã–ã¾ãªã‚·ã‚§ã‚¤ãƒ—ã®ä¾‹.png" width="300">


Compose ã§ã‚«ã‚¹ã‚¿ãƒ ã®ä¸¸ã¿ã‚’å¸¯ã³ãŸãƒãƒªã‚´ãƒ³ã‚’ä½œæˆã™ã‚‹ã«ã¯ã€app/build.gradle ã« [graphics-shapes](https://developer.android.com/jetpack/androidx/releases/graphics?_gl=1*d8j0jp*_up*MQ..*_ga*MTQ1NzI0ODE0NC4xNzI2NzI4Nzk2*_ga_6HH9YJMN9M*MTcyNjc5NzEyOS4yLjAuMTcyNjc5NzEyOS4wLjAuMTkzNTEzODc4Mw..) ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```
implementation "androidx.graphics:graphics-shapes:1.0.0-rc01"
```

ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒãƒªã‚´ãƒ³ã‹ã‚‰ã‚·ã‚§ã‚¤ãƒ—ã‚’ä½œæˆã§ãã¾ã™ã€‚å¤šè§’å½¢ã®ã‚·ã‚§ã‚¤ãƒ—ã«ã¯ç›´ç·šã®ã‚¨ãƒƒã‚¸ã¨é‹­è§’ã®ã¿ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã‚‰ã®ã‚·ã‚§ã‚¤ãƒ—ã§ã¯è§’ã‚’ä¸¸ãã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ç°¡å˜ã« 2 ã¤ã®ç•°ãªã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–“ã§ é©ç”¨ã§ãã¾ã™ã€‚ä»»æ„ã®å½¢çŠ¶ã§ã®ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚° (â€» 1 ) ã¯é›£ã—ãã€ è¨­è¨ˆæ™‚ã®å•é¡Œã§ã™ã€‚ã—ã‹ã—ã€ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã“ã‚Œã‚‰ã®é–“ã§ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ã™ã‚‹ã“ã¨ã§ã€ é¡ä¼¼ã—ãŸå¤šè§’å½¢ã®æ§‹é€ ã‚’æŒã¤è¤‡æ•°ã®å›³å½¢ã‚’æç”»ã—ã¾ã™ã€‚

(â€» 1 ) ã‚ã‚‹ç‰©ä½“ã‹ã‚‰åˆ¥ã®ç‰©ä½“ã¸ã¨è‡ªç„¶ã«å¤‰å½¢ã™ã‚‹æ˜ åƒã‚’ã¿ã›ã‚‹ã€‚

æ³¨: [graphics-shapes](https://developer.android.com/jetpack/androidx/releases/graphics?_gl=1*1wz84ao*_up*MQ..*_ga*MTQ1NzI0ODE0NC4xNzI2NzI4Nzk2*_ga_6HH9YJMN9M*MTcyNjc5NzEyOS4yLjAuMTcyNjc5NzEyOS4wLjAuMTkzNTEzODc4Mw..) ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€çµ„ã¿è¾¼ã¿ã® Compose ã‚·ã‚§ã‚¤ãƒ— ( [RoundedCornerShape](https://developer.android.com/reference/kotlin/androidx/compose/foundation/shape/RoundedCornerShape?_gl=1*1wz84ao*_up*MQ..*_ga*MTQ1NzI0ODE0NC4xNzI2NzI4Nzk2*_ga_6HH9YJMN9M*MTcyNjc5NzEyOS4yLjAuMTcyNjc5NzEyOS4wLjAuMTkzNTEzODc4Mw..) ãªã©) ã¨ã¯åˆ¥ã® [Shapes](https://developer.android.com/reference/kotlin/androidx/compose/ui/graphics/Shape?_gl=1*h3ncw3*_up*MQ..*_ga*MTQ1NzI0ODE0NC4xNzI2NzI4Nzk2*_ga_6HH9YJMN9M*MTcyNjc5NzEyOS4yLjAuMTcyNjc5NzEyOS4wLjAuMTkzNTEzODc4Mw..) ã‚»ãƒƒãƒˆã§ã™ã€‚graphics-shapes ã¯ã€Compose ã¾ãŸã¯ View ã‚·ã‚¹ãƒ†ãƒ ã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚graphics-shapes ã®ã‚·ã‚§ã‚¤ãƒ—ã¯ã€çµæœã®ã‚·ã‚§ã‚¤ãƒ—ã‚’ Path ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã™ã‚‹ã“ã¨ã§ Compose ã‚·ã‚§ã‚¤ãƒ—ã«å¤‰æ›ã§ãã¾ã™ (ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ä¾‹ã®ä¸€éƒ¨ã‚’å‚ç…§)ã€‚

æ³¨æ„: ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€ä»»æ„ã®ãƒ‘ã‚¹é–“ã®ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚° (å†ç”Ÿã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ä¸€æ™‚åœæ­¢ã‚¢ã‚¤ã‚³ãƒ³ã¸ã®ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ãªã©) ç”¨ã§ã¯ãªãã€ã“ã‚Œã‚‰ã®ãƒãƒªã‚´ãƒ³ ã‚·ã‚§ã‚¤ãƒ—é–“ã®ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ã®ã¿ã‚’ç›®çš„ã¨ã—ã¾ã™ã€‚ä»»æ„ã®ãƒ‘ã‚¹ã‚’ãã‚Œã‚‰ã®é–“ã§ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€ä»£ã‚ã‚Šã« [AnimatedVectorDrawables](https://developer.android.com/develop/ui/compose/animation/vectors?_gl=1*z5ntj6*_up*MQ..*_ga*MTQ1NzI0ODE0NC4xNzI2NzI4Nzk2*_ga_6HH9YJMN9M*MTcyNjc5NzEyOS4yLjAuMTcyNjc5NzEyOS4wLjAuMTkzNTEzODc4Mw..) ã‚’ä½¿ç”¨ã—ã€ [shapeshifter.design](https://shapeshifter.design/) ãªã©ã®ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ãƒ‘ã‚¹ ãƒã‚¤ãƒ³ãƒˆã‚’æ­£ã—ãé…ç½®ã—ã¦ãã ã•ã„ã€‚


## ãƒãƒªã‚´ãƒ³ã‚’ä½œæˆã™ã‚‹

æ¬¡ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã¯ã€æç”»é ˜åŸŸã®ä¸­å¤®ã« 6 ã¤ã®ãƒã‚¤ãƒ³ãƒˆã‚’æŒã¤åŸºæœ¬çš„ãªå¤šè§’å½¢ã‚·ã‚§ã‚¤ãƒ—ã‚’ä½œæˆã—ã¾ã™ã€‚

```kotlin
Box(
    modifier = Modifier
        .drawWithCache {
            val roundedPolygon = RoundedPolygon(
                // number of vertices (é ‚ç‚¹ã®æ•°)ã®ç•¥ã€‚
                numVertices = 6,
                // minDimension ã¯ã€ Canvas ã®å¹…ã¨é«˜ã•ã®å¤§ãã•ã®ã†ã¡å°ã•ã„æ–¹ã‚’è¡¨ã—ã¾ã™ã€‚
                radius = size.minDimension / 2,
                centerX = size.width / 2,
                centerY = size.height / 2
            )
            val roundedPolygonPath = roundedPolygon.toPath().asComposePath()
            onDrawBehind {
                drawPath(roundedPolygonPath, color = Color.Blue)
            }
        }
        .fillMaxSize()
)
```

<img src="./ç”»åƒ/æç”»é ˜åŸŸã®ä¸­å¤®ã«ã‚ã‚‹é’ã„å…­è§’å½¢.png" width="150">

ã“ã®ä¾‹ã§ã¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯è¦æ±‚ã•ã‚ŒãŸå›³å½¢ã‚’è¡¨ã™ã‚¸ã‚ªãƒ¡ãƒˆãƒª (å½¢çŠ¶ã€ã‚µã‚¤ã‚ºã€ä½ç½®ãªã©ã®ç·ç§°) ã‚’ä¿æŒã™ã‚‹ RoundedPolygon ã‚’ä½œæˆã—ã¾ã™ã€‚Compose ã‚¢ãƒ—ãƒªã§ãã®å›³å½¢ã‚’æç”»ã™ã‚‹ã«ã¯ã€ãã“ã‹ã‚‰ Path ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã—ã¦ã€Compose ãŒæç”»ã§ãã‚‹å½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚


### ãƒãƒªã‚´ãƒ³ã®è§’ã‚’ä¸¸ãã™ã‚‹

å¤šè§’å½¢ã®è§’ã‚’ä¸¸ã‚ã‚‹ã«ã¯ã€CornerRounding ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã¯ã€åŠå¾„ã¨ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ã® 2 ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå¿…è¦ã§ã™ã€‚å„ä¸¸ã„è§’ã¯ 1 ï½ 3 å€‹ã® 3 æ¬¡æ›²ç·šã§æ§‹æˆã•ã‚Œã€ãã®ä¸­å¿ƒã¯å††å¼§ã®å½¢çŠ¶ã‚’æŒã¡ã€2 ã¤ã®å´é¢ ( éš£ã‚Šåˆã‚ã›ã«ã‚ã‚‹ ) æ›²ç·šã¯å½¢çŠ¶ã®ç«¯ã‹ã‚‰ä¸­å¿ƒã®æ›²ç·šã«ç§»è¡Œã—ã¾ã™ã€‚


#### åŠå¾„ï¼ˆRadiusï¼‰

åŠå¾„ã¯ã€é ‚ç‚¹ã‚’ä¸¸ã‚ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹å††ã®åŠå¾„ã§ã™ã€‚

ãŸã¨ãˆã°ã€æ¬¡ã®è§’ä¸¸ä¸‰è§’å½¢ã«ã¤ã„ã¦è€ƒãˆã¾ã™ã€‚

<img src="./ç”»åƒ/è§’ãŒä¸¸ã„ä¸‰è§’å½¢.png" width="200">

åŠå¾„ ( Radius ) r ã¯ã€ä»¥ä¸‹ã®éƒ¨åˆ†ã®é•·ã•ã«ãªã‚Šã¾ã™ã€‚

<img src="./ç”»åƒ/è§’ã®åŠå¾„ r ã®å ´æ‰€.png" width="200">


#### ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°

ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ã¯â€‹â€‹ã€è§’ã®å††å½¢ã®ä¸¸ã¿éƒ¨åˆ†ã‹ã‚‰ã‚¨ãƒƒã‚¸ã«åˆ°é”ã™ã‚‹ã¾ã§ã«ã‹ã‹ã‚‹æ™‚é–“ã‚’æ±ºå®šã™ã‚‹ä¿‚æ•°ã§ã™ã€‚ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ä¿‚æ•°ãŒ 0 (ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ãªã—ã€CornerRounding ã®æ—¢å®šå€¤) ã®å ´åˆã€è§’ã¯å®Œå…¨ãªå††å½¢ã®è§’ã«ãªã‚Šã¾ã™ã€‚ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ä¿‚æ•°ãŒ 0 ä»¥å¤–ã®å ´åˆ (æœ€å¤§ 1.0)ã€è§’ã¯ 3 ã¤ã®åˆ¥ã€…ã®æ›²ç·šã§ä¸¸ã‚ã‚‰ã‚Œã¾ã™ã€‚ 1 ã«è¿‘ã¥ãã»ã©ã€å°–ã£ãŸæ„Ÿã˜ã«è¿‘ã¥ã„ã¦ã„ãã¾ã™ãŒã€é ‚ç‚¹ã®æ•°ãŒå¤šã„å¤šè§’å½¢ã«ãªã‚‹ã«ã¤ã‚Œã€ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ã®å·®ã¯ãªããªã£ã¦ã„ãã¾ã™ã€‚

æ¬¡ã®å›³ã¯ã€ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ä¿‚æ•°ãŒ 0 ã®ä¸‰è§’å½¢ã§ã™ã€‚å®Œå…¨ãªå††ã«ãªã£ã¦ã„ã¾ã™ã€‚

<img src="./ç”»åƒ/smoothing 0.png" width="600">

æ¬¡ã®å›³ã¯ã€ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ä¿‚æ•°ãŒ 0.75 ã®ä¸‰è§’å½¢ã§ã™ã€‚å®Œå…¨ãªå††ã§ã¯ãªãã€å°‘ã—å°–ã£ãŸæ„Ÿã˜ã«ãªã£ã¦ã„ã¾ã™ã€‚å°–ã£ãŸã¨ã„ã£ã¦ã‚‚ã€å›³å½¢ã®å¹…ã‚„é«˜ã•ãŒå¤‰ã‚ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ›²ç·šãŒå††ã®å†…å´ã‚’é€šã‚‹ã‚ˆã†ã«è§’ä¸¸ã‚’å½¢æˆã—ã¾ã™ã€‚

<img src="./ç”»åƒ/smoothing 0.75.png" width="600">

ãŸã¨ãˆã°ã€ä»¥ä¸‹ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã§ã€è§’ã®ä¸¸ã„ä¸‰è§’å½¢ã‚’æç”»ã—ã¾ã™ã€‚

```kotlin
Box(
    modifier = Modifier
        .drawWithCache {
            val roundedPolygon = RoundedPolygon(
                numVertices = 3,
                radius = size.minDimension / 2,
                centerX = size.width / 2,
                centerY = size.height / 2,
                rounding = CornerRounding(
                    size.minDimension / 10f,
                    smoothing = 0.1f
                )
            )
            val roundedPolygonPath = roundedPolygon.toPath().asComposePath()
            onDrawBehind {
                drawPath(roundedPolygonPath, color = Color.Black)
            }
        }
        .size(100.dp)
)
```

å·¦å´ã®å›³ã¯ã€ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ã‚’ 0 ã«è¨­å®šã—ãŸå ´åˆã§ã€å³å´ã®å›³ã¯ 1 ã«è¨­å®šã—ãŸå ´åˆã§ã™ã€‚

<img src="./ç”»åƒ/ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ä¿‚æ•°ã«ã‚ˆã‚‹å›³å½¢ã®æ¯”è¼ƒ.png" width="300">


### ã‚µã‚¤ã‚ºã¨ä½ç½®

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ä¸­å¿ƒ (0, 0) ã®å‘¨å›²ã«åŠå¾„ 1 ã®å›³å½¢ãŒä½œæˆã•ã‚Œã¾ã™ã€‚ã“ã®åŠå¾„ã¯ã€å›³å½¢ã®ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹å¤šè§’å½¢ã®ä¸­å¿ƒã¨å¤–å´ã®é ‚ç‚¹ã®é–“ã®è·é›¢ã‚’è¡¨ã—ã¾ã™ã€‚è§’ã‚’ä¸¸ã‚ã‚‹ã¨ã€ä¸¸ã‚ã‚‰ã‚ŒãŸè§’ãŒä¸¸ã‚ã‚‰ã‚Œã¦ã„ãªã„é ‚ç‚¹ã‚ˆã‚Šã‚‚ä¸­å¿ƒã«è¿‘ããªã‚‹ãŸã‚ã€å›³å½¢ãŒå°ã•ããªã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚å¤šè§’å½¢ã®ã‚µã‚¤ã‚ºã‚’å¤‰æ›´ã™ã‚‹ã«ã¯ã€åŠå¾„ã®å€¤ã‚’èª¿æ•´ã—ã¾ã™ã€‚ä½ç½®ã‚’èª¿æ•´ã™ã‚‹ã«ã¯ã€å¤šè§’å½¢ã® centerX ã¾ãŸã¯ centerY ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ã¾ãŸã¯ã€ [DrawScope#translate()](https://developer.android.com/reference/kotlin/androidx/compose/ui/graphics/drawscope/DrawScope?_gl=1*xnt0ss*_up*MQ..*_ga*MTQ1NzI0ODE0NC4xNzI2NzI4Nzk2*_ga_6HH9YJMN9M*MTcyNjc5NzEyOS4yLjAuMTcyNjc5NzEyOS4wLjAuMTkzNTEzODc4Mw..#(androidx.compose.ui.graphics.drawscope.DrawScope).translate(kotlin.Float,kotlin.Float,kotlin.Function1)) ãªã©ã®æ¨™æº–ã® DrawScope å¤‰æ›é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¤‰æ›ã—ã€ã‚µã‚¤ã‚ºã€ä½ç½®ã€å›è»¢ã‚’å¤‰æ›´ã—ã¾ã™ã€‚


## å›³å½¢ã‚’å¤‰å½¢ã•ã›ã‚‹

Morph ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€2 ã¤ã®å¤šè§’å½¢é–“ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡¨ã™æ–°ã—ã„å›³å½¢ã§ã™ã€‚2 ã¤ã®å›³å½¢ã‚’ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ã™ã‚‹ã«ã¯ã€2 ã¤ã® RoundedPolygon ã¨ã€ã“ã‚Œã‚‰ 2 ã¤ã®å›³å½¢ã‚’å–å¾—ã™ã‚‹ Morph ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚é–‹å§‹å›³å½¢ã¨çµ‚äº†å›³å½¢é–“ã®å›³å½¢ã‚’è¨ˆç®—ã™ã‚‹ã«ã¯ã€0 ã‹ã‚‰ 1 ã®é–“ã®é€²è¡ŒçŠ¶æ³å€¤ã‚’æŒ‡å®šã—ã¦ã€é–‹å§‹å›³å½¢ (0) ã¨çµ‚äº†å›³å½¢ (1) é–“ã®å½¢çŠ¶ã‚’æ±ºå®šã—ã¾ã™ã€‚

```kotlin
Box(
    modifier = Modifier
        .drawWithCache {
            val triangle = RoundedPolygon(
                numVertices = 3,
                radius = size.minDimension / 2f,
                centerX = size.width / 2f,
                centerY = size.height / 2f,
                rounding = CornerRounding(
                    size.minDimension / 10f,
                    smoothing = 0.1f
                )
            )
            val square = RoundedPolygon(
                numVertices = 4,
                radius = size.minDimension / 2f,
                centerX = size.width / 2f,
                centerY = size.height / 2f
            )

            val morph = Morph(start = triangle, end = square)
            val morphPath = morph
                .toPath(progress = 0.5f).asComposePath()

            onDrawBehind {
                drawPath(morphPath, color = Color.Black)
            }
        }
        .fillMaxSize()
)
```

ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€é€²è¡ŒçŠ¶æ³ã¯ 2 ã¤ã®å½¢çŠ¶ (è§’ä¸¸ä¸‰è§’å½¢ã¨æ­£æ–¹å½¢) ã®ã¡ã‚‡ã†ã©ä¸­é–“ã«ã‚ã‚Šã€æ¬¡ã®çµæœãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

<img src="./ç”»åƒ/å››è§’ã¨ä¸‰è§’ã®ä¸­é–“ã®å›³å½¢.png" width="200">

ã»ã¨ã‚“ã©ã®ã‚·ãƒŠãƒªã‚ªã§ã¯ã€ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ã¯å˜ãªã‚‹é™çš„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ã¯ãªãã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸€éƒ¨ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ 2 ã¤ã®å½¢çŠ¶é–“ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã™ã‚‹ã«ã¯ã€ [Compose ã®æ¨™æº– Animation API](../../8.ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³/) ã‚’ä½¿ç”¨ã—ã¦ã€æ™‚é–“ã®çµŒéã«ä¼´ã†é€²è¡ŒçŠ¶æ³ã®å€¤ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ãŸã¨ãˆã°ã€æ¬¡ã®ã‚ˆã†ã«ã—ã¦ã€ã“ã‚Œã‚‰ 2 ã¤ã®å½¢çŠ¶é–“ã®ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ã‚’ç„¡é™ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã§ãã¾ã™ã€‚

```kotlin
val infiniteAnimation = rememberInfiniteTransition(label = "infinite animation")
val morphProgress = infiniteAnimation.animateFloat(
    initialValue = 0f,
    targetValue = 1f,
    animationSpec = infiniteRepeatable(
        tween(500),
        repeatMode = RepeatMode.Reverse
    ),
    label = "morph"
)
Box(
    modifier = Modifier
        .drawWithCache {
            val triangle = RoundedPolygon(
                numVertices = 3,
                // ã“ã® radius ã¯ã€å¤šè§’å½¢ã®ä¸­å¿ƒã‹ã‚‰ã„ãšã‚Œã‹ã®é ‚ç‚¹ã¾ã§ã®è·é›¢
                radius = size.minDimension / 2f,
                centerX = size.width / 2f,
                centerY = size.height / 2f,
                rounding = CornerRounding(
                    // ã“ã® radius ã¯ã€è§’ä¸¸ã®åŠå¾„
                    radius = size.minDimension / 10f,
                    smoothing = 0.1f
                )
            )
            val square = RoundedPolygon(
                numVertices = 4,
                radius = size.minDimension / 2f,
                centerX = size.width / 2f,
                centerY = size.height / 2f
            )

            val morph = Morph(start = triangle, end = square)
            val morphPath = morph
                .toPath(progress = morphProgress.value)
                .asComposePath()

            onDrawBehind {
                drawPath(morphPath, color = Color.Black)
            }
        }
        .fillMaxSize()
)
```

<img src="./ç”»åƒ/å››è§’ã¨ä¸‰è§’ã®ç„¡é™å¤‰æ›.gif" width="200">


## ãƒãƒªã‚´ãƒ³ã«æ²¿ã£ã¦åˆ‡ã‚ŠæŠœãã‚’è¡Œã†

Composable ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ–¹æ³•ã‚’å¤‰æ›´ã—ãŸã‚Šã€ã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚°é ˜åŸŸã®å‘¨å›²ã«æç”»ã•ã‚Œã‚‹å½±ã‚’åˆ©ç”¨ã—ãŸã‚Šã™ã‚‹ã«ã¯ã€ Compose ã® [clip](https://developer.android.com/reference/kotlin/androidx/compose/ui/Modifier?_gl=1*zrxkh1*_up*MQ..*_ga*MTQ1NzI0ODE0NC4xNzI2NzI4Nzk2*_ga_6HH9YJMN9M*MTcyNjc5NzEyOS4yLjAuMTcyNjc5NzEyOS4wLjAuMTkzNTEzODc4Mw..#(androidx.compose.ui.Modifier).clip(androidx.compose.ui.graphics.Shape)) ä¿®é£¾å­ã‚’ä½¿ç”¨ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚ãã®ã‚¯ãƒªãƒƒãƒ—ã«ãƒãƒªã‚´ãƒ³ã‚’æ¸¡ã™æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

```kotlin
// ã€å‚è€ƒã€‘
// calculateBounds() ã¯ã€ RoundedPolygon ã®é–¢æ•°ã§ã™ã€‚
// let é–¢æ•°ã¯ã€ãƒ©ãƒ ãƒ€å¼ã®çµæœã‚’è¿”ã—ã¾ã™ã€‚
// calculateBounds() é–¢æ•°ã¯ã€ä¸ãˆã‚‰ã‚ŒãŸ RoundedPolygon ã®
// left, top, right, bottom ã‚’æ ¼ç´ã—ãŸ FloatArray ã‚’è¿”ã—ã¾ã™
fun RoundedPolygon.getBounds() = calculateBounds().let { Rect(it[0], it[1], it[2], it[3]) }

class RoundedPolygonShape(
    private val polygon: RoundedPolygon,
    private var matrix: Matrix = Matrix()
) : Shape {
    private var path = Path()
    override fun createOutline(
        // size ã¯æç”»å¯èƒ½ãªé ˜åŸŸã®ã‚µã‚¤ã‚ºã€‚ã“ã®å ´åˆã€
        // æ¬¡ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã§å®šç¾©ã—ã¦ã„ã‚‹ Box ã®ã‚µã‚¤ã‚º (å˜ä½:px)
        size: Size,
        layoutDirection: LayoutDirection,
        density: Density
    ): Outline {
        // Path ã®å†…å®¹ã‚’å‰Šé™¤ã—ã¾ã™ã€‚(â€» 1 )
        path.rewind()
        path = polygon.toPath().asComposePath()
        matrix.reset()
        val bounds = polygon.getBounds()
        // bounds.width ã¯ã€å¤šè§’å½¢ã®å¹…ã€‚
        // ã“ã®å ´åˆã€å¤šè§’å½¢ã®åŠå¾„ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ 1f ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€
        // bounds.width ã¯ã€ç´„ 2 ã¨ãªã‚‹ã€‚
        // (å®Ÿéš›ã«ã¯ã€é ‚ç‚¹ã®ä¸¸ã‚ãŒã‚ã‚‹ãŸã‚ã€ã‚‚ã†å°‘ã—çŸ­ã„)
        val maxDimension = max(bounds.width, bounds.height)
        // scale é–¢æ•°ã®å¼•æ•°ã¯ã€æ‹¡å¤§ãƒ»ç¸®å°ã®å€ç‡ã‚’æŒ‡å®šã—ã¾ã™ã€‚
        // ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ä¾‹ãˆã° Pixel 8a ã§ã¯ã€
        // size.width = 525, maxDimension = 1.94 ãªã®ã§ã€
        // x ã®æ‹¡å¤§ç‡ã¯ã€ 269 å€ã¨ãªã‚Šã¾ã™ã€‚
        matrix.scale(size.width / maxDimension, size.height / maxDimension)
        // å¤šè§’å½¢ã®ä¸­å¿ƒåœ°ç‚¹ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ (0,0) ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€
        // translate ã§ç§»å‹•ã•ã›ã‚‹ã“ã¨ã§ã€å¤šè§’å½¢ã‚’ä»»æ„ã®ä½ç½®ã«è¡¨ç¤ºã™ã‚‹ã€‚
        matrix.translate(-bounds.left, -bounds.top)

        // ç›´å‰ã® scale ã‚„ translate ã¯ã€ã¾ã  Path ã«é©ç”¨ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ Path ã«é©ç”¨ã™ã‚‹ã€‚
        path.transform(matrix)
        return Outline.Generic(path)
    }
}
```

```
(â€» 1 ) Path.rewind() ã¨ Path.reset() ã®é•ã„

- Path.reset() ã¯å®Œå…¨ã«ãƒ‘ã‚¹ã‚’åˆæœŸåŒ–ã—ã€ãƒ‘ã‚¹ã«é–¢é€£ã™ã‚‹ã™ã¹ã¦ã®çŠ¶æ…‹ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã€‚ã¾ã£ãŸãæ–°ã—ã„ãƒ‘ã‚¹ã‚’å§‹ã‚ã‚‹ãŸã‚ã®çŠ¶æ…‹ã«æˆ»ã‚Šã¾ã™ã€‚
- Path.rewind() ã¯ãƒ‘ã‚¹ã®å†…å®¹ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ãŒã€ãƒ‘ã‚¹è‡ªä½“ã®å±æ€§ï¼ˆå¡—ã‚Šã¤ã¶ã—ã®ãƒ«ãƒ¼ãƒ«ã€æ–¹å‘ã€ã‚µãƒ–ãƒ‘ã‚¹ã®é–‹å§‹ä½ç½®ï¼‰ã¯ä¿æŒã•ã‚Œã¾ã™ã€‚
```

æ¬¡ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã«ç¤ºã™ã‚ˆã†ã«ã€ãƒãƒªã‚´ãƒ³ã‚’ã‚¯ãƒªãƒƒãƒ—ã¨ã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚

```kotlin
val hexagon = remember {
    RoundedPolygon(
        // é ‚ç‚¹ã®ä¸¸ã‚ã®åŠå¾„ (radius) ãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„ãŸã‚ã€
        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã® 1f ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚

        6,
        rounding = CornerRounding(0.2f)
    )
}
val clip = remember(hexagon) {
    RoundedPolygonShape(polygon = hexagon)
}
Box(
    modifier = Modifier
        .clip(clip)
        .background(MaterialTheme.colorScheme.secondary)
        .size(200.dp)
) {
    Text(
        "Hello Compose",
        color = MaterialTheme.colorScheme.onSecondary,
        modifier = Modifier.align(Alignment.Center)
    )
}
```

å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

<img src="./ç”»åƒ/ãƒãƒªã‚´ãƒ³ã‚’ã‚¯ãƒªãƒƒãƒ—ã¨ã—ã¦ä½¿ç”¨.png" width="200">

ã“ã‚Œã¯ã€ä»¥å‰ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ãã‚Œã»ã©å¤‰ã‚ã‚‰ãªã„ã‚ˆã†ã«è¦‹ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€Compose ã®ä»–ã®æ©Ÿèƒ½ã‚’æ´»ç”¨ã§ãã¾ã™ã€‚ãŸã¨ãˆã°ã€ã“ã®æ‰‹æ³•ã‚’ä½¿ç”¨ã—ã¦ã€ç”»åƒã‚’åˆ‡ã‚Šå–ã‚Šã€åˆ‡ã‚Šå–ã£ãŸé ˜åŸŸã®å‘¨å›²ã«å½±ã‚’é©ç”¨ã§ãã¾ã™ã€‚

```kotlin
val hexagon = remember {
    RoundedPolygon(
        6,
        rounding = CornerRounding(0.2f)
    )
}
val clip = remember(hexagon) {
    RoundedPolygonShape(polygon = hexagon)
}
Box(
    modifier = Modifier.fillMaxSize(),
    contentAlignment = Alignment.Center
) {
    Image(
        painter = painterResource(id = R.drawable.dog),
        contentDescription = "Dog",
        contentScale = ContentScale.Crop,
        modifier = Modifier
            .graphicsLayer {
                this.shadowElevation = 6.dp.toPx()
                this.shape = clip
                this.clip = true
                this.ambientShadowColor = Color.Black
                this.spotShadowColor = Color.Black
            }
            .size(200.dp)
    )
}
```

<img src="./ç”»åƒ/clip ã§ç”»åƒã‚’åˆ‡ã‚ŠæŠœãã€å½±ã‚’é©ç”¨.png" width="200">


## ã‚¯ãƒªãƒƒã‚¯ã§å¤‰å½¢ãƒœã‚¿ãƒ³

graphics-shape ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€æŠ¼ã™ã¨ 2 ã¤ã®å›³å½¢ãŒå¤‰å½¢ã™ã‚‹ãƒœã‚¿ãƒ³ã‚’ä½œæˆã§ãã¾ã™ã€‚ã¾ãšã€Shape ã‚’æ‹¡å¼µã—ãŸ MorphPolygonShape ã‚’ä½œæˆã—ã€é©åˆ‡ã«ãƒ•ã‚£ãƒƒãƒˆã™ã‚‹ã‚ˆã†ã«ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãŠã‚ˆã³å¤‰æ›ã—ã¾ã™ã€‚å›³å½¢ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã§ãã‚‹ã‚ˆã†ã«ã€é€²è¡ŒçŠ¶æ³ã‚’æ¸¡ã™ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

```kotlin
class MorphPolygonShape(
    private val morph: Morph,
    private val percentage: Float
) : Shape {

    private val matrix = Matrix()
    override fun createOutline(
        size: Size,
        layoutDirection: LayoutDirection,
        density: Density
    ): Outline {
        // ä»¥ä¸‹ã§ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®åŠå¾„ 1f ã‚‚ã€centerX ã¨ centerY ã® 0f ã‚‚å¤‰æ›´ã—ã¦ã„ãªã„ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚
        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ãƒ‘ã‚¹ã¯ã‚³ãƒ³ãƒ†ãƒŠãƒ¼ã®ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦ä¼¸ç¸®ã•ã‚Œã¾ã™ã€‚ä¼¸ç¸®ã—ãŸããªã„å ´åˆã¯ã€x ã¨ y ã®ä¸¡æ–¹ã«åŒã˜ size.width ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
        matrix.scale(size.width / 2f, size.height / 2f)
        matrix.translate(1f, 1f)

        val path = morph.toPath(progress = percentage).asComposePath()
        path.transform(matrix)
        return Outline.Generic(path)
    }
}
```

ã“ã®ãƒ¢ãƒ¼ãƒ•ã‚·ã‚§ã‚¤ãƒ—ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€shapeA ã¨ shapeB ã® 2 ã¤ã®ãƒãƒªã‚´ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚ãƒ¢ãƒ¼ãƒ•ã‚’ä½œæˆã—ã¦è¨˜æ†¶ã—ã¾ã™ã€‚æ¬¡ã«ã€ã‚¿ãƒƒãƒ—æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®é§†å‹•åŠ›ã¨ã—ã¦ã€ interactionSource ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ¢ãƒ¼ãƒ•ã‚’ã‚¯ãƒªãƒƒãƒ— ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã¨ã—ã¦ãƒœã‚¿ãƒ³ã«é©ç”¨ã—ã¾ã™ã€‚

```kotlin
val shapeA = remember {
    RoundedPolygon(
        6,
        rounding = CornerRounding(0.2f)
    )
}
val shapeB = remember {
    RoundedPolygon.star(
        6,
        rounding = CornerRounding(0.1f)
    )
}
val morph = remember {
    Morph(shapeA, shapeB)
}
val interactionSource = remember {
    MutableInteractionSource()
}
val isPressed by interactionSource.collectIsPressedAsState()
val animatedProgress = animateFloatAsState(
    targetValue = if (isPressed) 1f else 0f,
    label = "progress",
    animationSpec = spring(dampingRatio = 0.4f, stiffness = Spring.StiffnessMedium)
)
Box(
    modifier = Modifier
        .size(200.dp)
        .padding(8.dp)
        .clip(MorphPolygonShape(morph, animatedProgress.value))
        .background(Color(0xFF80DEEA))
        .size(200.dp)
        .clickable(interactionSource = interactionSource, indication = null) {
        }
) {
    Text("Hello", modifier = Modifier.align(Alignment.Center))
}
```

ã“ã‚Œã«ã‚ˆã‚Šã€ãƒœãƒƒã‚¯ã‚¹ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨æ¬¡ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

<img src="./ç”»åƒ/ã‚¿ãƒƒãƒ—ã—ã¦å¤‰å½¢ã™ã‚‹ã‚·ã‚§ã‚¤ãƒ—.gif" width="200">


## ç„¡é™ã«å¤‰åŒ–ã™ã‚‹å½¢çŠ¶ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã™ã‚‹

ãƒ¢ãƒ¼ãƒ•ã‚·ã‚§ã‚¤ãƒ—ã‚’ç„¡é™ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã™ã‚‹ã«ã¯ã€ [rememberInfiniteTransition](https://developer.android.com/develop/ui/compose/animation/value-based?_gl=1*zwfno6*_up*MQ..*_ga*MTQ1NzI0ODE0NC4xNzI2NzI4Nzk2*_ga_6HH9YJMN9M*MTcyNjk2NzAzOC40LjAuMTcyNjk2NzAzOC4wLjAuMzE2MTc2MjY5#rememberinfinitetransition) ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä»¥ä¸‹ã¯ã€æ™‚é–“ã®çµŒéã¨ã¨ã‚‚ã«ã‚·ã‚§ã‚¤ãƒ—ãŒç„¡é™ã«å¤‰åŒ– (ãŠã‚ˆã³å›è»¢) ã™ã‚‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸã®ä¾‹ã§ã™ã€‚ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯ã€ä¸Šè¨˜ã® MorphPolygonShape ã«å°ã•ãªèª¿æ•´ã‚’åŠ ãˆã¾ã™ã€‚

```kotlin
class CustomRotatingMorphShape(
    private val morph: Morph,
    private val percentage: Float,
    private val rotation: Float
) : Shape {

    private val matrix = Matrix()
    override fun createOutline(
        size: Size,
        layoutDirection: LayoutDirection,
        density: Density
    ): Outline {
        matrix.scale(size.width / 2f, size.height / 2f)
        matrix.translate(1f, 1f)
        // å›è»¢
        matrix.rotateZ(rotation)

        val path = morph.toPath(progress = percentage).asComposePath()
        path.transform(matrix)

        return Outline.Generic(path)
    }
}

@Preview
@Composable
private fun RotatingScallopedProfilePic() {
    val shapeA = remember {
        RoundedPolygon(
            12,
            rounding = CornerRounding(0.2f)
        )
    }
    val shapeB = remember {
        RoundedPolygon.star(
            12,
            rounding = CornerRounding(0.2f)
        )
    }
    val morph = remember {
        Morph(shapeA, shapeB)
    }
    // ç„¡é™ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    val infiniteTransition = rememberInfiniteTransition("infinite outline movement")
    val animatedProgress = infiniteTransition.animateFloat(
        initialValue = 0f,
        targetValue = 1f,
        animationSpec = infiniteRepeatable(
            tween(2000, easing = LinearEasing),
            repeatMode = RepeatMode.Reverse
        ),
        label = "animatedMorphProgress"
    )
    val animatedRotation = infiniteTransition.animateFloat(
        initialValue = 0f,
        targetValue = 360f,
        animationSpec = infiniteRepeatable(
            tween(6000, easing = LinearEasing),
            repeatMode = RepeatMode.Reverse
        ),
        label = "animatedMorphProgress"
    )
    Box(
        modifier = Modifier.fillMaxSize(),
        contentAlignment = Alignment.Center
    ) {
        Image(
            painter = painterResource(id = R.drawable.dog),
            contentDescription = "Dog",
            contentScale = ContentScale.Crop,
            modifier = Modifier
                .clip(
                    CustomRotatingMorphShape(
                        morph,
                        animatedProgress.value,
                        animatedRotation.value
                    )
                )
                .size(200.dp)
        )
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚Šã€æ¬¡ã®ã‚ˆã†ãªæ¥½ã—ã„çµæœãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

<img src="./ç”»åƒ/ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã‚·ã‚§ã‚¤ãƒ—.gif" width="200">


## ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªã‚´ãƒ³

é€šå¸¸ã®å¤šè§’å½¢ã‹ã‚‰ä½œæˆã•ã‚ŒãŸå›³å½¢ãŒãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’ã‚«ãƒãƒ¼ã—ãªã„å ´åˆã¯ã€é ‚ç‚¹ã®ãƒªã‚¹ãƒˆã‚’ä½¿ç”¨ã—ã¦ã‚ˆã‚Šã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸå›³å½¢ã‚’ä½œæˆã§ãã¾ã™ã€‚ãŸã¨ãˆã°ã€æ¬¡ã®ã‚ˆã†ãªãƒãƒ¼ãƒˆã®å½¢ã‚’ä½œæˆã™ã‚‹ã¨ã—ã¾ã™ã€‚

<img src="./ç”»åƒ/ãƒãƒ¼ãƒˆå‹ã®ã‚·ã‚§ã‚¤ãƒ—.png" width="100">

ã“ã®å›³å½¢ã®å€‹ã€…ã®é ‚ç‚¹ã¯ã€xã€y åº§æ¨™ã® float é…åˆ—ã‚’å—ã‘å–ã‚‹ RoundedPolygon ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦æŒ‡å®šã§ãã¾ã™ã€‚

ãƒãƒ¼ãƒˆã®ãƒãƒªã‚´ãƒ³ã‚’åˆ†è§£ã™ã‚‹ã«ã¯ã€æ¥µåº§æ¨™ç³»ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ç›´äº¤åº§æ¨™ç³» (xã€y) ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã‚Šã‚‚ç°¡å˜ã«ãªã‚Šã¾ã™ã€‚æ¥µåº§æ¨™ç³»ã§ã¯ã€0Â° ãŒå³å´ã‹ã‚‰å§‹ã¾ã‚Šã€æ™‚è¨ˆå›ã‚Šã«é€²ã¿ã€12 æ™‚ã®ä½ç½®ã§ 270Â° ã«ãªã‚Šã¾ã™ã€‚

<img src="./ç”»åƒ/åº§æ¨™ä»˜ãã®ãƒãƒ¼ãƒˆã‚·ã‚§ã‚¤ãƒ—.png" width="300">

å„ç‚¹ã®ä¸­å¿ƒã‹ã‚‰ã®è§’åº¦ (ğœ­) ã¨åŠå¾„ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€å½¢çŠ¶ã‚’ã‚ˆã‚Šç°¡å˜ã«å®šç¾©ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

<img src="./ç”»åƒ/è§’ä¸¸ãªã—ã®ãƒãƒ¼ãƒˆã‚·ã‚§ã‚¤ãƒ—.png" width="300">

é ‚ç‚¹ã‚’ä½œæˆã—ã¦ RoundedPolygon é–¢æ•°ã«æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```kotlin
val vertices = remember {
    val radius = 1f
    val radiusSides = 0.8f
    val innerRadius = .1f
    floatArrayOf(
        radialToCartesian(radiusSides, 0f.toRadians()).x,
        radialToCartesian(radiusSides, 0f.toRadians()).y,
        radialToCartesian(radius, 90f.toRadians()).x,
        radialToCartesian(radius, 90f.toRadians()).y,
        radialToCartesian(radiusSides, 180f.toRadians()).x,
        radialToCartesian(radiusSides, 180f.toRadians()).y,
        radialToCartesian(radius, 250f.toRadians()).x,
        radialToCartesian(radius, 250f.toRadians()).y,
        radialToCartesian(innerRadius, 270f.toRadians()).x,
        radialToCartesian(innerRadius, 270f.toRadians()).y,
        radialToCartesian(radius, 290f.toRadians()).x,
        radialToCartesian(radius, 290f.toRadians()).y,
    )
}
```

é ‚ç‚¹ã¯ã€æ¬¡ã® radicalToCartesian é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ç›´äº¤åº§æ¨™ã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```kotlin
internal fun Float.toRadians() = this * PI.toFloat() / 180f

internal val PointZero = PointF(0f, 0f)
internal fun radialToCartesian(
    radius: Float,
    angleRadians: Float,
    center: PointF = PointZero
) = directionVectorPointF(angleRadians) * radius + center

internal fun directionVectorPointF(angleRadians: Float) =
    PointF(cos(angleRadians), sin(angleRadians))
```

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ãƒãƒ¼ãƒˆã®ç”Ÿã®é ‚ç‚¹ãŒæä¾›ã•ã‚Œã¾ã™ãŒã€é¸æŠã—ãŸãƒãƒ¼ãƒˆã®å½¢ã«ã™ã‚‹ã«ã¯ç‰¹å®šã®è§’ã‚’ä¸¸ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚90Â° ã¨ 270Â° ã®è§’ã¯ä¸¸ã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ä»–ã®è§’ã¯ä¸¸ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚å€‹ã€…ã®è§’ã«ã‚«ã‚¹ã‚¿ãƒ ã®ä¸¸ã‚ã‚’è¡Œã†ã«ã¯ã€perVertexRounding ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```kotlin
val rounding = remember {
    val roundingNormal = 0.6f
    val roundingNone = 0f
    listOf(
        CornerRounding(roundingNormal),
        CornerRounding(roundingNone),
        CornerRounding(roundingNormal),
        CornerRounding(roundingNormal),
        CornerRounding(roundingNone),
        CornerRounding(roundingNormal),
    )
}

val polygon = remember(vertices, rounding) {
    RoundedPolygon(
        vertices = vertices,
        perVertexRounding = rounding
    )
}
Box(
    modifier = Modifier
        .drawWithCache {
            val roundedPolygonPath = polygon.toPath().asComposePath()
            onDrawBehind {
                scale(size.width * 0.5f, size.width * 0.5f) {
                    translate(size.width * 0.5f, size.height * 0.5f) {
                        drawPath(roundedPolygonPath, color = Color(0xFFF15087))
                    }
                }
            }
        }
        .size(400.dp)
)
```

çµæœã¯ãƒ”ãƒ³ã‚¯è‰²ã®ãƒãƒ¼ãƒˆã«ãªã‚Šã¾ã™:

<img src="./ç”»åƒ/ãƒãƒ¼ãƒˆå‹ã®ã‚·ã‚§ã‚¤ãƒ—.png" width="200">

å‰è¿°ã®ã‚·ã‚§ã‚¤ãƒ—ãŒãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’ã‚«ãƒãƒ¼ã—ã¦ã„ãªã„å ´åˆã¯ã€ [Path ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ã‚¤ãƒ—ã‚’æç”»ã™ã‚‹](./1.æ¦‚è¦.md/#ãƒ‘ã‚¹ã‚’æç”»ã™ã‚‹) ã‹ã€ãƒ‡ã‚£ã‚¹ã‚¯ã‹ã‚‰ [ImageVector](https://developer.android.com/develop/ui/compose/graphics/images/compare?_gl=1*7vz0tw*_up*MQ..*_ga*MTQ1NzI0ODE0NC4xNzI2NzI4Nzk2*_ga_6HH9YJMN9M*MTcyNjk2NzAzOC40LjAuMTcyNjk2NzAzOC4wLjAuMzE2MTc2MjY5#image-vector) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚graphics-shapes ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ä»»æ„ã®ã‚·ã‚§ã‚¤ãƒ—ã«ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã¯ãªãã€ä¸¸ã¿ã‚’å¸¯ã³ãŸãƒãƒªã‚´ãƒ³ã®ä½œæˆã¨ãã‚Œã‚‰ã®é–“ã®ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚° ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡ç´ åŒ–ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚


## å‚è€ƒæƒ…å ±

For more information and examples, see the following resources:

- [Blog: The Shape of Things to Come - Shapes](https://medium.com/androiddevelopers/the-shape-of-things-to-come-1c7663d9dbc0)
- [Blog: Shape morphing in Android](https://medium.com/androiddevelopers/shape-morphing-in-android-f5c36416a979)
- [Shapes Github demonstration](https://github.com/chethaase/ShapesDemo)

