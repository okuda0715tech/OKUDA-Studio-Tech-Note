<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [トランザクション](#トランザクション)
	- [基本形](#基本形)

<!-- /TOC -->


# トランザクション

## 基本形

トランザクションを使用するには、Daoクラス内のメソッドに`@Transaction`アノテーションを付与します。

そのメソッド内で一つのトランザクションにしたい複数のSQLを実行します。

メソッド内でExceptionが発生しなければ、トランザクションは成功したとみなされます。

```Java
@Dao
// interfaceではなく、abstractなクラスとしてDaoを定義します。
public abstract class SongDao {
  @Insert
  public abstract void insert(Song song);
  @Delete
  public abstract void delete(Song song);
  @Transaction
  public void insertAndDeleteInTransaction(Song newSong, Song oldSong) {
    // この中で実行される複数のSQLは一つのトランザクション内で実行されます。
    insert(newSong);
    delete(oldSong);
  }
}
```

