<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [カーソルを合わせると個人情報が候補表示される](#カーソルを合わせると個人情報が候補表示される)
  - [概要](#概要)
  - [個人情報を表示するのは、基本的には OS の機能である](#個人情報を表示するのは基本的には-os-の機能である)
    - [OS の機能の ON or OFF をユーザーが切り替えたい場合](#os-の機能の-on-or-off-をユーザーが切り替えたい場合)
    - [入力候補の個人情報そのものをユーザーが削除したい場合](#入力候補の個人情報そのものをユーザーが削除したい場合)
  - [OS の機能をアプリ側でカスタマイズする](#os-の機能をアプリ側でカスタマイズする)
    - [候補を表示するか、しないかを指定する](#候補を表示するかしないかを指定する)
      - [xml でカスタマイズする](#xml-でカスタマイズする)
      - [java でカスタマイズする](#java-でカスタマイズする)
    - [どのような候補を表示するのかを指定する](#どのような候補を表示するのかを指定する)
<!-- TOC END -->


# カーソルを合わせると個人情報が候補表示される

## 概要

EditText にカーソルを合わせると、キーボードの入力候補欄に自分の名前などの個人情報が  
表示されることがあります。この記事では、これを表示させないようにする方法を記述しています。


## 個人情報を表示するのは、基本的には OS の機能である

個人情報を表示するのは、基本的には、アプリの機能ではなく、 OS の機能によるものです。

Android には、 「 Google で自動入力」 という機能が備わっており、  
主にオンライン決済を行う際などに、自分の支払情報の入力を補助したり、  
マイページにログインするためのログイン情報の入力を補助するための機能になります。

よって、 OS のこの機能を ON にしていると、意図せず、入力候補に個人情報が表示されることがあります。


### OS の機能の ON or OFF をユーザーが切り替えたい場合

デバイス内のすべてのアプリに影響するため、 OS の設定を変更することをユーザーに推奨することは  
基本的にはありませんが、もし、 OS の設定を変更する場合は、以下のように操作します。

`設定 -> プライバシー -> Google の自動入力サービス`

`Google 自動入力を使用する` のスイッチで ON と OFF を切り替えることができます。


### 入力候補の個人情報そのものをユーザーが削除したい場合

```
設定 -> セキュリティとプライバシー -> プライバシーの詳細設定 ->
Google の自動入力サービス -> [対象のGoogleアカウントを選択してから] 個人情報 ->
他のユーザーに表示する情報の選択 ->
ここに登録されている電話番号やメールアドレスの中から表示されたくないものを削除する
```


## OS の機能をアプリ側でカスタマイズする

入力候補の表示機能は、基本的には OS の機能ですが、 OS は、ヒューリスティック (※) に基づいて  
候補表示を行うため、誤った候補を表示してしまうこともあります。アプリ側では、これを補正することが可能です。

(※) 経験則や直観のこと

### 候補を表示するか、しないかを指定する

候補を表示するか、しないかを指定する方法を以下に示します。


#### xml でカスタマイズする

```xml
<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:importantForAutofill="no" />
```

`android:importantForAutofill` 属性を指定します。  
指定可能な値は、以下の通りです。

- auto
  - Android システムは、ヒューリスティックを使用して、そのビューを自動入力の対象にするかどうかを判断します。
- no
  - このビューは、自動入力の対象にはなりません。
- noExcludeDescendants
  - このビューと、このビューの子は、自動入力の対象にはなりません。
- yes
  - このビューは、自動入力の対象になります。
- yesExcludeDescendants
  - このビューは自動入力の対象になりますが、このビューの子は自動入力の対象にはなりません。


#### java でカスタマイズする

```java
TextView captcha = findViewById(R.id.captcha);
captcha.setImportantForAutofill(View.IMPORTANT_FOR_AUTOFILL_NO);
```

詳しくは、以下のリンクを参照してください。

[自動入力の対象とするフィールドをマーキングする](https://developer.android.com/guide/topics/text/autofill-optimize#important)


### どのような候補を表示するのかを指定する

**xml で指定する場合**

```xml
<EditText
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:autofillHints="password" />
```

**java で指定する場合**

```java
EditText password = findViewById(R.id.password);
password.setAutofillHints(View.AUTOFILL_HINT_PASSWORD);
```

詳しくは、以下のリンクを参照してください。

[自動入力用のヒントを指定する](https://developer.android.com/guide/topics/text/autofill-optimize#hints)
