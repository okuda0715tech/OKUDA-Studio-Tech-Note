- [シェイプドローワブル](#シェイプドローワブル)
  - [概要](#概要)
  - [カスタムView内にシェイプドローワブルを描画する方法](#カスタムview内にシェイプドローワブルを描画する方法)


# シェイプドローワブル

## 概要

ShapeDrawable は、円、楕円、四角形、線など基本的な図形のDrawableオブジェクトを生成するための  
Drawable クラスのサブクラスです。

四角形は角を丸くできます。  
円は内側と外側の二重円にできます。  
塗りつぶしができる図形は、グラデーションをつけることができます。  
グラデーションは縦、横、斜めなど向きが自由に設定できます。

上記のような基本的な図形は、画像リソースを用意するよりもシェイプドローワブルを使用する方が  
メモリ使用量が少なくなり、アプリのダウンロードなどが早くなります。

`setBackgroundDrawable()` メソッドを使用することで、 View の背景に指定することも可能です。


## カスタムView内にシェイプドローワブルを描画する方法

**CustomDrawableView.java**

```java
public class CustomDrawableView extends View {
  private ShapeDrawable drawable;

  public CustomDrawableView(Context context) {
    // javaコード内でCustomDrawableViewを使用する場合
    super(context);
    // xmlファイル内でCustomDrawableViewを使用する場合
    // super(Context, AttributeSet)

    int x = 10;
    int y = 10;
    int width = 300;
    int height = 50;
    setContentDescription(context.getResources().getString(
            R.string.my_view_desc));

    drawable = new ShapeDrawable(new OvalShape());
    // カラーをセットしない場合はデフォルトで黒色になります。
    drawable.getPaint().setColor(0xff74AC23);
    // Boundsがセットされないと図形は描画されません。
    drawable.setBounds(x, y, x + width, y + height);
  }

  protected void onDraw(Canvas canvas) {
    drawable.draw(canvas);
  }
}
```

`View`クラスを継承したカスタムViewクラス内の`onDraw`メソッド内で、`ShapeDrawable`を描画することができます。


上記の`CustomDrawableView`クラスをJavaコードで使用する場合は次のようにします。

**MainActivity.java**

```java
CustomDrawableView customDrawableView;

protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  customDrawableView = new CustomDrawableView(this);

  setContentView(customDrawableView);
}
```


`CustomDrawableView`クラスをxmlで使用する場合は次のようにします。

**sample_layout.xml**

```xml
<com.example.shapedrawable.CustomDrawableView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />
```
