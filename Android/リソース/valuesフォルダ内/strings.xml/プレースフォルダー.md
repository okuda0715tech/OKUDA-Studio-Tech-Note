<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [プレースフォルダー](#プレースフォルダー)
	- [プレースフォルダーに代入する部分を Java で実装する場合](#プレースフォルダーに代入する部分を-java-で実装する場合)
		- [プレースフォルダーが一つの場合](#プレースフォルダーが一つの場合)
		- [プレースフォルダーが二つ以上の場合](#プレースフォルダーが二つ以上の場合)
		- [英語の複数形に対応する](#英語の複数形に対応する)
	- [プレースフォルダーに代入する部分をデータバインディングで実装する場合](#プレースフォルダーに代入する部分をデータバインディングで実装する場合)
	- [プレースフォルダーに代入する部分をリソースファイル内で実装する場合](#プレースフォルダーに代入する部分をリソースファイル内で実装する場合)
		- [代入する文字を同一ファイル内に定義する場合](#代入する文字を同一ファイル内に定義する場合)
		- [代入する文字を外部ファイルに定義する場合](#代入する文字を外部ファイルに定義する場合)
<!-- TOC END -->


# プレースフォルダー

## プレースフォルダーに代入する部分を Java で実装する場合

### プレースフォルダーが一つの場合

```xml
<?xml version="1.0" encoding="utf-8"?>  
<resources>  
    <string name="buybooks">本を%1$d冊買います</string>  
</resources>  
```

```Java
String buybooks1 = getString(R.string.buybooks, 4); // 本を4冊買います

// String.format() メソッドを使用しても同じことができる。
String buybooks2 = String.format(getString(R.string.buybooks), 4); // 本を4冊買います
```

`%1$d` の `1$` は `getString()` の2番目以降の引数を割り当てるときに、何番目の引数かを指定する番号です。  
`%d` は整数、`%f` は小数、`%s` は文字列です。このあたりは [Formatter](https://developer.android.com/reference/java/util/Formatter.html) で規定されています。


### プレースフォルダーが二つ以上の場合

```xml
<?xml version="1.0" encoding="utf-8"?>  
<resources>  
    <string name="buyitems">%2$sを%1$d冊買います</string>  
</resources>
```

```java
String buybooks1 = getString(R.string.buybooks, 4, "本");  
String buybooks2 = String.format(getString(R.string.buybooks), 4 , "本");
```

### 英語の複数形に対応する

**res/values/plurals.xml**

```xml
<?xml version="1.0" encoding="utf-8"?>  
<resources>  
    <plurals name="buy_books">  
        <item quantity="one">Buy one book</item>  
        <item quantity="other">Buy %1$d books</item>  
    </plurals>  
</resources>
```

`<item quantity=xxx>` の `xxx` に設定できる値は zero , one , two , few , many , other です。  
`<item>` の値の部分には `<string>` の値と同じものを設定します。

```Java
// 第二引数は必須です。
// 第二引数は、適切な <item> を選択するために、数量がいくつなのかを指定します。
String buy1book = getResources().getQuantityString(R.plurals.buy_books, 1); // Buy one book

// 第三引数以降は、「%1$d」などのプレースフォルダーが存在する場合に必須です。
// プレースフォルダーに実際に代入する値を指定します。
String buyNbooks = getResources().getQuantityString(R.plurals.buy_books, 4, 4); // Buy 4 books
```


## プレースフォルダーに代入する部分をデータバインディングで実装する場合

「アプリ名: MyAppName, 作者: Takeda」と表示する場合

```xml
<resources>
    <string name="app_name">MyAppName</string>
    <string name="author">Takeda</string>
    <string name="detail">アプリ名: %s, 作者: %s</string>
</resources>
```

```xml
<TextView
    android:text="@{@string/detail(@string/app_name, @string/author)}"/>
```


## プレースフォルダーに代入する部分をリソースファイル内で実装する場合

### 代入する文字を同一ファイル内に定義する場合

```xml
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE resources [
    <!ENTITY appName "MyAppName">
    <!ENTITY author "Takeda">
]>

<resources>
    <string name="app_name">&appName;</string>
    <string name="author">&author;</string>
    <string name="hoge">アプリ名: &appName;, 作者: &author;</string>
</resources>
```

この実装方法では、クラスファイルをエディタで開いた直後に、実際の文字列が表示される機能において、  
プレースフォルダー部分の値が表示されないというデメリットがあります。


### 代入する文字を外部ファイルに定義する場合

**res/raw/entities.ent**

```xml
<!ENTITY appname "MyAppName">
<!ENTITY author "Takeda">
```

**res/values/string.xml**

```xml
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE resources [
    <!ENTITY % ents SYSTEM "./res/raw/entities.ent">
    %ents;   
]>

<resources>
    <string name="app_name">&appname;</string>
    <string name="description">アプリ名: &appname;, 作者: &author;</string>
</resources>
```

この方法は、エンティティを外部ファイル化しているため、どのリソースファイルからでもエンティティを  
参照することが可能です。
