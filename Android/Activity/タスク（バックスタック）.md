- [タスク（バックスタック）](#タスクバックスタック)
	- [概要](#概要)
	- [起動モード](#起動モード)
		- [原則](#原則)
		- [あ](#あ)
		- [マニフェストを使用した定義方法](#マニフェストを使用した定義方法)
		- [具体的な実装方法](#具体的な実装方法)
			- [singleTop](#singletop)
			- [singleTask](#singletask)


# タスク（バックスタック）

## 概要

タスク(バックスタック)とは、アクティビティをスタック形式で保持する入物のことである。


## 起動モード

### 原則

1. バックスタックの順番を入れ替えることはできない。


### あ

### マニフェストを使用した定義方法

マニフェストの`launchMode`属性に以下の値のいずれかを設定する。

**launchMode**

|  standard | singleTop  |  singleTask |  singleInstance |
|-----------|------------|-------------|-----------------|
インスタンスの作成場所<br>1.呼び出し元と同じタスクに作成<br>2.新しいタスクを作成してそこに作成  | 1  | 1  | 2  |  2
複数のインスタンス生成  | 可  | 可  | 不可  |  不可
各インスタンスは異なるタスクに所属できる  | ◯  | ◯  | -  |  -
1 つのタスクで同じActivityの複数のインスタンスを持つことができる  | ◯  | △（※1）  | -  |  -
起動側のActivityの属性が上記4種の場合、Activityを生成するタスクの場所<br>1.起動元Activityと同じタスク上にActivityを起動する<br>2.起動元Activityと別のタスクを新たに立ち上げ、そこでActivityを起動する  | 1  | 1  | 1  | 2

（※1）バックスタックの一番上にあるアクティビティがそのアクティビティの既存のインスタンスでない場合のみ「◯」。それ以外の場合は「×」。つまり、「×」の場合は、既存のインスタンスを再利用する。


### 具体的な実装方法

#### singleTop

アクティビティのインスタンスが現在のタスクの一番上に既に存在する場合は、システムはアクティビティの新しいインスタンスを作成せずに、`onNewIntent()` メソッドを呼び出して、インテントをそのインスタンスに渡します。

#### singleTask

既にActivityが存在している場合は、`onNewIntent()` メソッドを呼び出して、インテントをそのインスタンスに渡します。もちろん、既に存在しているインスタンスは、生成時に新しいタスクを立ち上げてそこにインスタンスを生成している。
