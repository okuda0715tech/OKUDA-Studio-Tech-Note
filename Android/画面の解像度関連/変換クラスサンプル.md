<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [変換クラスサンプル](#変換クラスサンプル)
<!-- TOC END -->


# 変換クラスサンプル

UnitConverter.java

```Java
/**
 * 返値は基本的に int 型で返す。
 * なぜなら、パラメータに int 型しか受け付けない API が存在するためである。
 * 例えば、
 * {@link android.graphics.drawable.Drawable#setBounds(int, int, int, int)}は int 型を受け取り、
 * {@link android.graphics.Canvas#drawLine(float, float, float, float, Paint)}は float 型を受け取る。
 * int 型の値を float 型の変数に代入することは可能であるため、上記のような場合は、問題ない。
 * <p>
 * ただし、以下のようにパラメータに配列を受け取る場合は、問題となる。
 * {@link android.graphics.Canvas#drawLines(float[], Paint)}
 * int 配列型の変数を float 配列型の変数に直接代入することができないためである。
 * そのため、パラメータで配列を受け取る場合には、 int 配列型の場合と float 配列型の場合で別々のメソッドを
 * 提供します。
 * <p>
 * このクラスでは、基本的に、 float -> int 変換で発生した小数点以下の値は、四捨五入している。
 * 切り捨てしたい場合は、各計算式の末尾にある「 + 0.5f」を除外することで可能となる。
 */
public class UnitConverter {

    // ******************************************
    //
    // dp <-> px 変換
    //
    // ******************************************

    private static float getDensity(Resources resources) {
        return resources.getDisplayMetrics().density;
    }

    public static int dpToPx(float dp, Resources resources) {
        return (int) (dp * getDensity(resources) + 0.5f);
    }

    public static int pxToDp(float px, Resources resources) {
        return (int) (px / getDensity(resources) + 0.5f);
    }

    // ******************************************
    //
    // sp <-> px 変換
    //
    // ******************************************

    private static float getScaledDensity(Resources resources) {
        return resources.getDisplayMetrics().scaledDensity;
    }

    public static int spToPx(float sp, Resources resources) {
        return (int) (sp * getScaledDensity(resources) + 0.5f);
    }

    public static int pxToSp(float px, Resources resources) {
        return (int) (px / getScaledDensity(resources) + 0.5f);
    }

    // ******************************************
    //
    // dp <-> sp 変換
    //
    // ******************************************

    // そういう状況はあまりないとは思うが、もし、
    // spとdpを相互に変換する場合は、いったんpxを経由して変換する。

    // ******************************************
    //
    // パラメータとして配列を受け取り変換する場合
    // dp <-> px
    // sp <-> px
    //
    // ******************************************

    // ******************************************
    // 引数と返値の型が int 型の配列の場合
    // ******************************************

    public static int[] dpToPx(int[] dps, Resources resources) {
        int[] result = new int[dps.length];
        for (int i = 0; i < dps.length; i++) {
            result[i] = dpToPx(dps[i], resources);
        }
        return result;
    }

    public static int[] pxToDp(int[] pxs, Resources resources) {
        int[] result = new int[pxs.length];
        for (int i = 0; i < pxs.length; i++) {
            result[i] = pxToDp(pxs[i], resources);
        }
        return result;
    }

    public static int[] spToPx(int[] sps, Resources resources) {
        int[] result = new int[sps.length];
        for (int i = 0; i < sps.length; i++) {
            result[i] = spToPx(sps[i], resources);
        }
        return result;
    }

    public static int[] pxToSp(int[] pxs, Resources resources) {
        int[] result = new int[pxs.length];
        for (int i = 0; i < pxs.length; i++) {
            result[i] = pxToSp(pxs[i], resources);
        }
        return result;
    }

    // ******************************************
    // 引数と返値の型が float 型の配列の場合
    // ******************************************

    public static float[] dpToPx(float[] dps, Resources resources) {
        float[] result = new float[dps.length];
        for (int i = 0; i < dps.length; i++) {
            result[i] = dpToPx(dps[i], resources);
        }
        return result;
    }

    public static float[] pxToDp(float[] pxs, Resources resources) {
        float[] result = new float[pxs.length];
        for (int i = 0; i < pxs.length; i++) {
            result[i] = pxToDp(pxs[i], resources);
        }
        return result;
    }

    public static float[] spToPx(float[] sps, Resources resources) {
        float[] result = new float[sps.length];
        for (int i = 0; i < sps.length; i++) {
            result[i] = spToPx(sps[i], resources);
        }
        return result;
    }

    public static float[] pxToSp(float[] pxs, Resources resources) {
        float[] result = new float[pxs.length];
        for (int i = 0; i < pxs.length; i++) {
            result[i] = pxToSp(pxs[i], resources);
        }
        return result;
    }

}
```
