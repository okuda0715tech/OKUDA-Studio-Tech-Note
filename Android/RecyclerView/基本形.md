<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [基本形](#基本形)
	- [コード](#コード)

<!-- /TOC -->


# 基本形

## コード

**MainActivity.java**

```java
public class MainActivity extends AppCompatActivity {

    MyAdapter myAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ArrayList<RowData> listData;

        RecyclerView recyclerView = findViewById(R.id.recycler_view);
        if (savedInstanceState == null) {
            listData = createRowData();
        } else {
            listData = Utility.castToRowDataList(
                    savedInstanceState.getSerializable("DATA"));
        }

        myAdapter = new MyAdapter(listData) {
            @Override
            public void onRowDataClicked(@NonNull RowData rowData) {
                super.onRowDataClicked(rowData);
                Toast.makeText(getApplicationContext(), rowData.getmTitle(), Toast.LENGTH_LONG).show();
            }
        };

        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(getApplicationContext());

        recyclerView.setHasFixedSize(true);
        recyclerView.setLayoutManager(linearLayoutManager);
        recyclerView.setAdapter(myAdapter);

        ItemTouchHelper itemDecor = new ItemTouchHelper(
                new ItemTouchHelper.SimpleCallback(ItemTouchHelper.UP | ItemTouchHelper.DOWN, ItemTouchHelper.RIGHT) {
                    @Override
                    public boolean onMove(@NonNull RecyclerView recyclerView, @NonNull RecyclerView.ViewHolder viewHolder,
                                          @NonNull RecyclerView.ViewHolder target) {
                        return true;
                    }

                    @Override
                    public void onSwiped(@NonNull RecyclerView.ViewHolder viewHolder, int direction) {
                        final int fromPos = viewHolder.getAdapterPosition();
                        myAdapter.removeAt(fromPos);
                    }
                });

        itemDecor.attachToRecyclerView(recyclerView);
    }

    @Override
    protected void onSaveInstanceState(@NonNull Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putSerializable("DATA", myAdapter.getItems());
    }

    private ArrayList<RowData> createRowData() {
        ArrayList<RowData> dataset = new ArrayList<>();
        for (int i = 0; i < 100; i++) {
            RowData rowData = new RowData();
            rowData.setmTitle("Titel" + i);
            rowData.setmDetail("Detail" + i);
            dataset.add(rowData);
        }
        return dataset;
    }

}
```


**MyAdapter.java**

```java
public class MyAdapter extends RecyclerView.Adapter<MyAdapter.MyViewHolder> {

    private ArrayList<RowData> mRowDataList;

    public void onRowDataClicked(RowData rowData) {
    }

    MyAdapter(ArrayList<RowData> rowDataList) {
        mRowDataList = rowDataList;
    }

    @NonNull
    @Override
    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        View inflater = LayoutInflater.from(parent.getContext()).inflate(R.layout.row, parent, false);
        final MyViewHolder myViewHolder = new MyViewHolder(inflater);

        myViewHolder.itemView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                final int position = myViewHolder.getAdapterPosition();
                RowData rowData = mRowDataList.get(position);
                onRowDataClicked(rowData);
            }
        });

        return myViewHolder;
    }

    @Override
    public void onBindViewHolder(@NonNull MyViewHolder myViewHolder, int i) {
        myViewHolder.mTitle.setText(mRowDataList.get(i).getmTitle());
        myViewHolder.mDetail.setText(mRowDataList.get(i).getmDetail());
    }

    @Override
    public int getItemCount() {
        return mRowDataList.size();
    }

    public ArrayList<RowData> getItems(){
        return mRowDataList;
    }

    /**
     * ViewHolder
     */
    static class MyViewHolder extends RecyclerView.ViewHolder {

        TextView mTitle;
        TextView mDetail;

        MyViewHolder(View viewItem) {
            super(viewItem);
            mTitle = itemView.findViewById(R.id.title);
            mDetail = itemView.findViewById(R.id.detail);
        }
    }

    void removeAt(int position){
        mRowDataList.remove(position);
        notifyItemRemoved(position);
    }

    void updateData(ArrayList<RowData> list){
        mRowDataList = list;
        notifyDataSetChanged();
    }
}
```


**RowData.java**

```java
public class RowData implements Serializable {
    private String mTitle;
    private String mDetail;

    public void setmTitle(String mTitle) {
        this.mTitle = mTitle;
    }

    public void setmDetail(String mDetail) {
        this.mDetail = mDetail;
    }

    public String getmTitle() {
        return mTitle;
    }

    public String getmDetail() {
        return mDetail;
    }
}
```


**Utility.java**

```java
public class Utility {
    static ArrayList<RowData> castToRowDataList(Object o) {
        // ArrayListかどうかのチェック
        if (o instanceof ArrayList<?>) {
            ArrayList<?> list = (ArrayList<?>) o;
            ArrayList<RowData> rowDataList = new ArrayList<>();
            // 要素の型チェック
            for (Object item : list) {
                if (item instanceof RowData) {
                    rowDataList.add((RowData) item);
                } else {
                    throw new ClassCastException();
                }
            }
            return rowDataList;
        } else {
            throw new ClassCastException();
        }
    }
}
```


**activity_main.xml**

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:android="http://schemas.android.com/apk/res/android">

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recycler_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

</LinearLayout>
```


**row.xml**

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <ImageView
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:scaleType="fitCenter"
        android:src="@mipmap/ic_launcher" />

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical">

        <TextView
            android:id="@+id/title"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            tools:text="title" />

        <TextView
            android:id="@+id/detail"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            tools:text="detail" />

    </LinearLayout>

</LinearLayout>
```


