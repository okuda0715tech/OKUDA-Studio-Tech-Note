- [通知をスワイプしても消えない場合](#通知をスワイプしても消えない場合)
  - [onGoing 状態を false にセットする](#ongoing-状態を-false-にセットする)
  - [開始した Service が終了されていない](#開始した-service-が終了されていない)


# 通知をスワイプしても消えない場合

通知をスワイプしても消えない場合は、以下の対応を検討してください。


## onGoing 状態を false にセットする

`setOngoing()` メソッドで onGoing 状態を `false` にしてください。  
`true` をセットした場合、ユーザがスワイプしても通知を削除することができません。

```java
NotificationCompat.Builder builder =
    new NotificationCompat.Builder(TweetExeService.this, TWEET_EXE_CHANNEL_ID)
        .setSmallIcon(R.drawable.ic_stat_app_default)
        .setContentTitle(res.getString(R.string.notification_tweet_failed_title))
        .setContentText(detail)
        .setOngoing(false)
        .setPriority(NotificationCompat.PRIORITY_DEFAULT);
```


## 開始した Service が終了されていない

開始した `Service` は、明示的にストップしなければ残り続けます。

フォアグラウンドサービスを実行するには、実行中は通知を表示し続ける必要があるため、  
通常、サービス開始直後に、 `startForeground(int id, Notification notification)`  
を実行します。この際に、第二引数に、サービス実行中に表示し続ける通知を渡します。

ここで渡した `Notification` が、サービス実行中はずっと残り続けると思いきや、実は、  
そうとは限りません。サービス実行中に別の通知が表示された場合は、最初に  
`startForeground()` で渡した `Notification` は消えて、その後に表示された `Notification` が  
サービスを継続的に実行するために必要な通知とみなされます。

そのため、サービスの実行途中で表示した通知が、スワイプしても消せない状況になることがあります。
