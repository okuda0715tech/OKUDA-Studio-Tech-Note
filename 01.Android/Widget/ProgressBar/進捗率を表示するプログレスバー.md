- [進捗率を表示するプログレスバー](#進捗率を表示するプログレスバー)
  - [概要](#概要)
  - [基本形](#基本形)


# 進捗率を表示するプログレスバー

## 概要

棒状のプログレスバーで、進捗率に合わせて色が塗られるタイプのプログレスバーについて説明をします。


## 基本形

ポイントは二箇所です。

- `style="@android:style/Widget.ProgressBar.Horizontal"` を指定する。
- `android:indeterminate="false"` を指定する。

`indeterminate` 属性は、進捗率を持つか、持たないかを示します。  
進捗率を持つかどうかは、プログレスバーの形状 (棒タイプかグルグルタイプか) は関係ありません。  
棒タイプでもアニメーションし続けているものもありますし、  
グルグルタイプでも進捗率に応じて塗りつぶされるものもあります。

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:gravity="center_horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">
 
    <ProgressBar android:id="@+id/progressbar"
        android:layout_height="20dp"
        android:layout_width="200dp"
        android:layout_margin="30dp"
        android:indeterminate="false"
        style="@android:style/Widget.ProgressBar.Horizontal" />
 
    <Button
        android:id="@+id/button"
        android:text="@string/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
 
</LinearLayout>
```

```Java
public class MainActivity extends AppCompatActivity {
 
    private ProgressBar progressBar;
    private int val = 0;
 
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        progressBar = findViewById(R.id.progressbar);
        // 水平プログレスバーの最大値を設定します
        progressBar.setMax(100);

        Button button = findViewById(R.id.button);
        button.setOnClickListener( v -> {
            val += 10;
 
            // 進捗率を更新
            progressBar.setProgress(val);
 
            // セカンダリ値 (薄い塗りつぶし)
            // Youtube でいうなら、ロードの進捗率を表すもの
            progressBar.setSecondaryProgress(70);
        });
 
    }
}
```




