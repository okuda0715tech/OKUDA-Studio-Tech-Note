<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [トラブルシューティング](#トラブルシューティング)
  - [Content is not allowed in prolog.](#content-is-not-allowed-in-prolog)
  - [org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.](#orgxmlsaxsaxparseexception-linenumber-1-columnnumber-1-content-is-not-allowed-in-prolog)
  - [Cause: only whitespace content allowed before start tag and not \\u0 (position: START\_DOCUMENT seen \\u0... @1:1)](#cause-only-whitespace-content-allowed-before-start-tag-and-not-u0-position-start_document-seen-u0-11)
  - [API 'BaseVariant.getApplicationIdTextResource' is obsolete and has been replaced with 'VariantProperties.applicationId'.](#api-basevariantgetapplicationidtextresource-is-obsolete-and-has-been-replaced-with-variantpropertiesapplicationid)
  - [R ファイル（リソースファイル）への参照が通らない](#r-ファイルリソースファイルへの参照が通らない)
  - [couldn't make a guess for viewmodel](#couldnt-make-a-guess-for-viewmodel)
<!-- TOC END -->


# トラブルシューティング

## Content is not allowed in prolog.

Git 管理されていないファイルに変更があって、それが悪さをしている可能性があるため、  
一旦、 Github に全ての変更をプッシュして、別のローカルリポジトリにプルしてみる。

フランス語、イタリア語対応を行なった際に、上記のエラーが発生した。

原因は、これらの言語には、シングルクォーテーションが含まれているが、全てのシングル  
クォーテーションのエスケープができていなかったことだった。

シングルクォーテーションは、通常、 `strings.xml` ファイル内の `<string>`  
タグ内にエスケープなしで記述した時点で該当部分に赤色の波線が表示される。  
しかし、波線が表示されていない部分もあったため、それを見逃していた。

どの文字列リソースがエスケープされていないかは、次のようなエラーが出ているため、  
そのエラーを探してください。

> Task :app:mergeDebugResources FAILED
/Users/okuda0715/AndroidStudioProjects/AppName/app/src/main/res/values-fr/strings.xml:40:4: Failed to flatten XML for resource 'force_app_update_notification_message' with error: Invalid unicode escape sequence in string
"{str}"
/Users/okuda0715/AndroidStudioProjects/AppName/app/src/main/res/values-fr/strings.xml:40:4: string/force_app_update_notification_message does not contain a valid string resource.


## org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.

`Content is not allowed in prolog.` の項目と同じ原因であることが考えられるため、  
そちらを参照してください。


## Cause: only whitespace content allowed before start tag and not \u0 (position: START_DOCUMENT seen \u0... @1:1)

`Content is not allowed in prolog.` の項目と同じ原因であることが考えられるため、  
そちらを参照してください。


## API 'BaseVariant.getApplicationIdTextResource' is obsolete and has been replaced with 'VariantProperties.applicationId'.

**エラーメッセージの詳細**

```
API 'BaseVariant.getApplicationIdTextResource' is obsolete and has been replaced with 'VariantProperties.applicationId'.
It will be removed in version 7.0 of the Android Gradle plugin.
For more information, see TBD.
To determine what is calling BaseVariant.getApplicationIdTextResource, use -Pandroid.debug.obsoleteApi=true on the command line to display more information.
```

この原因を調べるには、 `gradle.properties` に以下の記述を追加して、 `build.gradle` の `sync`  
ボタンをタップします。

**gradle.properties**

```
android.debug.obsoleteApi=true
```

すると、 `getApplicationIdTextResource` を呼び出している大体の部分がわかります。  
今回は、 `navigation` ライブラリが呼び大しているようでしたので、 `navigation` ライブラリを  
最新バージョンにアップデートすることでエラーは解消されました。


## R ファイル（リソースファイル）への参照が通らない

`settings.gradle` ファイルの `rootProject.name` 属性がプロジェクト名 or パッケージ名  
に一致していない可能性がある。その部分を見直してみましょう。


## couldn't make a guess for viewmodel

パッケージ名等の命名規則に違反していることを示すエラーのようです。  
例えば、パッケージ名は、大文字を使用することはできませんが大文字を使用している場合は、このエラーになります。

また、大文字で始めなければいけないところで、小文字で始めてしまっている場合などにもこのエラーのなります。




