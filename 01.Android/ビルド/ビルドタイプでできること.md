<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [ビルドタイプでできること](#ビルドタイプでできること)
  - [プロパティ一覧](#プロパティ一覧)
  - [プロダクトフレーバーで使用できて、ビルドタイプで使用できないプロパティ一覧](#プロダクトフレーバーで使用できてビルドタイプで使用できないプロパティ一覧)
  - [ビルドタイプごとにアプリケーション ID を変更する](#ビルドタイプごとにアプリケーション-id-を変更する)
  - [ライブラリに存在しないビルドタイプがアプリのビルドタイプに存在している場合](#ライブラリに存在しないビルドタイプがアプリのビルドタイプに存在している場合)
  - [おすすめの設定](#おすすめの設定)
  - [DEBUG ビルド時のみ実行したいコードがある場合](#debug-ビルド時のみ実行したいコードがある場合)
<!-- TOC END -->


# ビルドタイプでできること

## プロパティ一覧

時間があるときに記載する。


## プロダクトフレーバーで使用できて、ビルドタイプで使用できないプロパティ一覧

| プロパティ名      | 用途                                                                                           |
|-------------------|------------------------------------------------------------------------------------------------|
| versionNameSuffix | 元のバージョンネームの末尾にこの値を付与して、このプロダクトフレーバーのバージョンネームとする |


## ビルドタイプごとにアプリケーション ID を変更する

アプリケーション ID は、デバイス内や Play ストア内で、アプリケーションを一意に識別する ID である。

変更方法は以下の通り。

```java
android {
  buildTypes {
    debug {
      applicationIdSuffix ".debug"
    }
  }
}
```

- メリット
  - アプリの「デバッグ版」と「リリース版」を同じデバイス内に同時に存在させることができ、  
      デバッグ版とリリース版の動作比較などが行いやすくなる。
- デメリット
  - `PackageManager` を使用する場合など、動的にパッケージ名を取得しているコードが存在すると、  
    そちらにもコードを用意しなければエラーが発生する可能性がある。
  - 例えば、 `BroadcastReceiver` を動的に 有効化 / 無効化 する  
    `PackageManager.setComponentEnabledSetting()` メソッドを使用する場合がそれにあたる。


## ライブラリに存在しないビルドタイプがアプリのビルドタイプに存在している場合

以下の例は、アプリの `build.gradle` には、 staging ビルドタイプが存在するが、  
ライブラリの `build.gradle` には、 staging ビルドタイプが存在しない場合の対処例です。

```java
// これはアプリ側の build.gradle ファイルを示しています。
android {
  buildTypes {
    debug {}
    release {}
    staging {
      // 先頭のパラメータから対応するビルドタイプが存在しているかをチェックしていき、
      // 存在している場合に、そのビルドタイプを適用します。
      // パラメータはいくつでも指定することができます。
      // 対応するプロダクトフレーバーが存在しない場合にはビルドエラーになります。
      matchingFallbacks = ['debug', 'qa', 'release']
    }
  }
}
```


## おすすめの設定

```java
android {
  buildTypes {
    debug {
      // debug 版と release 版をデバイスに同時に存在させることが可能になり、
      // 動作の比較が行いやすくなります。
      applicationIdSuffix ".debug"
      debuggable true
    }
  }
}
```


## DEBUG ビルド時のみ実行したいコードがある場合

```java
if (BuildConfig.DEBUG) {
    // ...
}
```
