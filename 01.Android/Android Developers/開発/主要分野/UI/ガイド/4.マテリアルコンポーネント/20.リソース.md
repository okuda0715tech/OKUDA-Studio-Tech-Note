- [Compose のリソース](#compose-のリソース)
  - [文字列](#文字列)
  - [文字列の複数形（試験運用版）](#文字列の複数形試験運用版)
  - [ディメンション](#ディメンション)
  - [色](#色)
  - [ベクターアセットと画像リソース](#ベクターアセットと画像リソース)
  - [アニメーション化されたベクター型ドローアブル](#アニメーション化されたベクター型ドローアブル)
  - [アイコン](#アイコン)
  - [フォント](#フォント)


# Compose のリソース

Jetpack Compose は、Android プロジェクトで定義されたリソースにアクセスできます。このドキュメントでは、そのために Compose が提供している API の一部について説明します。

リソースとは、コードが使用する追加のファイルと静的コンテンツであり、ビットマップ、レイアウト定義、ユーザー インターフェース文字列、アニメーション命令などがあります。Android のリソースにあまり詳しくない場合は、アプリリソースの概要ガイドをご覧ください。


## 文字列

最も一般的なタイプのリソースは、文字列です。XML リソースで静的に定義されている文字列を取得するには、stringResource API を使用します。

```xml
<!--  res/values/strings.xml -->
<string name="compose">Jetpack Compose</string>
```

```kotlin
Text(
    text = stringResource(R.string.compose)
)
```

stringResource は、プレースホルダにも対応しています。


```xml
<!-- res/values/strings.xml -->
<string name="congratulate">Happy %1$s %2$d</string>
```

```kotlin
Text(
    // Happy New Year 2021
    text = stringResource(R.string.congratulate, "New Year", 2021)
)
```


## 文字列の複数形（試験運用版）

ある数量の複数形を読み込むには、pluralStringResource API を使用します。

```xml
<!-- res/strings.xml -->
<plurals name="runtime_format">
   <item quantity="one">%1$d minute</item>
   <item quantity="other">%1$d minutes</item>
</plurals>
```

```kotlin
Text(
    text = pluralStringResource(
        R.plurals.runtime_format,
        quantity,
        quantity
    )
)
```

pluralStringResource メソッドを使用する際、文字列に数値の文字列形式が含まれる場合は、カウントを 2 回渡す必要があります。たとえば、 `%1$d minutes` という文字列の場合、最初のカウント パラメータが適切な複数形の文字列を選択し、2 つ目のカウント パラメータが `%1$d` プレースホルダに挿入されます。複数形の文字列に文字列形式が含まれていない場合、3 つ目のパラメータを pluralStringResource に渡す必要はありません。

複数形の詳細については、 [数量文字列に関するドキュメント](https://developer.android.com/guide/topics/resources/string-resource?hl=ja&_gl=1*1ggo6bb*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..#Plurals) をご覧ください。


## ディメンション

同様に、リソース XML ファイルからディメンションを取得するには、dimensionResource API を使用します。

```xml
<!-- res/values/dimens.xml -->
<dimen name="padding_small">8dp</dimen>
```

```kotlin
val smallPadding = dimensionResource(R.dimen.padding_small)
Text(
    text = "...",
    modifier = Modifier.padding(smallPadding)
)
```


## 色

アプリで Compose を段階的に導入する場合は、colorResource API を使用してリソース XML ファイルから色を取得します。 ( Compose を一気に導入する場合は、テーマを使用してくださいという意味だと思われます。)

```xml
<!-- res/colors.xml -->
<color name="purple_200">#FFBB86FC</color>
```

```kotlin
Divider(color = colorResource(R.color.purple_200))
```

colorResource は静的な色では想定どおりに動作しますが、 [カラー状態リストリソース](https://developer.android.com/guide/topics/resources/color-list-resource?hl=ja&_gl=1*1xv25kf*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..) をフラット化します。

**警告** : ハードコードされた色よりも、テーマからの色を優先してください。colorResource 関数を使用して色にアクセスすることは可能ですが、MaterialTheme.colors.primary などのコンポーザブルからアクセスできる MaterialTheme でアプリの色を定義することをおすすめします。詳しくは、Compose のデザイン システムに関するドキュメントをご覧ください。


## ベクターアセットと画像リソース

ベクター型ドローアブルか、または PNG などのラスター化されたアセット形式を読み込むには、 painterResource API を使用します。ドローアブルのタイプを認識する必要はありません。単に、Image コンポーザブルまたは paint 修飾子で painterResource を使用するだけです。

```kotlin
// res/drawable フォルダに以下の画像が配置されているとします。
// - res/drawable-nodpi/ic_logo.xml
// - res/drawable-xxhdpi/ic_logo.png

Icon(
    painter = painterResource(id = R.drawable.ic_logo),
    contentDescription = null
)
```

painterResource は、メインスレッドでリソースの内容をデコードして解析します。

注: [Context.getDrawable](https://developer.android.com/reference/android/content/Context?hl=ja&_gl=1*1ffofh2*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..#getDrawable(int)) と異なり、painterResource は [BitmapDrawable](https://developer.android.com/reference/android/graphics/drawable/BitmapDrawable?hl=ja&_gl=1*1ffofh2*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..) および [VectorDrawable](https://developer.android.com/reference/android/graphics/drawable/VectorDrawable?hl=ja&_gl=1*1ffofh2*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..) プラットフォーム [Drawable](https://developer.android.com/reference/android/graphics/drawable/Drawable?hl=ja&_gl=1*1ffofh2*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..) タイプのみを読み込みます。


## アニメーション化されたベクター型ドローアブル

アニメーション化されたベクター型ドローアブル XML を読み込むには、 AnimatedImageVector.animatedVectorResource API を使用します。このメソッドは AnimatedImageVector インスタンスを返します。アニメーション化された画像を表示するには、rememberAnimatedVectorPainter メソッドを使用して、Image および Icon コンポーザブルで使用できる Painter を作成します。

rememberAnimatedVectorPainter メソッドのブール値の atEnd パラメータは、アニメーションの状態を表します。 true なら終了状態、 false なら開始状態を表します。アニメーションが終了すると、自動的に true に書き換えられるものだと思われます。プログラマーが、この値を状態として使用し、値を false に変更すると、アニメーションがトリガーされます。

```kotlin
// res/drawable フォルダに以下のファイルが配置されているとします。
// - res/drawable/ic_hourglass_animated.xml

val image =
    AnimatedImageVector.animatedVectorResource(R.drawable.ic_hourglass_animated)
val atEnd by remember { mutableStateOf(false) }
Icon(
    painter = rememberAnimatedVectorPainter(image, atEnd),
    contentDescription = null
)
```

## アイコン

Jetpack Compose には、Compose で [マテリアル アイコン](https://fonts.google.com/icons) を使用するためのエントリ ポイントとなる Icons オブジェクトが用意されています。次の 5 つの異なるアイコンテーマがあります。

- [塗りつぶし](https://developer.android.com/reference/kotlin/androidx/compose/material/icons/Icons.Filled?hl=ja&_gl=1*12pu4it*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..)
- [枠線付き](https://developer.android.com/reference/kotlin/androidx/compose/material/icons/Icons.Outlined?hl=ja&_gl=1*14rd6ig*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..)
- [角に丸みを帯びた](https://developer.android.com/reference/kotlin/androidx/compose/material/icons/Icons.Rounded?hl=ja&_gl=1*14rd6ig*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..)
- [ツートーン](https://developer.android.com/reference/kotlin/androidx/compose/material/icons/Icons.TwoTone?hl=ja&_gl=1*14rd6ig*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..)
- [鋭角](https://developer.android.com/reference/kotlin/androidx/compose/material/icons/Icons.Sharp?hl=ja&_gl=1*14rd6ig*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..)

各テーマには同じアイコンが含まれていますが、視覚的なスタイルが異なります。一般的には、アプリ全体の整合性を確保するため、1 つのテーマを選択する必要があります。

アイコンを描画するには、 [Icon](https://developer.android.com/reference/kotlin/androidx/compose/material/package-summary?hl=ja&_gl=1*10fp29a*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..#Icon(androidx.compose.ui.graphics.vector.ImageVector,kotlin.String,androidx.compose.ui.Modifier,androidx.compose.ui.graphics.Color)) コンポーザブルを使用できます。このコンポーザブルは、アイコンに合わせて色合いを適用し、レイアウト サイズを提供します。

```kotlin
Icon(Icons.Rounded.Menu, contentDescription = "Localized description")
```

androidx.compose.material 依存関係の一部として、よく使用されるアイコンの一部を使用できます。その他のマテリアル アイコンを使用するには、build.gradle ファイルに material-icons-extended 依存関係を追加します。

```kotlin
dependencies {
  def composeBom = platform('androidx.compose:compose-bom:2024.06.00')
  implementation composeBom

  implementation 'androidx.compose.material:material-icons-extended'
}
```

注: アイコンは、マテリアルで定義されているものと同じ名前を維持しますが、 snake_case の名前が PascalCase に変換されました。たとえば、 `add_alarm` は `AddAlarm` 。数字で始まるアイコン（ 360 など）には、先頭に `_` が付き、 `_360` になります。

警告: material-icons-extended はサイズの大きいライブラリであり、APK に影響する可能性があります。 指定します。そのため、製品版ビルドでは R8/Proguard を使用し、使用されていないリソースを取り除くことを検討してください。また、サイズが大きいために、開発中は、プロジェクトのビルド時間と Android Studio のプレビューの読み込み時間が増加する可能性があります。一方、material-icons-extended を使用すると、 すべてのアイコンの最新バージョンにすばやくアクセスして、反復処理を迅速化できます。 このライブラリを使用してアイコンのソースコードをコピーし、 アプリのコピーを修正します。または、Android Studio を使用して Studio のインポート ベクター アセット 機能をご覧ください。

警告: material-icons-extended はサイズの大きなライブラリであり、APK のサイズに影響を与える可能性があります。そのため、使用されていないリソースを削除するために、本番ビルドで R8/Proguard を使用することを検討してください。  
さらに、サイズが大きいため、開発中にプロジェクトのビルド時間と Android Studio のプレビューの読み込み時間が長くなる可能性があります。  
一方、material-icons-extended を使用すると、常にすべてのアイコンの最新バージョンにすばやくアクセスすることができます。このライブラリを使用してアイコンのソース コードをコピーし、アプリに固定コピーを用意したり、 [Android Studio のベクター アセットのインポート機能](https://developer.android.com/studio/write/vector-asset-studio?hl=ja&_gl=1*15s0azd*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..#materialicon) を使用してアイコンをインポートしたりすることもできます。


## フォント

Compose でフォントを使用するには、フォント ファイルを res/font フォルダに配置することにより、フォント ファイルを APK に直接ダウンロードしてバンドルします。

[Font](https://developer.android.com/reference/kotlin/androidx/compose/ui/text/font/Font?_gl=1*c61hh5*_up*MQ..*_ga*MTA0NTg2NTA1Mi4xNzI0NjU4NTI1*_ga_6HH9YJMN9M*MTcyNTE3OTU2Ni40LjAuMTcyNTE3OTU2Ni4wLjAuMA..) API を使用して各フォントを読み込み、それらを使用して [FontFamily](https://developer.android.com/reference/kotlin/androidx/compose/ui/text/font/FontFamily?_gl=1*c61hh5*_up*MQ..*_ga*MTA0NTg2NTA1Mi4xNzI0NjU4NTI1*_ga_6HH9YJMN9M*MTcyNTE3OTU2Ni40LjAuMTcyNTE3OTU2Ni4wLjAuMA..) を作成します。これを [TextStyle](https://developer.android.com/reference/kotlin/androidx/compose/ui/text/TextStyle?_gl=1*9pnn1u*_up*MQ..*_ga*MTA0NTg2NTA1Mi4xNzI0NjU4NTI1*_ga_6HH9YJMN9M*MTcyNTE3OTU2Ni40LjAuMTcyNTE3OTU2Ni4wLjAuMA..) インスタンスで使用することにより、独自の [Typography](https://developer.android.com/reference/kotlin/androidx/compose/material/Typography?_gl=1*g7ltf3*_up*MQ..*_ga*MTA0NTg2NTA1Mi4xNzI0NjU4NTI1*_ga_6HH9YJMN9M*MTcyNTE3OTU2Ni40LjAuMTcyNTE3OTU2Ni4wLjAuMA..) を作成できます。次のコードは  [Crane](https://github.com/android/compose-samples/tree/main/Crane) アプリの [Typography.kt](https://github.com/android/compose-samples/blob/main/Crane/app/src/main/java/androidx/compose/samples/crane/ui/Typography.kt) の一部です。

```kotlin
// アプリのフォントを定義して、ロードする。
private val light = Font(R.font.raleway_light, FontWeight.W300)
private val regular = Font(R.font.raleway_regular, FontWeight.W400)
private val medium = Font(R.font.raleway_medium, FontWeight.W500)
private val semibold = Font(R.font.raleway_semibold, FontWeight.W600)

// TextStyles で使用するために、 FontFamily を生成します。
private val craneFontFamily = FontFamily(light, regular, medium, semibold)

// カスタムタイポグラフィーを定義するためにフォントファミリーを使用します。
val craneTypography = Typography(
    titleLarge = TextStyle(
        fontFamily = craneFontFamily
    ) /* ... */
)

// このテーマが使用されている UI 階層の中で、そのタイポグラフィを使用して  MaterialTheme  を作成します。
@Composable
fun CraneTheme(content: @Composable () -> Unit) {
    MaterialTheme(typography = craneTypography) {
        content()
    }
}
```

Compose でダウンロード可能なフォントを使用する方法については、 [ダウンロード可能なフォント](https://developer.android.com/develop/ui/compose/text?hl=ja&_gl=1*1l4s6e3*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..#downloadable-fonts) のページをご覧ください。

タイポグラフィについて詳しくは、 [Compose のテーマ設定に関するドキュメント](https://developer.android.com/develop/ui/compose/designsystems/material3?hl=ja&_gl=1*1l4s6e3*_up*MQ..*_ga*NTY3MDY5MDA1LjE3MjQ2NTg1MjY.*_ga_6HH9YJMN9M*MTcyNTQzNTQ0NC45LjAuMTcyNTQzNTQ0NC4wLjAuMA..#typography) をご覧ください。

