- [状態の生成方法](#状態の生成方法)
  - [MutableStateFlow コンストラクタ](#mutablestateflow-コンストラクタ)
  - [MutableStateFlow.asStateFlow 関数](#mutablestateflowasstateflow-関数)
  - [produceState 関数](#producestate-関数)
  - [mutableStateMapOf 関数](#mutablestatemapof-関数)


# 状態の生成方法

## MutableStateFlow コンストラクタ

```kotlin
MutableStateFlow("初期値")
```


## MutableStateFlow.asStateFlow 関数

```kotlin
data class DiceUiState(
    val firstDieValue: Int? = null,
    val secondDieValue: Int? = null,
    val numberOfRolls: Int = 0,
)

private val _uiState = MutableStateFlow(DiceUiState())
val uiState: StateFlow<DiceUiState> = _uiState.asStateFlow()
```


## produceState 関数




## mutableStateMapOf 関数

以下のコードでは、マップの操作（追加・削除）により、自動的に再コンポーズが行われます。 mutableStateMapOf 関数によって生成されるオブジェクトは、 SnapshotStateMap 型です。

```kotlin
import androidx.compose.foundation.layout.*
import androidx.compose.foundation.text.BasicText
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.tooling.preview.Preview
import androidx.compose.ui.unit.dp

@Composable
fun MutableStateMapSample() {
    // mutableStateMapOf を使ってマップを作成
    val items = remember { mutableStateMapOf("item1" to "Value 1", "item2" to "Value 2") }

    Column(Modifier.padding(16.dp)) {
        // マップ内のアイテムを表示
        items.forEach { (key, value) ->
            Row(Modifier.fillMaxWidth()) {
                BasicText(text = "$key: $value")
            }
        }

        Spacer(modifier = Modifier.height(16.dp))

        // アイテムを追加するボタン
        Button(onClick = {
            val newKey = "item" + (items.size + 1)
            items[newKey] = "Value ${items.size + 1}"
        }) {
            Text("Add Item")
        }

        Spacer(modifier = Modifier.height(16.dp))

        // 最後のアイテムを削除するボタン
        Button(onClick = {
            if (items.isNotEmpty()) {
                val lastKey = items.keys.last()
                items.remove(lastKey)
            }
        }) {
            Text("Remove Last Item")
        }
    }
}

@Preview
@Composable
fun PreviewMutableStateMapSample() {
    MutableStateMapSample()
}
```

<img src="./画像/状態の変更に伴って通知してくれる Map の例.png" width="300">
