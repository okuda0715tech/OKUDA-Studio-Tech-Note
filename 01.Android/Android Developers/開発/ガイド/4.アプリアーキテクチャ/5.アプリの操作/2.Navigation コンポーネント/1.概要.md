- [ナビゲーション](#ナビゲーション)
  - [主要なコンセプト](#主要なコンセプト)
  - [メリットと機能](#メリットと機能)
  - [環境をセットアップする](#環境をセットアップする)
  - [引用元資料](#引用元資料)


# ナビゲーション

ナビゲーションとは、ユーザーがアプリ内のさまざまなコンテンツ間を行き来する操作を指します。

Android Jetpack の Navigation コンポーネントには、 [Navigation ライブラリ](https://developer.android.com/jetpack/androidx/releases/navigation?hl=ja&_gl=1*xkl9y0*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3) 、 [Safe Args Gradle プラグイン](https://developer.android.com/guide/navigation/navigation-pass-data?hl=ja&_gl=1*xkl9y0*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3#Safe-args) 、アプリ ナビゲーションの実装に役立つツールが含まれています。Navigation コンポーネントは、単純なボタンクリックから、アプリバーやナビゲーション ドロワーなどの複雑なパターンまで、さまざまなナビゲーションのユースケースに対応しています。

重要: Navigation コンポーネントは、確立された [一連の原則](https://developer.android.com/guide/navigation/navigation-principles?hl=ja&_gl=1*6qpxyj*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3) を遵守することで、一貫性のある予測可能なユーザー エクスペリエンスを実現します。


## 主要なコンセプト

以下に、ナビゲーションの主なコンセプト (ホスト / グラフ / コントローラ / リンク先 / ルート) と、その実装に使用する主なタイプの概要を示します。

- ホスト
  - 目的
    - 現在のナビゲーション デスティネーションを含む UI 要素です。
    - ユーザーがアプリ内を移動すると、基本的には、アプリがナビゲーション ホストのデスティネーションをを入れ替えます。
  - 型
    - コンポーズの場合: [NavHost](https://developer.android.com/reference/kotlin/androidx/navigation/compose/package-summary?hl=ja&_gl=1*1u3tc1i*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3#NavHost(androidx.navigation.NavHostController,androidx.navigation.NavGraph,androidx.compose.ui.Modifier,androidx.compose.ui.Alignment,kotlin.Function1,kotlin.Function1,kotlin.Function1,kotlin.Function1))
    - フラグメントの場合: [NavHostFragment](https://developer.android.com/reference/androidx/navigation/fragment/NavHostFragment?hl=ja&_gl=1*1u3tc1i*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3)

- グラフ
  - 目的
    - アプリ内のすべてのナビゲーション デスティネーションと、それらの接続方法を定義するデータ構造。
  - 型
    - [NavGraph](https://developer.android.com/reference/androidx/navigation/NavGraph?hl=ja&_gl=1*1u3tc1i*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3)

- コントローラ
  - 目的
    - デスティネーション間のナビゲーションを中央で管理する調整役です。
    - このコントローラが、デスティネーション間の移動、ディープリンクの処理、バックスタックの管理などを実行するためのメソッドを提供します。
  - 型
    - [NavController](https://developer.android.com/reference/androidx/navigation/NavController?hl=ja&_gl=1*1u3tc1i*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3)

- リンク先 (デスティネーション)
  - 目的
    - ナビゲーション グラフ内のノードです。
    - ユーザーが特定のノードに移動すると、ホストはそのコンテンツを表示します。
  - 型
    - [NavDestination](https://developer.android.com/reference/androidx/navigation/NavDestination?hl=ja&_gl=1*1u3tc1i*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3)
    - 通常、ナビゲーション グラフの作成時に作成されます。

- ルート (**【注意】「経路」という意味であり、「根元」という意味ではありません。**)
  - 目的
    - 宛先とそれに必要なデータを一意に識別します。
    - ルートを使用して移動できる。ルートを使用すると目的地までスムーズに移動できます。
  - 型
    - シリアル化可能なデータ型。

重要: Compose 、 Android View 、カスタム UI フレームワークのいずれを使用している場合でも、ナビゲーションを実装する際はこれらのコンセプトが常に適用されます。ただし、具体的な使用方法は異なる場合があります。


## メリットと機能

Navigation コンポーネントには、他にも以下のような多くのメリットと機能があります。

- **アニメーションと遷移**: アニメーションと遷移用の標準化されたリソースを提供します。
- **ディープリンク**: ユーザーをデスティネーションに直接誘導するディープリンクを実装して処理します。
- **UI パターン**: ナビゲーション ドロワーやボトム ナビゲーションなどを、最小限の追加作業で組み込むためのパターンをサポートします。
- **型安全性**: [型安全性](https://developer.android.com/guide/navigation/design/type-safety?hl=ja&_gl=1*lhpjno*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3) によるデスティネーション間でのデータ受け渡しのサポートが含まれます。
- **ViewModel のサポート**: ナビゲーション グラフに対する ViewModel のスコープ設定を有効にして、グラフのデスティネーション間で UI 関連のデータを共有できます。
- **フラグメント トランザクション**: フラグメント トランザクションを完全にサポートおよび処理します。
- **「戻る」と「上へ」**: 「戻る」および「上へ」アクションをデフォルトで正しく処理します。

注: ナビゲーション グラフに XML を使用している場合は、Android Studio の [Navigation Editor](https://developer.android.com/guide/navigation/design/editor?hl=ja&_gl=1*1pmi9r7*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3) を使用して、グラフを編集します。

注: Android 13 では、Android デバイス向けに、Navigation コンポーネントと連携する予測型「戻る」ナビゲーションが導入されています。できるだけ早く、アプリに予測型「戻る」ナビゲーションを実装してください。実装しない場合、Android の今後のリリースで予期しない動作が発生する可能性があります。


## 環境をセットアップする

プロジェクトに Navigation のサポートを組み込むには、アプリの build.gradle ファイルに以下の依存関係を追加します。

```kotlin
plugins {
  // Kotlin serialization plugin for type safe routes and navigation arguments
  kotlin("plugin.serialization") version "2.0.21"
}

dependencies {
    val nav_version = "2.8.4"

    // Jetpack Compose integration
    implementation("androidx.navigation:navigation-compose:$nav_version")

    // Views/Fragments integration
    implementation("androidx.navigation:navigation-fragment:$nav_version")
    implementation("androidx.navigation:navigation-ui:$nav_version")

    // Feature module support for Fragments
    implementation("androidx.navigation:navigation-dynamic-features-fragment:$nav_version")

    // Testing Navigation
    androidTestImplementation("androidx.navigation:navigation-testing:$nav_version")

    // JSON serialization library, works with the Kotlin serialization plugin
    implementation("org.jetbrains.kotlinx:kotlinx-serialization-json:1.7.3")
}
```

他のアーキテクチャ コンポーネントをプロジェクトに追加する方法については、 [プロジェクトにコンポーネントを追加する](https://developer.android.com/topic/libraries/architecture/adding-components?hl=ja&_gl=1*k5po3x*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3#navigation) をご覧ください。


## 引用元資料

- [ナビゲーション](https://developer.android.com/guide/navigation?hl=ja&_gl=1*116iumc*_up*MQ..*_ga*MTU0NjM2NDc1Mi4xNzMzNzkyNDc4*_ga_6HH9YJMN9M*MTczMzc5NDczMy4yLjAuMTczMzc5NDczMy4wLjAuNTg5MDkxMTY3)



