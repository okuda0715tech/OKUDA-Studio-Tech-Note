<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [キーボード](#キーホート)
	- [Activity開始時にキーボードを表示する](#activity開始時にキーボードを表示する)
	- [必要になった時にキーボードを表示する](#必要になった時にキーボードを表示する)
	- [キーボードを非表示にする](#キーボードを非表示にする)
	- [キーボードが表示されたときにViewが隠れないようにする](#キーボードが表示されたときにviewが隠れないようにする)
	- [端末がLandscape状態で全画面表示されるキーボードと入力エリアはアプリのViewではなく、キーボードのViewなので何も変更できない。](#端末がlandscape状態で全画面表示されるキーボードと入力エリアはアプリのviewではなくキーボードのviewなので何も変更できない)
<!-- TOC END -->


# キーボード

## Activity開始時にキーボードを表示する

Android では、アクティビティの開始時にレイアウトの最初のテキスト フィールドにフォーカスが合いますが、入力方法は表示されません。  
テキストの入力はアクティビティの主要なタスクではない可能性があるため、この動作は適切です。  
ただし、テキストの入力が実際に主要なタスク（ログイン画面など）である場合は、入力方法をデフォルトで表示することをおすすめします。

**AndroidManifest.xml**

```xml
<application ... >
		<activity
				android:windowSoftInputMode="stateVisible" >
				...
		</activity>
		...
</application>
```


## 必要になった時にキーボードを表示する

入力対象とするEditTextを引数に渡して、以下のメソッドを呼ぶと、キーボードが表示されます。

```Java
public void showSoftKeyboard(View view) {
		if (view.requestFocus()) {
				InputMethodManager imm = (InputMethodManager)
								getSystemService(Context.INPUT_METHOD_SERVICE);
				imm.showSoftInput(view, InputMethodManager.SHOW_IMPLICIT);
		}
}
```


## キーボードを非表示にする

```Java
private void hideSoftKeyboard() {
		InputMethodManager inputMethodManager =
						(InputMethodManager) requireActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
		inputMethodManager.hideSoftInputFromWindow(
						requireView().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
}
```


## キーボードが表示されたときにViewが隠れないようにする

このあたりが参考になる。

[UI の対応方法を指定する](https://developer.android.com/training/keyboard-input/visibility)


## 端末がLandscape状態で全画面表示されるキーボードと入力エリアはアプリのViewではなく、キーボードのViewなので何も変更できない。

Landscapeでキーボード表示中に「入力方法の選択」から、`Gboard`や`iWnn IME`を選択すると表示が多少変わるのがその証拠である。

端末にインストールされているキーボードは以下から確認できる。

設定 -> システム -> 言語と文字入力 -> 仮想キーボード
