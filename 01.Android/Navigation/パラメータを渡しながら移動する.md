<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [パラメータを渡しながら移動する](#パラメータを渡しながら移動する)
  - [サンプル](#サンプル)
    - [build.gradle(Project)](#buildgradleproject)
    - [build.gradle(Module)](#buildgradlemodule)
    - [gradle.properties](#gradleproperties)
    - [mobile_navigation.xml](#mobile_navigationxml)
    - [パラメータを渡す側のフラグメント](#パラメータを渡す側のフラグメント)
    - [パラメータを受け取る側のフラグメント](#パラメータを受け取る側のフラグメント)
<!-- TOC END -->


# パラメータを渡しながら移動する

## サンプル

### build.gradle(Project)

以下を追加します。  
`plugins {}` ブロックよりも後に追加するとエラーになるので注意してください。

```
buildscript {
    dependencies {
        def nav_version = "2.4.2"
        classpath "androidx.navigation:navigation-safe-args-gradle-plugin:$nav_version"
    }
}
```


### build.gradle(Module)

以下を追加します。

```
plugins {
    id 'androidx.navigation.safeargs'
}
```

古い記述方法？だと、以下のように書くこともできます。

```
// build.gradle ファイルの先頭行あたりに記述します。
// シングルクォーテーションでもダブルクォーテーションでも、どちらでも大丈夫そうです。
apply plugin: "androidx.navigation.safeargs"
```


### gradle.properties

以下を追加します。 (既に追加されている可能性が高いです。)

```
android.useAndroidX=true
```


### mobile_navigation.xml

```xml
<navigation >

    <!-- パラメータを渡す側の Fragment -->
    <fragment
        android:id="@+id/nav_position_edit_screen"
        android:name="com.kurodai0715.restaurantseatsmanager.ui.position_edit.PositionEditFragment"
        android:label="@string/menu_position_edit_screen"
        tools:layout="@layout/fragment_position_edit">
        <action
            android:id="@+id/action_positionEditFragment_to_twitterFragment"
            app:destination="@id/nav_twitter_screen">
            <argument
                android:name="oauthToken"
                app:argType="string" />
            <argument
                android:name="oauthVerifier"
                app:argType="string" />
        </action>
    </fragment>

    <!-- パラメータを受け取る側の Fragment -->
    <fragment
        android:id="@+id/nav_twitter_screen"
        android:name="com.kurodai0715.restaurantseatsmanager.ui.twitter_cooperation.TwitterCooperationFragment"
        android:label="@string/menu_twitter_screen">
        <argument
            android:name="oauthToken"
            android:defaultValue="0"
            app:argType="string" />
        <argument
            android:name="oauthVerifier"
            android:defaultValue="0"
            app:argType="string" />
    </fragment>

</navigation>
```


#### app:argType の記述方法

| 扱いたい型       | app:argType の記述方法                          |
|------------------|-------------------------------------------------|
| Integer          | integer                                         |
| Float            | float                                           |
| Long             | long                                            |
| Boolean          | boolean                                         |
| string           | string                                          |
| Android リソース | reference                                       |
| Parcelable       | Parcelable を実装したクラスの完全修飾クラス名   |
| Serializable     | Serializable を実装したクラスの完全修飾クラス名 |
| Enum             | Enum の完全修飾クラス名                         |


### パラメータを渡す側のフラグメント

```java
// PositionEditFragmentDirections は、パラメータを渡す側のフラグメントのクラス名の後ろに
// Directions が付与された名前になります。
NavDirections action =
    PositionEditFragmentDirections.actionPositionEditFragmentToTwitterFragment(
        oauthToken, oauthVerifier);

navController.navigate(action);
```

もしくは、

```java
PositionEditFragmentDirections.ActionPositionEditFragmentToTwitterFragment action =
    PositionEditFragmentDirections.actionPositionEditFragmentToTwitterFragment(
        oauthToken, oauthVerifier);

navController.navigate((NavDirections) action);
// NavDirections へのキャストは本来不要であるが、ビルドが通るまで？は明示的にキャスト
// をしないとビルドエラーになるような感じです。
```


### パラメータを受け取る側のフラグメント

```java
// RegisterDataFragmentArgs は、パラメータを受け取る側のフラグメントのクラス名の後ろに
// Args が付与された名前になります。
RegisterDataFragmentArgs args = RegisterDataFragmentArgs.fromBundle(getArguments());
// getColumn1() メソッドのメソッド名は、ナビゲーションフラフの <argument> タグで定義した
// 名前になります。
String param1 = args.getColumn1();
```
