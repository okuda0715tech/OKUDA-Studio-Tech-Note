- [curl コマンドの構築（全 API 共通）](#curl-コマンドの構築全-api-共通)
  - [-L オプションでリダイレクト](#-l-オプションでリダイレクト)


# curl コマンドの構築（全 API 共通）

```shell
curl -L \
  -X POST \
  -H "Accept: application/vnd.github+json" \
  -H "Authorization: Bearer <YOUR-TOKEN>" \
  -H "X-GitHub-Api-Version: 2022-11-28" \
  https://api.github.com/repos/OWNER/REPO/issues \
  -d '{"title":"Found a bug","body":"I'\''m having a problem with this.","assignees":["octocat"],"milestone":1,"labels":["bug"]}'
```

| オプション  | オプション(省略形) | 引数                  | 説明                                                                                        |
| ----------- | ------------------ | --------------------- | ------------------------------------------------------------------------------------------- |
| --header    | -H                 | 名前: 値              | ヘッダが複数存在する場合は、ヘッダごとに、オプションを毎回記述する必要あり                  |
| --request   | -X                 | HTTP メソッド         | GET や POST など。省略時はデフォルトで GET となる。                                         |
| --url       | なし (※ 1 )        | URL                   | エンドポイント + クエリパラメータを指定                                                     |
| --data      | -d                 | データ                | POST リクエストのフォーム。このオプションを指定すると自動的に POST メソッドだと認識される。 |
|             | -u                 | ユーザー[:パスワード] | 基本認証などの認証を行う。                                                                  |
| --include   | -i                 | なし                  | レスポンス時に状態コードとヘッダーを表示するオプション。                                    |
| --location  | -L                 | なし                  | リダイレクトを自動的に実施する。 (※ 2 )                                                     |
|             | -o                 | 出力先                | レスポンスボディの内容を指定した場所に出力する。                                            |
|             | -s                 | なし                  | 終了ステータスのみを出力する。                                                              |
| --verbose   | -v                 | なし                  | 詳細を出力する。                                                                            |
|             | -I                 | なし                  | レスポンスヘッダーを取得する。                                                              |
| –user-agent | -A                 | AGENT                 | ユーザーエージェントを指定する。                                                            |
|             | -x                 | HOST[:PORT]           | 指定したプロキシサーバを利用する。                                                          |

(※ 1 )  
「なし」というのは、 「省略形がない」 という意味もありますが、 「オプションを指定しなくても、いきなり URL を記述すれば、認識される」という意味でもあります。

(※ 2 )  
詳細は、 [リダイレクト](#-l-オプションでリダイレクト) のセクションを参照してください。


## -L オプションでリダイレクト

HTTP ステータスコードが 300 番台（具体的には 301、302、303、307、308 など）である場合、レスポンスの Location ヘッダーにリダイレクト先の URL が指定されていることが一般的です。

たとえば、301 (Moved Permanently) や 302 (Found) のようなリダイレクトレスポンスには、クライアントがアクセスすべき新しい URL を示す Location ヘッダーが含まれます。クライアントはこの Location の値をもとに、リダイレクト先の URL へリクエストを送信することで、適切なリソースにアクセスできます。

通常、このリダイレクトは自動では行ってくれません。 `-L` オプションを付与することで、自動的にリダイレクトを行ってくれるようになります。

また、 300 (Multiple Choices) や 304 (Not Modified) などの一部の 300 番台ステータスコードには Location ヘッダーが含まれない場合もありますので、注意が必要です。


